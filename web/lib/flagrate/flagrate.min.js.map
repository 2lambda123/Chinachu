{"version":3,"sources":["flagrate.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","FButton","option","arguments","undefined","isRemovableByUser","this","onSelect","_util","emptyFunction","onRemove","attr","attribute","id","isFocused","button","_element","Element","extendObject","labelElement","insertTo","label","insertText","labelHTML","insert","addClassName","className","addEventListener","_onSelectHandler","bind","_removeButton","type","class","_onRemoveHandler","style","setStyle","color","setColor","icon","setIcon","isDisabled","disable","createButton","Button","Object","defineProperty","value","prototype","select","writeAttribute","enable","removeClassName","isEnabled","hasClassName","setLabel","text","updateText","setLabelHTML","html","update","charAt","backgroundColor","slice","test","c","parseInt","_color","getColor","identifier","_iconIdentifier","backgroundImage","getIcon","layerX","bw","getWidth","bh","getHeight","bp","getStyle","replace","rw","rh","lx","ly","layerY","isHitRemoveButton","_e","targetButton","fire","remove","./element","./util",2,"_interopRequireWildcard","obj","__esModule","newObj","key","hasOwnProperty","FButtons","items","container","push","stopPropagation","preventDefault","createButtons","Buttons","_button","_this","_onSelect","btn","dataset","getButtonByKey","elements","childNodes","getButtons","./button",3,"FCheckbox","opt","idCounter","toString","checkbox","onChange","onCheck","onUncheck","_input","top","targetCheckbox","isChecked","check","focus","createCheckbox","Checkbox","checked","uncheck",4,"FCheckboxes","checkboxes","_items","forEach","item","_item","_typeof","_checkbox","values","setValues","createCheckboxes","Checkboxes","Symbol","iterator","constructor","index","deselect","getValues","addValue","removeValue","indexOf","selectAll","deselectAll","./checkbox",5,"FComboBox","createOnSelectHandler","setValue","_textinput","regexp","_textInput","TextInput","placeholder","removeMenu","document","body","removeEventListener","parentNode","off","menu","opacity","setTimeout","_menu","Menu","menuHeight","menuMargin","cummOffsetTop","cumulativeOffset","upsideSpace","window","pageYOffset","downsideSpace","innerHeight","maxHeight","on","createComboBox","ComboBox","getValue","isValid","./menu","./text-input",6,"_classCallCheck","instance","Constructor","TypeError","createContextMenu","ContextMenu","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","_openHandler","open","_closeHandler","close","_isShowing","setTarget","_target","x","y","clientX","clientY","innerWidth","left",7,"_toConsumableArray","arr","Array","isArray","arr2","from","FElement","tagName","node","_cache","cloneNode","createElement","_createElement","wrapper","name","apply","concat","_insertionTranslation","before","element","insertBefore","firstChild","bottom","appendChild","after","nextSibling","isFlagrated","visible","display","exists","toggle","hide","show","removeChild","content","isElement","innerHTML","createTextNode","insertion","position","div","toLowerCase","reverse","to","readAttribute","getAttribute","k","removeAttribute","setAttribute","getDimensions","width","offsetWidth","height","offsetHeight","visibility","dimensions","offsetTop","offsetLeft","offsetParent","cumulativeScrollOffset","scrollTop","scrollLeft","documentElement","RegExp","trim","toggleClassName","m","toUpperCase","css","defaultView","getComputedStyle","parseFloat","p","listener","useCapture","_flagrateEvent","fevent","property","event","createEvent","initEvent","dispatchEvent","emit","extend","HTMLElement","object","nodeType","nodeName",8,"createForm","Form","_textArea","_comboBox","_checkboxes","_switch","_radios","_select","_opt","_fields","_nolabel","_vertical","_id","nolabel","vertical","_create","fields","pos","eventType","result","field","pointer","_dependsIsOk","jsonPointer","set","getVal","callback","fin","hasError","done","run","shift","validate","input","_createField","_i","_l","_collectFieldRefs","_checkFieldDepends","_requestRender","removes","splice","_i2","_l2","_i3","_l3","bulk","_renderTimer","clearTimeout","_render","active","activeElement","navigator","userAgent","isMustReselected","selectionStart","selectionEnd","range","collapse","_refs","j","fi","depends","point","d","v","getField","op","tester","val","get","getResult","_compareDepend","inputType","create","setVal","toStr","validators","inputValidator","_result","isRequired","toNumber","Date","getTime","transform","_inputOnChange","hasWarning","_hasError","_hasWarning","message","q","success","error","isNaN","min","max","minLength","maxLength","_checkRefs","refField","rerend","changeEvents","eventName","numeric","alphanumeric","maxlength","password","textarea","TextArea","number","inputmode","combobox","switch","Switch","isOn","switchOn","switchOff","radios","Radios","Select","listView","multiple","selectedIndex","selectedIndexes","file","accept","acceptTypes","join","files","./checkboxes","./combo-box","./radios","./select","./switch","./text-area",9,"createGrid","Grid","row","ret","cell","_toolbar","_contextMenu","_cols","_rows","_pagePosition","_selectedRows","_sortedByKey","_sortedByAsc","_head","_thead","_tr","_body","_tbody","_style","cols","rows","colMinWidth","pagination","numberOfRowsPerPage","fill","headless","disableSort","disableResize","multiSelect","disableCheckbox","disableSelect","onDeselect","onClick","onDblClick","onRender","onRendered","postProcessOfRow","_loop","isSelected","targetGrid","_this2","_loop2","map","isAsc","sort","b","A","B","cellA","cellB","sortAlt","_div","_th","isSorted","unshift","count","pop","fromIndex","_this3","col","align","textAlign","_resizeHandle","onmousedown","_createResizeHandleOnMousedownHandler","onclick","_createColOnClickHandler","_lastCol","_pager","Toolbar","Math","floor","onscroll","_createBodyOnScrollHandler","_createOnScrollHandler","_layoutUpdater","_this4","_layoutInterval","clearInterval","setInterval","_requestUpdateLayout","_this5","_layoutWidth","clientWidth","_layoutTimer","_updateLayoutOfCols","_updatePositionOfResizeHandles","isCheckable","pl","pages","rl","cl","ceil","_grid","_createRowOnClickHandler","ondblclick","_createRowOnDblClickHandler","_createRowOnCheckHandler","_td","_createCellOnClickHandler","_createCellOnDblClickHandler","cellProps","postProcess","_last","menuItems","_updateRowMenu","rowProps","getElementByKey","right","_createLastRowOnClickHandler","adj","surplus","_this6","fixed","minimized","minWidth","base","scrollWidth","_surplus","_this7","_this8","_this9","_this10","_this11","_this12","_this13","_this14","_this15","_this16","current","origin","onMove","delta","onUp","getSelectedRows","hiddenProp","tr","td","innerText","url","./context-menu","./toolbar",10,"FMenu","createMenu","_buttons","./buttons",11,"createModal","Modal","_close","__onKeydownHandler","_onKeydownHandler","sizing","disableCloseButton","disableCloseByMask","disableCloseByEsc","buttons","onBeforeClose","onClose","onShow","_container","_middle","_content","title","_title","subtitle","_subtitle","blur","getSelection","removeAllRanges","_closingTimer","_positioning","_positioningTimer","_createButtons","_createBase","_createModal","_obi","_modal","_closeButton","_header","_footer","hasChildNodes","console","warn","baseWidth","baseHeight","modalWidth","modalHeight","overflowX","overflowY","activated","keyCode","click","setButtons","setContent","setSizing","setElement","setHTML","setText","setTitle","setSubtitle",12,"createNotify","Notify","disableDesktopNotify","disableFocusDetection","hAlign","vAlign","hMargin","vMargin","spacing","timeout","_notifies","_init","hasFocus","_createDesktopNotify","isAlive","closeTimer","hPosition","vPosition","notify","notifyClose","closeNotify","_positioner","cursor","onTimeout","permission","location","protocol","requestPermission","onclose","tH","clientHeight","pX","pY",13,"createPopover","Popover","_updatePosition","tOffset","tScroll","tWidth","tHeight","round","_text","_html","_className","forceTarget","Event","setClassName","boolean",14,"FProgress","progress","_value","_max","_bar","_updateProgress","createProgress","Progress","targetProgress","getMax","setMax","percentage",15,"FPulldown","onOpen","pulldown","createPulldown","Pulldown","_open","targetPulldown",16,"FRadio","radio","targetRadio","createRadio","Radio",17,"FRadios","_radio","createRadios","./radio",18,"FSearchBox","suggester","onSearch","searchBox","search","_suggest","_onKeyupHandler","_onFocusHandler","_onBlurHandler","createSearchBox","SearchBox","_createCompletionHandler","_createSuggestionHandler","suggest","_suggested","suggestedItems","getElementsByClassName","getElementsByTagName","_lastValue",19,"FSelect","createOnDeselectHandler","isPulldown","_pulldown","createSelect","./grid","./pulldown",20,"FSlider","slider","tabIndex","ontouchstart","_onTouchStartHandler","pointerEnabled","_onPointerDownHandler","msPointerEnabled","createSlider","Slider","_progress","_slide","touches","pageX","offsetX","unitWidth","targetSlider","./progress",21,"FSwitch","sw","toggleSwitch","createSwitch","flagrateSwitchStatus","targetSwitch",22,"FTab","tab","_tabs","tabs","_bodyless","bodyless","_selectedIndex","createTab","Tab","tabItem","tabEvent","targetTab","targetTabItem","removeTab","_createOnSelectHandler",23,"FTextArea","textArea","createTextArea",24,"FTextInput","createTextInput",25,"FTokenizer","tokenize","tokenizeSync","identity","tokenizer","_tokens","_updateTokens","_onClickHandler","createTokenizer","Tokenizer","_createMenuOnSelectHandler","candidate","removeValues","vw","pr","tw","tm","im","ip","aw","_tokenize","_candidates","str","_tokenized","_lastTokenizedValue","candidates","menuItem",26,"FToolbar","createToolbar","isBorder","getElements",27,"createTutorial","Tutorial","_popover","onFinish","onAbort","_steps","_index","steps","_inStep","_main","_afterStep","step","onBeforeStep","_step","finish","next","prev","abort","querySelector","buttonContainer","onStep","pp","onAfterStep","./modal","./popover",28,"dest","source","pts","validate_input","traverse","untilde","isSet","part","split",29,"Flagrate","util","textInput","_tokenizer","comboBox","contextMenu","toolbar","_searchBox","_slider","_tab","popover","_tutorial","tutorial","_notify","modal","grid","_form","form","flagrate","./flagrate/button","./flagrate/buttons","./flagrate/checkbox","./flagrate/checkboxes","./flagrate/combo-box","./flagrate/context-menu","./flagrate/element","./flagrate/form","./flagrate/grid","./flagrate/menu","./flagrate/modal","./flagrate/notify","./flagrate/popover","./flagrate/progress","./flagrate/pulldown","./flagrate/radio","./flagrate/radios","./flagrate/search-box","./flagrate/select","./flagrate/slider","./flagrate/switch","./flagrate/tab","./flagrate/text-area","./flagrate/text-input","./flagrate/tokenizer","./flagrate/toolbar","./flagrate/tutorial","./flagrate/util"],"mappings":"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","file":"flagrate.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Button = undefined;\nexports.createButton = createButton;\n\nvar _util = require(\"./util\");\n\nvar _element = require(\"./element\");\n\n/*?\n    flagrate.createButton(option)\n    new flagrate.Button(option)\n    - option (Object) - options.\n\n    Button.\n\n    #### option\n\n    * `id`                       (String): `id` attribute of `button` element.\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `style`                    (Object): (using flagrate.Element.setStyle)\n    * `color`                    (String): (using flagrate.Button#setColor)\n    * `label`                    (String; default `\"\"`):\n    * `icon`                     (String):\n    * `isFocused`                (Boolean; default `false`):\n    * `isDisabled`               (Boolean; default `false`):\n    * `isRemovableByUser`        (Boolean; default `false`):\n    * `onSelect`                 (Function):\n    * `onRemove`                 (Function):\n**/\nfunction FButton() {\n    var option = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    option.isRemovableByUser = option.isRemovableByUser || false;\n    this.onSelect = option.onSelect || _util.emptyFunction;\n    this.onRemove = option.onRemove || _util.emptyFunction;\n    var attr = option.attribute || {};\n    if (option.id) {\n        attr[\"id\"] = option.id;\n    }\n    if (option.isFocused) {\n        attr[\"autofocus\"] = true;\n    }\n    if (!attr[\"type\"]) {\n        attr[\"type\"] = \"button\";\n    }\n    // create a button element\n    var button = new _element.Element(\"button\", attr);\n    (0, _util.extendObject)(button, this);\n    button.labelElement = new _element.Element(\"span\").insertTo(button);\n    if (option.label) {\n        button.labelElement.insertText(option.label);\n    } else if (option.labelHTML) {\n        button.labelElement.insert(option.labelHTML);\n    }\n    button.addClassName(\"flagrate flagrate-button\");\n    if (option.className) {\n        button.addClassName(option.className);\n    }\n    button.addEventListener(\"click\", button._onSelectHandler.bind(button), true);\n    if (option.isRemovableByUser) {\n        button.addClassName(\"flagrate-button-removable\");\n        button._removeButton = new _element.Element(\"button\", {\n            type: \"button\",\n            class: \"flagrate-button-remove\"\n        }).insertTo(button);\n        button._removeButton.addEventListener(\"click\", button._onRemoveHandler.bind(button), true);\n    }\n    if (option.style) {\n        button.setStyle(option.style);\n    }\n    if (option.color) {\n        button.setColor(option.color);\n    }\n    if (option.icon) {\n        button.setIcon(option.icon);\n    }\n    if (option.isDisabled) {\n        button.disable();\n    }\n    return button;\n}\nvar Button = exports.Button = FButton;\nfunction createButton(option) {\n    return new Button(option);\n}\nButton.prototype = {\n    select: function select() {\n        return this._onSelectHandler(null);\n    },\n    disable: function disable() {\n        this.addClassName(\"flagrate-disabled\");\n        this.writeAttribute(\"disabled\", true);\n        return this;\n    },\n    enable: function enable() {\n        this.removeClassName(\"flagrate-disabled\");\n        this.writeAttribute(\"disabled\", false);\n        return this;\n    },\n    isEnabled: function isEnabled() {\n        return !this.hasClassName(\"flagrate-disabled\");\n    },\n    setLabel: function setLabel(text) {\n        this.labelElement.updateText(text);\n        return this;\n    },\n    setLabelHTML: function setLabelHTML(html) {\n        this.labelElement.update(html);\n        return this;\n    },\n    setColor: function setColor(color) {\n        var button = this;\n        if (color.charAt(0) === \"@\") {\n            button.style.backgroundColor = \"\";\n            button.style.color = \"\";\n            button.addClassName(\"flagrate-button-color-\" + color.slice(1));\n        } else {\n            button.style.backgroundColor = color;\n            if (/^#[0-9a-f]{6}$/i.test(color) === true) {\n                var c = parseInt(color.slice(1), 16);\n                if (((c >> 16) + (c >> 8 & 0xff) + (c & 0xff)) / 3 > 150) {\n                    button.style.color = \"black\";\n                } else {\n                    button.style.color = \"white\";\n                }\n            } else {\n                button.style.color = \"\";\n            }\n        }\n        button._color = color;\n        return button;\n    },\n    getColor: function getColor() {\n        return this._color || \"\";\n    },\n    setIcon: function setIcon(identifier) {\n        var button = this;\n        button._iconIdentifier = identifier;\n        if (identifier) {\n            return button.addClassName(\"flagrate-icon\").setStyle({\n                backgroundImage: \"url(\" + identifier + \")\"\n            });\n        } else {\n            return button.removeClassName(\"flagrate-icon\").setStyle({\n                backgroundImage: \"none\"\n            });\n        }\n    },\n    getIcon: function getIcon() {\n        return this._iconIdentifier || \"\";\n    },\n    _onSelectHandler: function _onSelectHandler(e) {\n        var button = this;\n        if (button.isEnabled() === false) {\n            return;\n        }\n        // for Firefox <- until when..?\n        if (button._removeButton && e && e.layerX) {\n            var bw = button.getWidth();\n            var bh = button.getHeight();\n            var bp = button._removeButton.getStyle(\"margin-right\") === null ? 0 : parseInt(button._removeButton.getStyle(\"margin-right\").replace(\"px\", \"\"), 10);\n            var rw = button._removeButton.getWidth();\n            var rh = button._removeButton.getHeight();\n            var lx = e.layerX;\n            var ly = e.layerY;\n            var isHitRemoveButton = lx > bw - bp - rw && lx < bw - bp && ly > bh - (bh - rh) / 2 - rh && ly < bh - (bh - rh) / 2;\n            if (isHitRemoveButton) {\n                button._onRemoveHandler(e);\n                return button;\n            }\n        }\n        var _e = e;\n        _e.targetButton = button;\n        button.onSelect(_e, button);\n        button.fire(\"select\", { targetButton: button });\n    },\n    _onRemoveHandler: function _onRemoveHandler(e) {\n        var button = this;\n        if (button.isEnabled() === true) {\n            button.remove();\n            var _e = e;\n            _e.targetButton = button;\n            button.onRemove(_e, button);\n            button.fire(\"remove\", { targetButton: button });\n        }\n    }\n};\n\n\n\n},{\"./element\":7,\"./util\":28}],2:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Buttons = undefined;\nexports.createButtons = createButtons;\n\nvar _util = require(\"./util\");\n\nvar _element = require(\"./element\");\n\nvar _button = require(\"./button\");\n\nvar button = _interopRequireWildcard(_button);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n/*?\n    flagrate.createButtons(option)\n    new flagrate.Buttons(option)\n    - option (Object) - options.\n\n    Button group.\n\n    #### option\n\n    * `id`                       (String): `id` attribute of container element.\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `items`                    (Array): of item\n    * `onSelect`                 (Function):\n\n    #### item\n\n    * `key`                      (String):\n    * `label`                    (String; default `\"\"`):\n    * `icon`                     (String):\n    * `color`                    (String):\n    * `isDisabled`               (Boolean; default `false`):\n    * `onSelect`                 (Function):\n**/\nfunction FButtons() {\n    var option = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    option.items = option.items || [];\n    this.onSelect = option.onSelect || _util.emptyFunction;\n    var attr = option.attribute || {};\n    if (option.id) {\n        attr[\"id\"] = option.id;\n    }\n    // create a container\n    var container = new _element.Element(\"div\", attr);\n    (0, _util.extendObject)(container, this);\n    container.addClassName(\"flagrate flagrate-buttons\");\n    if (option.className) {\n        container.addClassName(option.className);\n    }\n    if (option.style) {\n        container.setStyle(option.style);\n    }\n    for (var i = 0, l = option.items.length; i < l; i++) {\n        container.push(option.items[i]);\n    }\n    container.addEventListener(\"click\", function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n    });\n    return container;\n}\nvar Buttons = exports.Buttons = FButtons;\nfunction createButtons(option) {\n    return new Buttons(option);\n}\nButtons.prototype = {\n    push: function push(option) {\n        var _this = this;\n\n        var _onSelect = option.onSelect;\n        option.onSelect = function (e, button) {\n            if (_onSelect) {\n                _onSelect.call(button, e, button);\n            }\n            _this.onSelect(e, _this);\n        };\n        var btn = new button.Button(option).insertTo(this);\n        if (option.key) {\n            btn.dataset[\"_key\"] = option.key;\n        }\n        return this;\n    },\n    getButtonByKey: function getButtonByKey(key) {\n        var elements = this.childNodes;\n        for (var i = 0, l = elements.length; i < l; i++) {\n            if (elements[i].dataset[\"_key\"] === key) {\n                return elements[i];\n            }\n        }\n        return null;\n    },\n    getButtons: function getButtons() {\n        return this.childNodes || [];\n    }\n};\n\n\n\n},{\"./button\":1,\"./element\":7,\"./util\":28}],3:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Checkbox = undefined;\nexports.createCheckbox = createCheckbox;\n\nvar _util = require(\"./util\");\n\nvar _element = require(\"./element\");\n\nvar idCounter = 0;\n/*?\n    flagrate.createCheckbox(option)\n    new flagrate.Checkbox(option)\n    - option (Object) - options.\n**/\nfunction FCheckbox() {\n    var opt = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    var id = \"flagrate-checkbox-\" + (++idCounter).toString(10);\n    var attr = opt.attribute || {};\n    attr[\"id\"] = opt.id || null;\n    attr[\"class\"] = opt.className || null;\n    //create\n    var checkbox = new _element.Element(\"label\", attr);\n    checkbox.writeAttribute(\"for\", id);\n    (0, _util.extendObject)(checkbox, this);\n    if (opt.label) {\n        checkbox.insertText(opt.label);\n    } else if (opt.labelHTML) {\n        checkbox.insert(opt.labelHTML);\n    }\n    checkbox.addClassName(\"flagrate flagrate-checkbox\");\n    if (opt.icon) {\n        checkbox.addClassName(\"flagrate-icon\");\n        checkbox.setStyle({\n            backgroundImage: \"url(\" + opt.icon + \")\"\n        });\n    }\n    checkbox.onChange = opt.onChange || null;\n    checkbox.onCheck = opt.onCheck || null;\n    checkbox.onUncheck = opt.onUncheck || null;\n    checkbox._input = new _element.Element(\"input\", { id: id, type: \"checkbox\" });\n    checkbox.insert({ top: new _element.Element() });\n    checkbox.insert({ top: checkbox._input });\n    checkbox._input.addEventListener(\"change\", function (e) {\n        e.stopPropagation();\n        var _e = e;\n        _e.targetCheckbox = checkbox;\n        if (checkbox.isChecked() === true) {\n            if (checkbox.onCheck) {\n                checkbox.onCheck(_e, checkbox);\n            }\n            checkbox.fire(\"check\", { targetCheckbox: checkbox });\n        } else {\n            if (checkbox.onUncheck) {\n                checkbox.onUncheck(_e, checkbox);\n            }\n            checkbox.fire(\"uncheck\", { targetCheckbox: checkbox });\n        }\n        if (checkbox.onChange) {\n            checkbox.onChange(_e, checkbox);\n        }\n        checkbox.fire(\"change\", { targetCheckbox: checkbox });\n    });\n    if (opt.isChecked === true) {\n        checkbox.check();\n    }\n    if (opt.isFocused === true) {\n        checkbox.focus();\n    }\n    if (opt.isDisabled === true) {\n        checkbox.disable();\n    }\n    return checkbox;\n}\nvar Checkbox = exports.Checkbox = FCheckbox;\nfunction createCheckbox(option) {\n    return new Checkbox(option);\n}\nCheckbox.prototype = {\n    disable: function disable() {\n        this.addClassName(\"flagrate-disabled\");\n        this._input.writeAttribute(\"disabled\", true);\n        return this;\n    },\n    enable: function enable() {\n        this.removeClassName(\"flagrate-disabled\");\n        this._input.writeAttribute(\"disabled\", false);\n        return this;\n    },\n    isEnabled: function isEnabled() {\n        return !this.hasClassName(\"flagrate-disabled\");\n    },\n    isChecked: function isChecked() {\n        return !!this._input.checked;\n    },\n    check: function check() {\n        this._input.checked = true;\n        return this;\n    },\n    uncheck: function uncheck() {\n        this._input.checked = false;\n        return this;\n    }\n};\n\n\n\n},{\"./element\":7,\"./util\":28}],4:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Checkboxes = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nexports.createCheckboxes = createCheckboxes;\n\nvar _util = require(\"./util\");\n\nvar _element = require(\"./element\");\n\nvar _checkbox = require(\"./checkbox\");\n\n/*?\n    flagrate.createCheckboxes(option)\n    new flagrate.Checkboxes(option)\n    - option (Object) - options.\n**/\nfunction FCheckboxes() {\n    var opt = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    var attr = opt.attribute || {};\n    if (opt.id) {\n        attr[\"id\"] = opt.id;\n    }\n    //create\n    var checkboxes = new _element.Element(\"div\", attr);\n    (0, _util.extendObject)(checkboxes, this);\n    checkboxes.addClassName(\"flagrate flagrate-checkboxes\");\n    if (opt.className) {\n        checkboxes.addClassName(opt.className);\n    }\n    if (opt.style) {\n        checkboxes.setStyle(opt.style);\n    }\n    checkboxes.onChange = opt.onChange;\n    checkboxes._items = [];\n    (opt.items || []).forEach(function (item) {\n        var _item = {};\n        if ((typeof item === \"undefined\" ? \"undefined\" : _typeof(item)) === \"object\") {\n            (0, _util.extendObject)(_item, item);\n        } else {\n            _item.label = typeof item === \"string\" ? item : item.toString();\n            _item.value = item;\n        }\n        _item._checkbox = new _checkbox.Checkbox(_item).insertTo(checkboxes);\n        _item._checkbox.addEventListener(\"change\", function (e) {\n            if (checkboxes.onChange) {\n                checkboxes.onChange(e, checkboxes);\n            }\n        });\n        checkboxes._items.push(_item);\n    });\n    if (opt.isDisabled) {\n        checkboxes.disable();\n    }\n    if (opt.values) {\n        checkboxes.setValues(opt.values);\n    }\n    return checkboxes;\n}\nvar Checkboxes = exports.Checkboxes = FCheckboxes;\nfunction createCheckboxes(option) {\n    return new Checkboxes(option);\n}\nCheckboxes.prototype = {\n    select: function select(index) {\n        if (this._items[index]) {\n            this._items[index]._checkbox.check();\n        }\n        return this;\n    },\n    deselect: function deselect(index) {\n        if (this._items[index]) {\n            this._items[index]._checkbox.uncheck();\n        }\n        return this;\n    },\n    getValues: function getValues() {\n        var values = [];\n        for (var i = 0, l = this._items.length; i < l; i++) {\n            if (this._items[i]._checkbox.isChecked() === true) {\n                values.push(this._items[i].value);\n            }\n        }\n        return values;\n    },\n    addValue: function addValue(value) {\n        for (var i = 0, l = this._items.length; i < l; i++) {\n            if (this._items[i].value === value) {\n                this.select(i);\n                break;\n            }\n        }\n        return this;\n    },\n    removeValue: function removeValue(value) {\n        for (var i = 0, l = this._items.length; i < l; i++) {\n            if (this._items[i].value === value) {\n                this.deselect(i);\n                break;\n            }\n        }\n        return this;\n    },\n    setValues: function setValues(values) {\n        for (var i = 0, l = this._items.length; i < l; i++) {\n            if (values.indexOf(this._items[i].value) === -1) {\n                this.deselect(i);\n            } else {\n                this.select(i);\n            }\n        }\n        return this;\n    },\n    selectAll: function selectAll() {\n        for (var i = 0, l = this._items.length; i < l; i++) {\n            this.select(i);\n        }\n        return this;\n    },\n    deselectAll: function deselectAll() {\n        return this.setValues([]);\n    },\n    enable: function enable() {\n        for (var i = 0, l = this._items.length; i < l; i++) {\n            this._items[i]._checkbox.enable();\n        }\n        this.removeClassName(\"flagrate-disabled\");\n        return this;\n    },\n    disable: function disable() {\n        for (var i = 0, l = this._items.length; i < l; i++) {\n            this._items[i]._checkbox.disable();\n        }\n        this.addClassName(\"flagrate-disabled\");\n        return this;\n    },\n    isEnabled: function isEnabled() {\n        return !this.hasClassName(\"flagrate-disabled\");\n    }\n};\n\n\n\n},{\"./checkbox\":3,\"./element\":7,\"./util\":28}],5:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.ComboBox = undefined;\nexports.createComboBox = createComboBox;\n\nvar _util = require(\"./util\");\n\nvar _element = require(\"./element\");\n\nvar _button = require(\"./button\");\n\nvar _menu = require(\"./menu\");\n\nvar _textInput = require(\"./text-input\");\n\n/*?\n    flagrate.createComboBox(option)\n    new flagrate.ComboBox(option)\n    - option (Object) - options.\n\n    Select.\n\n    #### option\n\n    * `id`                       (String): `id` attribute of container element.\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `style`                    (Object): (using flagrate.Element.setStyle)\n    * `value`                    (String): default value.\n    * `items`                    (Array): of String values.\n    * `placeholder`              (String):\n    * `icon`                     (String):\n    * `regexp`                   (RegExp):\n    * `isDisabled`               (Boolean; default `false`):\n**/\nfunction FComboBox() {\n    var option = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    this.items = option.items || [];\n    this.regexp = option.regexp || null;\n    var attr = option.attribute || {};\n    if (option.id) {\n        attr[\"id\"] = option.id;\n    }\n    //create\n    var container = new _element.Element(\"div\", attr);\n    container._textinput = new _textInput.TextInput({\n        value: option.value,\n        placeholder: option.placeholder,\n        icon: option.icon\n    }).insertTo(container);\n    function createOnSelectHandler(value) {\n        return function () {\n            container.setValue(value);\n            container._textinput.focus();\n            container.fire(\"change\");\n        };\n    }\n    container._button = new _button.Button({\n        onSelect: function onSelect() {\n            if (container._menu) {\n                container._menu.remove();\n                delete container._menu;\n                return;\n            }\n            var items = [];\n            for (var i = 0, l = container.items.length; i < l; i++) {\n                items.push({\n                    label: container.items[i],\n                    onSelect: createOnSelectHandler(container.items[i])\n                });\n            }\n            var menu = container._menu = new _menu.Menu({\n                className: \"flagrate-combobox-menu\",\n                items: items,\n                onSelect: function onSelect() {\n                    menu.remove();\n                    delete container._menu;\n                }\n            }).insertTo(container);\n            // To prevent overflow.\n            var menuHeight = menu.getHeight();\n            var menuMargin = parseInt(menu.getStyle(\"margin-top\").replace(\"px\", \"\"), 10);\n            var cummOffsetTop = container.cumulativeOffset().top;\n            var upsideSpace = -window.pageYOffset + cummOffsetTop;\n            var downsideSpace = window.pageYOffset + window.innerHeight - cummOffsetTop - container.getHeight();\n            if (menuHeight + menuMargin > downsideSpace) {\n                if (upsideSpace > downsideSpace) {\n                    if (upsideSpace < menuHeight + menuMargin) {\n                        menuHeight = upsideSpace - menuMargin - menuMargin;\n                        menu.style.maxHeight = menuHeight + \"px\";\n                    }\n                    menu.addClassName(\"flagrate-combobox-menu-upper\");\n                } else {\n                    menuHeight = downsideSpace - menuMargin - menuMargin;\n                    menu.style.maxHeight = menuHeight + \"px\";\n                }\n            }\n            function removeMenu(e) {\n                document.body.removeEventListener(\"click\", removeMenu);\n                container.parentNode.removeEventListener(\"click\", removeMenu);\n                container.off(\"click\", removeMenu);\n                menu.style.opacity = \"0\";\n                setTimeout(function () {\n                    return menu.remove();\n                }, 500);\n                delete container._menu;\n            }\n            setTimeout(function () {\n                document.body.addEventListener(\"click\", removeMenu);\n                container.parentNode.addEventListener(\"click\", removeMenu);\n                container.on(\"click\", removeMenu);\n            }, 0);\n        }\n    }).insertTo(container);\n    (0, _util.extendObject)(container, this);\n    container.addClassName(\"flagrate flagrate-combobox\");\n    if (option.className) {\n        container.addClassName(option.className);\n    }\n    if (option.style) {\n        container.setStyle(option.style);\n    }\n    if (option.isDisabled) {\n        container.disable();\n    }\n    return container;\n}\nvar ComboBox = exports.ComboBox = FComboBox;\nfunction createComboBox(option) {\n    return new ComboBox(option);\n}\nComboBox.prototype = {\n    disable: function disable() {\n        this.addClassName(\"flagrate-disabled\");\n        this._textinput.disable();\n        this._button.disable();\n        return this;\n    },\n    enable: function enable() {\n        this.removeClassName(\"flagrate-disabled\");\n        this._textinput.enable();\n        this._button.enable();\n        return this;\n    },\n    isEnabled: function isEnabled() {\n        return !this.hasClassName(\"flagrate-disabled\");\n    },\n    getValue: function getValue() {\n        return this._textinput.value;\n    },\n    setValue: function setValue(value) {\n        this._textinput.value = value;\n        return this;\n    },\n    setIcon: function setIcon(identifier) {\n        this._textinput.setIcon(identifier);\n        return this;\n    },\n    getIcon: function getIcon() {\n        return this._textinput.getIcon();\n    },\n    isValid: function isValid() {\n        return this.regexp.test(this.getValue());\n    }\n};\n\n\n\n},{\"./button\":1,\"./element\":7,\"./menu\":10,\"./text-input\":24,\"./util\":28}],6:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.ContextMenu = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.createContextMenu = createContextMenu;\n\nvar _menu = require(\"./menu\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*?\n    flagrate.createContextMenu(option)\n    new flagrate.ContextMenu(option)\n    - option (Object) - options.\n\n    ContextMenu.\n\n    #### option\n\n    * `target`                   (Element):\n    * `items`                    (Array): of item (see: flagrate.Menu)\n**/\n\nvar ContextMenu = exports.ContextMenu = function () {\n    function ContextMenu() {\n        var option = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n        _classCallCheck(this, ContextMenu);\n\n        this._openHandler = this.open.bind(this);\n        this._closeHandler = this.close.bind(this);\n        this.items = option.items || [];\n        this._isShowing = false;\n        this.setTarget(option.target || document.body);\n    }\n\n    _createClass(ContextMenu, [{\n        key: \"setTarget\",\n        value: function setTarget(target) {\n            if (this._target) {\n                this._target.removeEventListener(\"contextmenu\", this._openHandler);\n            }\n            target.addEventListener(\"contextmenu\", this._openHandler);\n            this._target = target;\n            return this;\n        }\n    }, {\n        key: \"open\",\n        value: function open(e) {\n            if (e && e.preventDefault) {\n                e.preventDefault();\n            }\n            if (this._isShowing === true) {\n                this.close();\n            }\n            this._isShowing = true;\n            this._menu = new _menu.Menu({\n                className: \"flagrate-context-menu\",\n                items: this.items,\n                onSelect: this._closeHandler\n            });\n            var x = 0;\n            var y = 0;\n            if (e && e.clientX && e.clientY) {\n                x = e.clientX;\n                y = e.clientY;\n            }\n            this._menu.style.opacity = \"0\";\n            this._menu.insertTo(document.body);\n            if (x + this._menu.getWidth() > window.innerWidth) {\n                x = x - this._menu.getWidth() + 1;\n            }\n            if (y + this._menu.getHeight() > window.innerHeight) {\n                y = y - this._menu.getHeight() + 1;\n            }\n            this._menu.style.top = y + \"px\";\n            this._menu.style.left = x + \"px\";\n            this._menu.style.opacity = \"1\";\n            document.body.addEventListener(\"click\", this._closeHandler);\n            document.body.addEventListener(\"mouseup\", this._closeHandler);\n            document.body.addEventListener(\"mousewheel\", this._closeHandler);\n            return this;\n        }\n    }, {\n        key: \"close\",\n        value: function close() {\n            document.body.removeEventListener(\"click\", this._closeHandler);\n            document.body.removeEventListener(\"mouseup\", this._closeHandler);\n            document.body.removeEventListener(\"mousewheel\", this._closeHandler);\n            this._isShowing = false;\n            var menu = this._menu;\n            setTimeout(function () {\n                if (menu && menu.remove) {\n                    menu.remove();\n                }\n            }, 0);\n            delete this._menu;\n            return this;\n        }\n        /** Tells whether the visibility. */\n\n    }, {\n        key: \"visible\",\n        value: function visible() {\n            return this._isShowing;\n        }\n        /** remove the elements and listeners. */\n\n    }, {\n        key: \"remove\",\n        value: function remove() {\n            if (this._menu) {\n                this.close();\n            }\n            if (this._target) {\n                this._target.removeEventListener(\"contextmenu\", this._openHandler);\n            }\n        }\n    }]);\n\n    return ContextMenu;\n}();\n\nfunction createContextMenu(option) {\n    return new ContextMenu(option);\n}\n\n\n\n},{\"./menu\":10}],7:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.createElement = exports.Element = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _util = require(\"./util\");\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar _cache = {};\nvar _insertionTranslation = {\n    before: function before(element, node) {\n        element.parentNode.insertBefore(node, element);\n    },\n    top: function top(element, node) {\n        element.insertBefore(node, element.firstChild);\n    },\n    bottom: function bottom(element, node) {\n        element.appendChild(node);\n    },\n    after: function after(element, node) {\n        element.parentNode.insertBefore(node, element.nextSibling);\n    }\n};\n/*?\n    flagrate.createElement([tagName = \"div\", attribute])\n    new flagrate.Element([tagName = \"div\", attribute])\n    - tagName (String) - The name of the HTML element to create.\n    - attribute (Attribute) - An optional group of attribute/value pairs to set on the element.\n\n    Creates an HTML element with `tagName` as the tag name, optionally with the given attributes.\n\n    #### Example\n\n        // The old way:\n        var a = document.createElement(\"a\");\n        a.setAttribute(\"class\", \"foo\");\n        a.setAttribute(\"href\", \"/foo.html\");\n        a.appendChild(document.createTextNode(\"Next page\"));\n        x.appendChild(a);\n\n        // The new way:\n        var a = flagrate.createElement(\"a\", { \"class\": \"foo\", href: \"/foo.html\" })\n                        .insertText(\"Next page\")\n                        .insertTo(x);\n**/\nfunction FElement() {\n    var tagName = arguments.length <= 0 || arguments[0] === undefined ? \"div\" : arguments[0];\n    var attribute = arguments[1];\n\n    var node = void 0;\n    if (_cache[tagName]) {\n        node = _cache[tagName].cloneNode(false);\n    } else if (attribute && attribute.hasOwnProperty(\"type\") || tagName === \"select\") {\n        node = document.createElement(tagName);\n    } else {\n        node = document.createElement(tagName);\n        _cache[tagName] = node.cloneNode(false);\n    }\n    (0, _util.extendObject)(node, this);\n    return attribute ? node.writeAttribute(attribute) : node;\n}\nvar Element = exports.Element = FElement;\nfunction _createElement(tagName, attribute) {\n    return new Element(tagName, attribute);\n}\nvar createElement = exports.createElement = _createElement;\nElement.prototype = {\n    isFlagrated: true\n};\n/*?\n    flagrate.Element.visible(element) -> Boolean\n    - element (Element) - instance of Element.\n\n    Tells whether `element` is visible\n\n    This method is similar to http://api.prototypejs.org/dom/Element/visible/\n**/\nElement.visible = function (element) {\n    return element.style.display !== \"none\";\n};\n/*?\n    flagrate.Element.exists(element) -> Boolean\n    - element (Element) - instance of Element.\n\n    Tells whether `element` is exists on document.\n**/\nElement.exists = function (element) {\n    if (element.parentNode) {\n        while ((element = element.parentNode) !== null) {\n            if (element === document) {\n                return true;\n            }\n        }\n    }\n    return false;\n};\n/*?\n    flagrate.Element.toggle(element) -> Element\n    - element (Element) - instance of Element.\n\n    Toggles the visibility of `element`. Returns `element`.\n\n    This method is similar to http://api.prototypejs.org/dom/Element/toggle/\n**/\nElement.toggle = function (element) {\n    return Element[Element.visible(element) ? \"hide\" : \"show\"](element);\n};\n/*?\n    flagrate.Element.hide(element) -> Element\n    - element (Element) - instance of Element.\n\n    Sets `display: none` on `element`. Returns `element`.\n\n    This method is similar to http://api.prototypejs.org/dom/Element/hide/\n**/\nElement.hide = function (element) {\n    element.style.display = \"none\";\n    return element;\n};\n/*?\n    flagrate.Element.show(element) -> Element\n    - element (Element) - instance of Element.\n\n    Removes `display: none` on `element`. Returns `element`.\n\n    This method is similar to http://api.prototypejs.org/dom/Element/show/\n**/\nElement.show = function (element) {\n    element.style.display = \"\";\n    return element;\n};\n/*?\n    flagrate.Element.remove(element) -> void\n    - element (Element) - instance of Element.\n\n    Completely removes `element` from the document and returns it.\n\n    This method is similar to http://api.prototypejs.org/dom/Element/remove/\n**/\nElement.remove = function (element) {\n    if (element.parentNode) {\n        element.parentNode.removeChild(element);\n    }\n    return;\n};\n/*?\n    flagrate.Element.update(element[, newContent]) -> Element\n    - element (Element) - instance of Element.\n    - newContent (String|Number|Element) - new content.\n\n    Replaces _the content_ of `element` with the `newContent` argument and\n    returns `element`.\n\n    This method is similar to http://api.prototypejs.org/dom/Element/update/\n**/\nElement.update = function (element, content) {\n    var i = element.childNodes.length;\n    while (i--) {\n        Element.remove(element.childNodes[i]);\n    }\n    if (!content) {\n        return element;\n    }\n    if (Element.isElement(content) === true) {\n        element.appendChild(content);\n        return element;\n    }\n    if (typeof content !== \"string\") {\n        content = content.toString(10);\n    }\n    element.innerHTML = content;\n    return element;\n};\n/*?\n    flagrate.Element.updateText(element[, newContent]) -> Element\n    - element (Element) - instance of Element.\n    - newContent (String|Number) - new text content.\n**/\nElement.updateText = function (element, content) {\n    var i = element.childNodes.length;\n    while (i--) {\n        Element.remove(element.childNodes[i]);\n    }\n    if (content === undefined) {\n        return element;\n    }\n    if (Element.isElement(content) === true && content.toString !== void 0) {\n        return Element.updateText(element, content.toString());\n    }\n    if (typeof content !== \"string\") {\n        content = content.toString(10);\n    }\n    element.appendChild(document.createTextNode(content));\n    return element;\n};\n/*?\n    flagrate.Element.insert(element, content) -> Element\n    - element (Element) - instance of Element.\n    - content (String|Number|Element|Object) - The content to insert\n\n    Inserts content `above`, `below`, at the `top`, and/or at the `bottom` of\n    the given element, depending on the option(s) given.\n\n    This method is similar to http://api.prototypejs.org/dom/Element/insert/\n**/\nElement.insert = function (element, insertion) {\n    if (typeof insertion === \"string\" || typeof insertion === \"number\" || Element.isElement(insertion) === true) {\n        insertion = { bottom: insertion };\n    }\n    var position = void 0,\n        content = void 0,\n        insert = void 0,\n        div = void 0;\n    for (position in insertion) {\n        if (insertion.hasOwnProperty(position)) {\n            content = insertion[position];\n            position = position.toLowerCase();\n            insert = _insertionTranslation[position];\n            if (Element.isElement(content) === true) {\n                insert(element, content);\n                continue;\n            }\n            if (typeof content !== \"string\") {\n                content = content.toString(10);\n            }\n            div = new Element();\n            div.innerHTML = content;\n            if (position === \"top\" || position === \"after\") {\n                [].concat(_toConsumableArray(div.childNodes)).reverse();\n            }\n            while (div.childNodes.length !== 0) {\n                insert(element, div.childNodes[0]);\n            }\n        }\n    }\n    return element;\n};\n/*?\n    flagrate.Element.insertText(element, content) -> Element\n    - element (Element) - instance of Element.\n    - content (String|Number|Object) - The content to insert\n\n    Inserts content `above`, `below`, at the `top`, and/or at the `bottom` of\n    the given element, depending on the option(s) given.\n**/\nElement.insertText = function (element, insertion) {\n    if (typeof insertion === \"string\" || typeof insertion === \"number\") {\n        insertion = { bottom: insertion };\n    }\n    var position = void 0,\n        content = void 0,\n        insert = void 0;\n    for (position in insertion) {\n        if (insertion.hasOwnProperty(position)) {\n            content = insertion[position];\n            position = position.toLowerCase();\n            insert = _insertionTranslation[position];\n            if (typeof content !== \"string\") {\n                content = content.toString(10);\n            }\n            insert(element, document.createTextNode(content));\n        }\n    }\n    return element;\n};\n/*?\n    flagrate.Element.insertTo(element, to[, position = \"bottom\"]) -> Element\n    - element (Element) - insert this.\n    - to (Element) - insert to this element.\n    - position (String) - `before` or `top` or `bottom` or `after`.\n**/\nElement.insertTo = function (element, to) {\n    var position = arguments.length <= 2 || arguments[2] === undefined ? \"bottom\" : arguments[2];\n\n    var insertion = {};\n    if (position) {\n        insertion[position] = element;\n    } else {\n        insertion[\"bottom\"] = element;\n    }\n    Element.insert(to, insertion);\n    return element;\n};\n/*?\n    flagrate.Element.readAttribute(element, attributeName) -> String | null\n    - element (Element) - instance of Element.\n    - attributeName (String) - attribute name.\n\n    Returns the value of `element`'s `attribute` or `null` if `attribute` has\n    not been specified.\n\n    This method is similar to http://api.prototypejs.org/dom/Element/readAttribute/\n**/\nElement.readAttribute = function (element, name) {\n    // ref: https://github.com/sstephenson/prototype/blob/1fb9728/src/dom/dom.js#L1856\n    return element.getAttribute(name);\n};\n/*?\n    flagrate.Element.writeAttribute(element, attribute[, value = true]) -> Element\n    - element (Element) - instance of Element.\n    - attribute (String|Object) - attribute name or name/value pairs object.\n    - value (Boolean|String) - value of attribute.\n\n    Adds, specifies or removes attributes passed as either a hash or a name/value pair.\n\n    This method is similar to http://api.prototypejs.org/dom/Element/writeAttribute/\n**/\nElement.writeAttribute = function (element, name, value) {\n    var attr = void 0;\n    if ((typeof name === \"undefined\" ? \"undefined\" : _typeof(name)) === \"object\") {\n        attr = name;\n    } else {\n        attr = {};\n        attr[name] = value === undefined ? true : value;\n    }\n    var k = void 0;\n    for (k in attr) {\n        if (attr.hasOwnProperty(k) === true) {\n            value = attr[k];\n            if (value === false || value === null) {\n                element.removeAttribute(k);\n            } else if (value === true) {\n                element.setAttribute(k, k);\n            } else if (value !== undefined) {\n                element.setAttribute(k, value);\n            }\n        }\n    }\n    return element;\n};\n/*?\n    flagrate.Element.getDimensions(element) -> Object\n    - element (Element) - instance of Element.\n\n    Finds the computed width and height of `element` and returns them as\n    key/value pairs of an object.\n\n    This method is similar to http://api.prototypejs.org/dom/Element/getDimensions/\n**/\nElement.getDimensions = function (element) {\n    var display = Element.getStyle(element, \"display\");\n    if (display && display !== \"none\") {\n        return {\n            width: element.offsetWidth,\n            height: element.offsetHeight\n        };\n    }\n    var before = {\n        visibility: element.style.visibility,\n        position: element.style.position,\n        display: element.style.display\n    };\n    var after = {\n        visibility: \"hidden\",\n        display: \"block\"\n    };\n    // Switching `fixed` to `absolute` causes issues in Safari.\n    if (before.position !== \"fixed\") {\n        after.position = \"absolute\";\n    }\n    Element.setStyle(element, after);\n    var dimensions = {\n        width: element.offsetWidth,\n        height: element.offsetHeight\n    };\n    Element.setStyle(element, before);\n    return dimensions;\n};\n/*?\n    flagrate.Element.getHeight(element) -> Number\n    - element (Element) - instance of Element.\n\n    This method is similar to http://api.prototypejs.org/dom/Element/getHeight/\n**/\nElement.getHeight = function (element) {\n    return Element.getDimensions(element).height;\n};\n/*?\n    flagrate.Element.getWidth(element) -> Number\n    - element (Element) - instance of Element.\n\n    This method is similar to http://api.prototypejs.org/dom/Element/getWidth/\n**/\nElement.getWidth = function (element) {\n    return Element.getDimensions(element).width;\n};\n/*?\n    flagrate.Element.cumulativeOffset(element) -> Object\n    - element (Element) - instance of Element.\n\n    This method is similar to http://api.prototypejs.org/dom/Element/cumulativeOffset/\n**/\nElement.cumulativeOffset = function (element) {\n    var t = 0,\n        l = 0;\n    if (element.parentNode) {\n        do {\n            t += element.offsetTop || 0;\n            l += element.offsetLeft || 0;\n            element = element.offsetParent;\n        } while (element);\n    }\n    return {\n        top: t,\n        left: l\n    };\n};\n/*?\n    flagrate.Element.cumulativeScrollOffset(element) -> Object\n    - element (Element) - instance of Element.\n\n    This method is similar to http://api.prototypejs.org/dom/Element/cumulativeScrollOffset/\n**/\nElement.cumulativeScrollOffset = function (element) {\n    var t = 0,\n        l = 0;\n    do {\n        t += element.scrollTop || 0;\n        l += element.scrollLeft || 0;\n        // for Chrome\n        if (element.parentNode === document.body && document.documentElement.scrollTop !== 0) {\n            element = document.documentElement;\n        } else {\n            element = element.parentNode;\n        }\n    } while (element);\n    return {\n        top: t,\n        left: l\n    };\n};\n/*?\n    Flagrate.Element.hasClassName(element, className) -> Boolean\n    - element (Element) - instance of Element.\n    - className (String) -\n\n    This method is similar to http://api.prototypejs.org/dom/Element/hasClassName/\n**/\nElement.hasClassName = function (element, className) {\n    return element.className.length > 0 && (element.className === className || new RegExp(\"(^|\\\\s)\" + className + \"(\\\\s|$)\").test(element.className));\n};\n/*?\n    flagrate.Element.addClassName(element, className) -> Element\n    - element (Element) - instance of Element.\n    - className (String) - The class name to add.\n\n    This method is similar to http://api.prototypejs.org/dom/Element/addClassName/\n**/\nElement.addClassName = function (element, className) {\n    if (!Element.hasClassName(element, className)) {\n        element.className += (element.className ? \" \" : \"\") + className;\n    }\n    return element;\n};\n/*?\n    flagrate.Element.removeClassName(element, className) -> Element\n    - element (Element) - instance of Element.\n    - className (String) -\n\n    This method is similar to http://api.prototypejs.org/dom/Element/removeClassName/\n**/\nElement.removeClassName = function (element, className) {\n    element.className = element.className.replace(new RegExp(\"(^|\\\\s+)\" + className + \"(\\\\s+|$)\"), \" \").trim();\n    return element;\n};\n/*?\n    flagrate.Element.toggleClassName(element, className) -> Element\n    - element (Element) - instance of Element.\n    - className (String) -\n\n    This method is similar to http://api.prototypejs.org/dom/Element/toggleClassName/\n**/\nElement.toggleClassName = function (element, className) {\n    return Element[Element.hasClassName(element, className) ? \"removeClassName\" : \"addClassName\"](element, className);\n};\n/*?\n    flagrate.Element.getStyle(element, propertyName) -> String | Number | null\n    - element (Element) - instance of Element.\n    - propertyName (String) - The property name of style to be retrieved.\n\n    This method is similar to http://api.prototypejs.org/dom/Element/getStyle/\n**/\nElement.getStyle = function (element, style) {\n    style = style === \"float\" ? \"cssFloat\" : style.replace(/-+([a-z])?/g, function (m, s) {\n        return s ? s.toUpperCase() : \"\";\n    });\n    var value = element.style[style];\n    if (!value || value === \"auto\") {\n        var css = document.defaultView.getComputedStyle(element, null);\n        value = css && css[style] !== void 0 && css[style] !== \"\" ? css[style] : null;\n    }\n    if (style === \"opacity\") {\n        return value ? parseFloat(value) : 1.0;\n    }\n    return value === \"auto\" ? null : value;\n};\n/*?\n    flagrate.Element.setStyle(element, style) -> Element\n    - element (Element) - instance of Element.\n    - style (Object) -\n\n    This method is similar to http://api.prototypejs.org/dom/Element/setStyle/\n**/\nElement.setStyle = function (element, style) {\n    var p = void 0;\n    for (p in style) {\n        if (style.hasOwnProperty(p)) {\n            element.style[p === \"float\" || p === \"cssFloat\" ? \"cssFloat\" : p] = style[p];\n        }\n    }\n    return element;\n};\n/*?\n    flagrate.Element.on(element, eventName, listener[, useCapture = false]) -> Element\n    - element (Element) - instance of Element.\n    - eventName (String) - name of event.\n    - listener (Function) - The function to call when the event occurs.\n    - useCapture (Boolean) -\n\n    Registers an event handler on a DOM element.\n**/\nElement.on = function (element, name, listener, useCapture) {\n    if (element._flagrateEvent === undefined) {\n        element._flagrateEvent = {};\n    }\n    if (element._flagrateEvent[name] === undefined) {\n        element._flagrateEvent[name] = [];\n    }\n    element._flagrateEvent[name].push({\n        listener: listener,\n        useCapture: useCapture\n    });\n    element.addEventListener(name, listener, useCapture || false);\n    return element;\n};\n/*?\n    flagrate.Element.off(element, eventName[, listener, useCapture = false]) -> Element\n    - element (Element) - instance of Element.\n    - eventName (String) - name of event.\n    - listener (Function) - The function to call when the event occurs.\n    - useCapture (Boolean) -\n\n    Unregisters an event handler on a DOM element.\n**/\nElement.off = function (element, name, listener, useCapture) {\n    if (listener) {\n        element.removeEventListener(name, listener, useCapture || false);\n        return;\n    }\n    if (element._flagrateEvent === undefined) {\n        element._flagrateEvent = {};\n    }\n    if (element._flagrateEvent[name] === undefined) {\n        element._flagrateEvent[name] = [];\n    }\n    element._flagrateEvent[name].forEach(function (fevent) {\n        element.removeEventListener(name, fevent.listener, fevent.useCapture || false);\n    });\n    return element;\n};\n/*?\n    flagrate.Element.fire(element, eventName[, property]) -> Element\n    - element (Element) - instance of Element.\n    - eventName (String) - name of event.\n    - property (Object) -\n\n    Fires a custom event.\n**/\nElement.fire = function (element, name, property) {\n    var event = document.createEvent(\"HTMLEvents\");\n    event.initEvent(name, true, true);\n    if (property) {\n        (0, _util.extendObject)(event, property);\n    }\n    element.dispatchEvent(event);\n    return element;\n};\n/*?\n    flagrate.Element.emit(element, eventName[, property]) -> Element\n    Alias of: flagrate.Element.fire\n**/\nElement.emit = Element.fire;\n//\n// create instance methods\n//\nfor (var name in Element) {\n    if (!(name in Element.prototype)) {\n        Element.prototype[name] = wrapper(name);\n    }\n}\nfunction wrapper(name) {\n    return function () {\n        return Element[name].apply(Element, [this].concat(Array.prototype.slice.call(arguments)));\n    };\n}\n//\n// extra class methods\n//\n/*?\n    flagrate.Element.extend(element) -> flagrate.Element\n    - element (Element) - instance of Element.\n\n    Extends the given `element` instance.\n\n    **Caution**: This method will add Flagrate.Element instance methods to given element instance.\n**/\nElement.extend = function (element) {\n    if (element.isFlagrated) {\n        return element;\n    }\n    (0, _util.extendObject)(element, Element.prototype);\n    return element;\n};\n/*?\n    flagrate.Element.isElement(element) -> Boolean\n    - element (Element) - instance of Element.\n**/\nif ((typeof HTMLElement === \"undefined\" ? \"undefined\" : _typeof(HTMLElement)) === \"object\") {\n    Element.isElement = function (object) {\n        return object instanceof HTMLElement;\n    };\n} else {\n    Element.isElement = function (object) {\n        return !!(object && object.nodeType === 1 && typeof object.nodeName === \"string\");\n    };\n}\n\n\n\n},{\"./util\":28}],8:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Form = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.createForm = createForm;\n\nvar _util = require(\"./util\");\n\nvar _element = require(\"./element\");\n\nvar _textInput = require(\"./text-input\");\n\nvar _textArea = require(\"./text-area\");\n\nvar _comboBox = require(\"./combo-box\");\n\nvar _checkbox = require(\"./checkbox\");\n\nvar _checkboxes = require(\"./checkboxes\");\n\nvar _switch = require(\"./switch\");\n\nvar _radios = require(\"./radios\");\n\nvar _select = require(\"./select\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*?\n    flagrate.createForm(option)\n    new flagrate.Form(option)\n    - option (Object) - configuration.\n\n    Create and initialize the Form.\n\n    #### option\n\n    * `fields`                   (Array; default `[]`): of **[field](#field)** object.\n    * `id`                       (String): `id` attribute of container.\n    * `className`                (String): `class` attribute of container.\n    * `attribute`                (Object): additional attribute of container.\n    * `style`                    (Object): style of container. (using flagrate.Element.setStyle)\n    * `nolabel`                  (Boolean; default `false`): hide labels.\n    * `vertical`                 (Boolean; default `false`): vertical label style.\n\n    #### field\n\n    * `key`                      (String):\n    * `pointer`                  (String|null):\n    * `label`                    (String; default `\"\"`):\n    * `icon`                     (String):\n    * `text`                     (String):\n    * `html`                     (String):\n    * `element`                  (Element):\n    * `input`                    (Object): see **[input](#input)**\n    * `depends`                  (Array): of **[depend](#depend)**\n    * `id`                       (String): `id` attribute of container.\n    * `className`                (String): `class` attribute of container.\n    * `attribute`                (Object): additional attribute of container.\n    * `style`                    (Object): style of container. (using flagrate.Element.setStyle)\n\n    #### input\n\n    * `type`                     (String|Object; **required**): **[inputtype](#inputType)** String or Object\n    * `val`                      (any): default value(s) of this input.\n    * `isRequired`               (Boolean; default `false`):\n    * `min`                      (Number): (simple validator)\n    * `max`                      (Number): (simple validator)\n    * `minLength`                (Number): (simple validator)\n    * `maxLength`                (Number): (simple validator)\n    * `validators`               (Array): of **[inputValidator](#inputvalidator)** String or Object or Function.\n    * `toString`                 (Boolean; default `false`): if NOT String, use [#toString()](https://developer.mozilla.org/ja/docs/toString) before resulting.\n    * `trim`                     (Boolean; default `false`): if String, use [String#trim()](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/trim) before resulting.\n    * `toNumber`                 (Boolean; default `false`): if NOT Number, tries to convert to Number.\n    * `transform`                (Function): alternate result transform/converting function. (only sync)\n    * `id`                       (String): `id` attribute of input element.\n\n    #### depend\n\n    * `key`                      (String): unique key for identifying fields. if looking result, must change to use the pointer.\n    * `pointer`                  (String):\n    * `val`                      (any):\n    * `op`                       (String): `===`, `!==`, `>=`, `<=`, `>`, `<`, `in`\n    * `tester`                   (Function): alternate testing function. this disables normal testing. (only sync)\n\n    #### inputType\n\n    if specified a String, will use flagrate.Form.inputType[(specified)].\n\n    #### inputValidator\n\n    if specified a String, will use flagrate.Form.inputValidator[(specified)].\n\n        // Example: custom validator\n        validators: [\n            // using regex:\n            {\n                regexp: /^[a-z0-9]+(-[a-z0-9]+)*(\\.([a-z0-9]+(-[a-z0-9]+)*))*$/i,\n                error: \"Please enter a valid hostname string.\"\n            },\n            // using async function:\n            function (input, done) {\n                someAsyncFunction(input, function (err, result) {\n                    if (err) {\n                        done(\"error\", \"This hostname is already in use. (\" + err + \")\");\n                    } else {\n                        done(\"success\");\n                    }\n                });\n            },\n            // using sync function:\n            function (input, done) {\n                var err = someSyncFunction(input);\n                if (err) {\n                    done(\"error\", \"This hostname is prohibited. (\" + err + \")\");\n                } else {\n                    done(\"success\");\n                }\n            }\n        ]\n\n    see flagrate.Form.inputValidator to read more documents.\n**/\n\nvar Form = exports.Form = function () {\n    function Form() {\n        var _opt = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n        _classCallCheck(this, Form);\n\n        this._opt = _opt;\n        this._fields = [];\n        this._nolabel = false;\n        this._vertical = false;\n        this.element = new _element.Element(\"form\", { \"class\": \"flagrate flagrate-form\" });\n        this._id = \"flagrate-form-\" + (++Form.idCounter).toString(10);\n        if (_opt.nolabel === true) {\n            this._nolabel = true;\n        }\n        if (_opt.vertical === true) {\n            this._vertical = true;\n        }\n        this._create();\n        if (_opt.fields && _opt.fields.length !== 0) {\n            this.push(_opt.fields);\n        }\n    }\n\n    _createClass(Form, [{\n        key: \"insertTo\",\n        value: function insertTo(element, pos) {\n            return this.element.insertTo(element, pos) && this;\n        }\n    }, {\n        key: \"on\",\n        value: function on(eventType, listener, useCapture) {\n            return this.element.on(eventType, listener, useCapture) && this;\n        }\n    }, {\n        key: \"off\",\n        value: function off(eventType, listener, useCapture) {\n            return this.element.off(eventType, listener, useCapture) && this;\n        }\n        /** Returns a result Object. */\n\n    }, {\n        key: \"getResult\",\n        value: function getResult() {\n            var result = {};\n            for (var i = 0, l = this._fields.length; i < l; i++) {\n                var field = this._fields[i];\n                if (!field.key && typeof field.pointer !== \"string\" || field._dependsIsOk !== true) {\n                    continue;\n                }\n                if (field.pointer === null) {\n                    // null pointer\n                    continue;\n                }\n                if (typeof field.pointer === \"string\") {\n                    _util.jsonPointer.set(result, field.pointer, field.getVal());\n                } else if (field.key) {\n                    result[field.key] = field.getVal();\n                }\n            }\n            return result;\n        }\n        /*?\n            #### Example\n                 form.validate(function(success) {\n                    if (success) {\n                        console.log(\"form is valid.\");\n                    } else {\n                        console.log(\"form is invalid.\");\n                    }\n                });\n        **/\n\n    }, {\n        key: \"validate\",\n        value: function validate(callback) {\n            var fields = [];\n            for (var i = 0, l = this._fields.length; i < l; i++) {\n                var field = this._fields[i];\n                if (field._dependsIsOk === true && field.input && field.input.type) {\n                    fields.push(field);\n                }\n            }\n            var hasError = false;\n            function fin() {\n                if (callback) {\n                    callback(!hasError);\n                }\n            }\n            function done(result) {\n                if (result === false) {\n                    hasError = true;\n                }\n                run();\n            }\n            function run() {\n                if (fields.length === 0) {\n                    return fin();\n                }\n                fields.shift().validate(done);\n            }\n            run();\n            return this;\n        }\n    }, {\n        key: \"enable\",\n        value: function enable() {\n            for (var i = 0, l = this._fields.length; i < l; i++) {\n                var field = this._fields[i];\n                if (field.input && field.input.type) {\n                    field.input.type.enable.call(field.input);\n                }\n            }\n            return this;\n        }\n    }, {\n        key: \"disable\",\n        value: function disable() {\n            for (var i = 0, l = this._fields.length; i < l; i++) {\n                var field = this._fields[i];\n                if (field.input && field.input.type) {\n                    field.input.type.disable.call(field.input);\n                }\n            }\n            return this;\n        }\n    }, {\n        key: \"getField\",\n        value: function getField(key) {\n            for (var i = 0, l = this._fields.length; i < l; i++) {\n                var field = this._fields[i];\n                if (field.key && field.key === key) {\n                    return field;\n                }\n            }\n            return null;\n        }\n    }, {\n        key: \"push\",\n        value: function push(f) {\n            if (f instanceof Array) {\n                for (var i = 0, l = f.length; i < l; i++) {\n                    this._createField(f[i]);\n                    this._fields.push(f[i]);\n                }\n            } else {\n                this._createField(f);\n                this._fields.push(f);\n            }\n            for (var _i = 0, _l = this._fields.length; _i < _l; _i++) {\n                this._collectFieldRefs(this._fields[_i]);\n                this._checkFieldDepends(this._fields[_i]);\n            }\n            this._requestRender();\n            return this._fields.length;\n        }\n    }, {\n        key: \"splice\",\n        value: function splice(index, c, f) {\n            c = typeof c === \"undefined\" ? this._fields.length - index : c;\n            var removes = this._fields.splice(index, c);\n            for (var i = 0, l = removes.length; i < l; i++) {\n                if (removes[i].container) {\n                    removes[i].container.remove();\n                    delete removes[i].container;\n                }\n            }\n            if (f) {\n                if (f instanceof Array === false) {\n                    f = [f];\n                }\n                for (var _i2 = 0, _l2 = f.length; _i2 < _l2; _i2++) {\n                    this._createField(f[_i2]);\n                    this._fields.splice(index + _i2, 0, f[_i2]);\n                }\n            }\n            for (var _i3 = 0, _l3 = this._fields.length; _i3 < _l3; _i3++) {\n                this._collectFieldRefs(this._fields[_i3]);\n                this._checkFieldDepends(this._fields[_i3]);\n            }\n            this._requestRender();\n            return removes;\n        }\n    }, {\n        key: \"removeField\",\n        value: function removeField(f) {\n            var removes = [];\n            var bulk = true;\n            if (f instanceof Array === false) {\n                bulk = false;\n                f = [f];\n            }\n            for (var i = 0, l = f.length; i < l; i++) {\n                var index = typeof f[i] === \"number\" ? f[i] : this.indexOf(f[i]);\n                if (index !== -1) {\n                    removes.push(this.splice(index, 1));\n                }\n            }\n            return bulk ? removes : removes[0];\n        }\n    }, {\n        key: \"indexOf\",\n        value: function indexOf(f) {\n            if (typeof f === \"string\") {\n                var index = -1;\n                for (var i = 0, l = this._fields.length; i < l; i++) {\n                    if (this._fields[i].key === f) {\n                        index = i;\n                        break;\n                    }\n                }\n                return index;\n            } else {\n                return this._fields.indexOf(f);\n            }\n        }\n    }, {\n        key: \"_create\",\n        value: function _create() {\n            if (this._opt.id) {\n                this.element.writeAttribute(\"id\", this._opt.id);\n            }\n            if (this._opt.className) {\n                this.element.addClassName(this._opt.className);\n            }\n            if (this._opt.attribute) {\n                this.element.writeAttribute(this._opt.attribute);\n            }\n            if (this._opt.style) {\n                this.element.setStyle(this._opt.style);\n            }\n            if (this._opt.nolabel === true) {\n                this.element.addClassName(\"flagrate-form-nolabel\");\n            }\n            if (this._opt.vertical === true) {\n                this.element.addClassName(\"flagrate-form-vertical\");\n            }\n            this.element.addEventListener(\"submit\", function (e) {\n                return e.preventDefault();\n            });\n            return this;\n        }\n    }, {\n        key: \"_requestRender\",\n        value: function _requestRender() {\n            if (this._renderTimer) {\n                clearTimeout(this._renderTimer);\n            }\n            this._renderTimer = setTimeout(this._render.bind(this), 0);\n            return this;\n        }\n    }, {\n        key: \"_render\",\n        value: function _render() {\n            var active = document.activeElement;\n            for (var i = 0, l = this._fields.length; i < l; i++) {\n                var field = this._fields[i];\n                if (field._dependsIsOk === true) {\n                    field.container.insertTo(this.element);\n                } else {\n                    if (field.visible() === true) {\n                        field.container.remove();\n                    }\n                }\n            }\n            if (active) {\n                if (/Trident/.test(window.navigator.userAgent) === true) {\n                    setTimeout(function () {\n                        if (active.focus) {\n                            active.focus();\n                        }\n                        var isMustReselected = active.tagName === \"INPUT\" && (active.type === \"text\" || active.type === \"password\" || active.type === \"number\") || active.tagName === \"TEXTAREA\";\n                        if (isMustReselected) {\n                            if (typeof active.selectionStart === \"number\") {\n                                active.selectionStart = active.selectionEnd = active.value.length;\n                            } else if (active[\"createTextRange\"] !== undefined) {\n                                var range = active[\"createTextRange\"]();\n                                range.collapse(false);\n                                range.select();\n                            }\n                        }\n                    }, 0);\n                } else {\n                    if (active.focus) {\n                        active.focus();\n                    }\n                }\n            }\n            return this;\n        }\n    }, {\n        key: \"_collectFieldRefs\",\n        value: function _collectFieldRefs(field) {\n            field._refs = [];\n            // DEPRECATED\n            if (typeof field[\"point\"] !== \"undefined\") {\n                field.pointer = field[\"point\"];\n                delete field[\"point\"];\n            }\n            if (!field.key && typeof field.pointer !== \"string\") {\n                return this;\n            }\n            var i = void 0,\n                l = void 0,\n                j = void 0,\n                m = void 0,\n                k = void 0,\n                n = void 0,\n                fi = void 0,\n                s = void 0;\n            for (i = 0, l = this._fields.length; i < l; i++) {\n                fi = this._fields[i];\n                if (field === fi || !fi.depends || fi.depends.length === 0) {\n                    continue;\n                }\n                for (j = 0, m = fi.depends.length; j < m; j++) {\n                    if (fi.depends[j] instanceof Array) {\n                        s = false;\n                        for (k = 0, n = fi.depends[j].length; k < n; k++) {\n                            if (fi.depends[j][k].key === field.key) {\n                                s = true;\n                                break;\n                            }\n                            if (typeof fi.depends[j][k].point === \"string\") {\n                                fi.depends[j][k].pointer = fi.depends[j][k].point;\n                                delete fi.depends[j][k].point;\n                            }\n                            if (typeof fi.depends[j][k].pointer === \"string\") {\n                                if (fi.depends[j][k].pointer === field.pointer) {\n                                    s = true;\n                                    break;\n                                }\n                                if (fi.depends[j][k].pointer === \"/\" + field.key) {\n                                    s = true;\n                                    break;\n                                }\n                            }\n                        }\n                        if (s) {\n                            field._refs.push(fi);\n                        }\n                        break;\n                    } else {\n                        if (fi.depends[j].key === field.key) {\n                            field._refs.push(fi);\n                            break;\n                        }\n                        if (typeof fi.depends[j].point === \"string\") {\n                            fi.depends[j].pointer = fi.depends[j].point;\n                            delete fi.depends[j].point;\n                        }\n                        if (typeof fi.depends[j].pointer === \"string\") {\n                            if (fi.depends[j].pointer === field.pointer) {\n                                field._refs.push(fi);\n                                break;\n                            }\n                            if (fi.depends[j].pointer === \"/\" + field.key) {\n                                field._refs.push(fi);\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n            return this;\n        }\n    }, {\n        key: \"_compareDepend\",\n        value: function _compareDepend(d) {\n            var v = void 0;\n            if (d.key) {\n                var f = this.getField(d.key);\n                if (f !== null) {\n                    if (!d.op && !d.tester && d.val === undefined) {\n                        return true;\n                    }\n                    if (f._dependsIsOk === true) {\n                        v = f.getVal();\n                    }\n                }\n            } else if (typeof d.pointer === \"string\") {\n                try {\n                    v = _util.jsonPointer.get(this.getResult(), d.pointer);\n                } catch (e) {}\n            } else {\n                return true;\n            }\n            if (typeof d.tester === \"function\") {\n                return !!d.tester(v, d);\n            }\n            if (d.op) {\n                if (d.op === \"===\" && d.val === v) {\n                    return true;\n                }\n                if (d.op === \"!==\" && d.val !== v) {\n                    return true;\n                }\n                if (d.op === \">=\" && d.val >= v) {\n                    return true;\n                }\n                if (d.op === \"<=\" && d.val <= v) {\n                    return true;\n                }\n                if (d.op === \">\" && d.val > v) {\n                    return true;\n                }\n                if (d.op === \"<\" && d.val < v) {\n                    return true;\n                }\n                if (d.op === \"in\" && typeof v[d.val] !== \"undefined\") {\n                    return true;\n                }\n            } else {\n                if (d.val === v) {\n                    return true;\n                }\n            }\n            return false;\n        }\n    }, {\n        key: \"_checkFieldDepends\",\n        value: function _checkFieldDepends(field) {\n            var depends = field.depends;\n            if (!depends || depends.length === 0) {\n                field._dependsIsOk = true;\n                return true;\n            }\n            var result = true;\n            var i = void 0,\n                l = void 0,\n                j = void 0,\n                m = void 0,\n                d = void 0,\n                f = void 0,\n                s = void 0;\n            for (i = 0, l = depends.length; i < l; i++) {\n                d = depends[i];\n                if (d instanceof Array) {\n                    s = false;\n                    for (j = 0, m = d.length; j < m; j++) {\n                        if (this._compareDepend(d[j]) === true) {\n                            s = true;\n                            break;\n                        }\n                    }\n                    if (s === false) {\n                        result = false;\n                        break;\n                    }\n                } else {\n                    if (this._compareDepend(d) === false) {\n                        result = false;\n                        break;\n                    }\n                }\n            }\n            field._dependsIsOk = result;\n            return result;\n        }\n    }, {\n        key: \"_createField\",\n        value: function _createField(field) {\n            var _this = this;\n\n            field._dependsIsOk = !field.depends || field.depends.length === 0;\n            // field container\n            field.container = new _element.Element(\"div\");\n            // attributes to field container\n            if (field.id) {\n                field.container.writeAttribute(\"id\", field.id);\n            }\n            if (field.className) {\n                field.container.writeAttribute(\"class\", field.className);\n            }\n            if (field.attribute) {\n                field.container.writeAttribute(field.attribute);\n            }\n            if (field.style) {\n                field.container.setStyle(field.style);\n            }\n            // create label\n            if (this._nolabel === false) {\n                field.labelElement = new _element.Element(\"label\").insertText(field.label || \"\");\n                new _element.Element(\"div\", { \"class\": \"flagrate-form-field-label\" }).insert(field.labelElement).insertTo(field.container);\n                // icon to label\n                if (field.icon) {\n                    field.labelElement.addClassName(\"flagrate-icon\");\n                    field.labelElement.setStyle({\n                        backgroundImage: \"url(\" + field.icon + \")\"\n                    });\n                }\n            }\n            // input container\n            field._input = new _element.Element(\"div\").insertTo(field.container);\n            // input ready?\n            if (field.input && field.input.type) {\n                if (typeof field.input.type === \"string\") {\n                    field.input.type = Form.inputType[field.input.type];\n                } else if (!field.input.type.create) {\n                    delete field.input;\n                }\n            }\n            // init input\n            if (field.input && field.input.type) {\n                (function () {\n                    var input = field.input;\n                    if (!input.id) {\n                        input.id = \"flagrate-form-input-\" + ++Form.idCounter;\n                    }\n                    if (_this._nolabel === false) {\n                        field.labelElement.writeAttribute(\"for\", input.id);\n                    }\n                    input.element = input.type.create.call(input);\n                    new _element.Element(\"div\", { \"class\": \"flagrate-form-field-input\" }).insert(input.element).insertTo(field._input);\n                    input.element.writeAttribute(\"id\", input.id);\n                    // value, values is just alias.\n                    if (input[\"value\"]) {\n                        input.val = input[\"value\"];\n                    } else if (input[\"values\"]) {\n                        input.val = input[\"values\"];\n                    }\n                    // set the default value\n                    if (input.val !== undefined) {\n                        input.type.setVal.call(input, input.val);\n                    }\n                    if (input.style) {\n                        input.element.setStyle(input.style);\n                    }\n                    // toString is alias for toStr.\n                    if (typeof input[\"toString\"] === \"boolean\" && input.toStr === undefined) {\n                        input.toStr = input[\"toString\"];\n                    }\n                    // init validator\n                    if (input.validators) {\n                        input.validators.forEach(function (v, i) {\n                            if (typeof v === \"string\") {\n                                input.validators[i] = Form.inputValidator[v];\n                            }\n                        });\n                    } else {\n                        input.validators = [];\n                    }\n                    // result block\n                    input._result = new _element.Element(\"ul\", {\n                        \"class\": \"flagrate-form-field-result\"\n                    }).insertTo(field._input);\n                    // etc\n                    if (input.isRequired === true) {\n                        field.container.addClassName(\"flagrate-required\");\n                    }\n                })();\n            }\n            // misc\n            if (field.element) {\n                new _element.Element(\"div\", {\n                    \"class\": \"flagrate-form-field-element\"\n                }).insert(field.element).insertTo(field._input);\n            }\n            if (field.html) {\n                new _element.Element(\"div\", {\n                    \"class\": \"flagrate-form-field-html\"\n                }).insert(field.html).insertTo(field._input);\n            }\n            if (field.text) {\n                new _element.Element(\"p\", {\n                    \"class\": \"flagrate-form-field-text\"\n                }).insertText(field.text).insertTo(field._input);\n            }\n            // field methods\n            field.visible = function () {\n                return field.container.parentNode !== null && field.container.parentNode === _this.element;\n            };\n            field.getVal = function () {\n                if (!field.input) {\n                    return undefined;\n                }\n                var result = field.input.type.getVal.call(field.input);\n                if (field.input.toStr === true) {\n                    result = result.toString();\n                }\n                if (field.input.trim === true && typeof result === \"string\") {\n                    result = result.trim();\n                }\n                if (field.input.toNumber === true && typeof result !== \"number\") {\n                    if (typeof result === \"string\") {\n                        result = parseFloat(result);\n                    } else if (result instanceof Date) {\n                        result = result.getTime();\n                    } else if (typeof result === \"boolean\") {\n                        result = result === true ? 1 : 0;\n                    }\n                }\n                if (typeof field.input.transform === \"function\") {\n                    result = field.input.transform.call(field.input, result);\n                }\n                return result;\n            };\n            field.setVal = function (val) {\n                if (!field.input) {\n                    return field;\n                }\n                field.input.type.setVal.call(field.input, val);\n                field._inputOnChange();\n                return field;\n            };\n            field.validate = function (callback) {\n                var val = field.getVal();\n                var hasError = false;\n                var hasWarning = false;\n                field.input._result.update();\n                // simple validator\n                if (field.input.isRequired === true) {\n                    if (val === undefined) {\n                        hasError = true;\n                    } else if (val === false || val === null) {\n                        hasError = true;\n                    } else if (typeof val === \"number\" && isNaN(val) === true) {\n                        hasError = true;\n                    } else if (val.length !== undefined && val.length === 0) {\n                        hasError = true;\n                    }\n                }\n                if (typeof field.input.min === \"number\") {\n                    if (typeof val === \"number\") {\n                        if (field.input.min > val) {\n                            hasError = true;\n                        }\n                    } else if (typeof val === \"string\" && val !== \"\") {\n                        if (field.input.min > parseInt(val, 10)) {\n                            hasError = true;\n                        }\n                    } else if (val instanceof Array) {\n                        if (field.input.min > val.length) {\n                            hasError = true;\n                        }\n                    }\n                }\n                if (typeof field.input.max === \"number\") {\n                    if (typeof val === \"number\") {\n                        if (field.input.max < val) {\n                            hasError = true;\n                        }\n                    } else if (typeof val === \"string\" && val !== \"\") {\n                        if (field.input.max < parseInt(val, 10)) {\n                            hasError = true;\n                        }\n                    } else if (val instanceof Array) {\n                        if (field.input.max < val.length) {\n                            hasError = true;\n                        }\n                    }\n                }\n                if (field.input.minLength && field.input.minLength > (val.length || val.toString && val.toString().length || 0) && typeof val === \"string\" && val !== \"\") {\n                    hasError = true;\n                }\n                if (field.input.maxLength && field.input.maxLength < (val.length || val.toString && val.toString().length || 0)) {\n                    hasError = true;\n                }\n                // validators\n                var q = [];\n                field.input.validators.forEach(function (v) {\n                    q.push(v);\n                });\n                function fin() {\n                    if (field.input._result.innerHTML === \"\") {\n                        field.container.removeClassName(\"flagrate-has-result\");\n                    } else {\n                        field.container.addClassName(\"flagrate-has-result\");\n                    }\n                    if (hasError) {\n                        field.container.removeClassName(\"flagrate-has-warning\");\n                        field.container.removeClassName(\"flagrate-has-success\");\n                        field.container.addClassName(\"flagrate-has-error\");\n                    } else if (hasWarning) {\n                        field.container.removeClassName(\"flagrate-has-error\");\n                        field.container.removeClassName(\"flagrate-has-success\");\n                        field.container.addClassName(\"flagrate-has-warning\");\n                    } else {\n                        field.container.removeClassName(\"flagrate-has-error\");\n                        field.container.removeClassName(\"flagrate-has-warning\");\n                        field.container.addClassName(\"flagrate-has-success\");\n                    }\n                    field._hasError = hasError;\n                    field._hasWarning = hasWarning;\n                    if (callback) {\n                        callback(!hasError);\n                    }\n                }\n                function done(result, message) {\n                    switch (result) {\n                        case true:\n                        case \"success\":\n                            break;\n                        case null:\n                        case \"warning\":\n                            hasWarning = true;\n                            break;\n                        case false:\n                        case \"error\":\n                            hasError = true;\n                            break;\n                    }\n                    if (message) {\n                        new _element.Element(\"li\").insertText(message).insertTo(field.input._result);\n                    }\n                    run();\n                }\n                function run() {\n                    if (q.length === 0 || hasError === true) {\n                        return fin();\n                    }\n                    var v = q.shift();\n                    if (typeof v === \"function\") {\n                        v.call(field.input, val, done);\n                    } else if (typeof val === \"string\" && val !== \"\") {\n                        if (v.regexp.test(val)) {\n                            done(true, v.success);\n                        } else {\n                            done(false, v.error);\n                        }\n                    } else {\n                        done(true);\n                    }\n                }\n                run();\n            };\n            field._checkRefs = function () {\n                var rerend = false;\n                for (var i = 0, l = field._refs.length, refField; i < l; i++) {\n                    refField = field._refs[i];\n                    if (refField._dependsIsOk !== _this._checkFieldDepends(refField)) {\n                        refField._checkRefs();\n                        rerend = true;\n                    }\n                }\n                if (rerend === true) {\n                    _this._requestRender();\n                }\n            };\n            field._inputOnChange = function () {\n                // validation\n                field.validate();\n                // dependency\n                field._checkRefs();\n            };\n            // listen change event\n            if (field.input && field.input.type) {\n                var changeEvents = field.input.type.changeEvents || [\"change\"];\n                changeEvents.forEach(function (eventName) {\n                    field.input.element.addEventListener(eventName, field._inputOnChange);\n                });\n            }\n            return this;\n        }\n    }]);\n\n    return Form;\n}();\n\nForm.idCounter = 0;\n/*?\n    flagrate.Form.inputValidator -> Object\n\n    #### Built-in validators\n\n    * numeric\n    * alphanumeric\n\n    #### Basic validator\n\n        // success and error messages are optional\n        { regexp: /RegExp/, success: \"String\", error: \"String\" }\n        // warning state is not available in this way, see Advanced.\n\n    #### Advanced validator\n\n        // Sync or Async validation\n        function (input, done) { done(result, message); }// message is optional\n\n        // Examples\n        function (input, done) { done(true); }// success\n        function (input, done) { done(null); }// warning\n        function (input, done) { done(false); }// error\n        function (input, done) { done(\"success\"); }// success\n        function (input, done) { done(\"warning\"); }// warning\n        function (input, done) { done(\"error\"); }// error\n        function (input, done) { done(true, \"...\"); }// success with message\n        function (input, done) { done(null, \"...\"); }// warning with message\n        function (input, done) { done(false, \"...\"); }// error with message\n\n    #### Example: adding error message to built-in validators\n\n        flagrate.Form.inputValidator.numeric.error = \"Please enter a numbers.\";\n        flagrate.Form.inputValidator.alphanumeric.error = \"Please enter a alphanumeric.\";\n\n    #### Example: add the custom validator to Flagrate (to create plugin)\n\n        flagrate.Form.inputValidator.hostname = {\n            regexp: /^[a-z0-9]+(-[a-z0-9]+)*(\\.([a-z0-9]+(-[a-z0-9]+)*))*$/i,\n            error: \"Please enter a valid hostname string.\"\n        };\n**/\nForm.inputValidator = {\n    numeric: {\n        regexp: /^[0-9]+$/\n    },\n    alphanumeric: {\n        regexp: /^[a-z0-9]+$/i\n    }\n};\n/*?\n    flagrate.Form.inputType -> Object\n\n    #### Built-in input types\n\n    * [text](#text-string-) -> `String`\n    * [password](#password-string-) -> `String`\n    * [textarea](#textarea-string-) -> `String`\n    * [number](#number-number-) -> `Number`\n    * [combobox](#combobox-string-) -> `String`\n    * [checkbox](#checkbox-boolean-) -> `Boolean`\n    * [checkboxes](#checkboxes-array-) -> `Array`\n    * [switch](#switch-boolean-) -> `Boolean`\n    * [radios](#radios-any-) -> `any`\n    * [select](#select-any-array-) -> `any`|`Array`\n    * [file](#file-file-) -> `File`\n    * [files](#files-filelist-) -> `FileList`\n**/\nForm.inputType = {\n    /*?\n        #### text -> `String`\n        most basic single-line text input. (uses flagrate.TextInput)\n         * `placeholder` (String):\n        * `icon`        (String):\n        * `maxLength`   (Number):\n    **/\n    text: {\n        changeEvents: [\"change\", \"keyup\"],\n        create: function create() {\n            // return to define this.element\n            return new _textInput.TextInput({\n                placeholder: this.placeholder,\n                icon: this.icon,\n                attribute: {\n                    maxlength: this.maxLength\n                }\n            });\n        },\n        getVal: function getVal() {\n            return this.element.getValue();\n        },\n        setVal: function setVal(value) {\n            this.element.setValue(value);\n        },\n        enable: function enable() {\n            this.element.enable();\n        },\n        disable: function disable() {\n            this.element.disable();\n        }\n    },\n    /*?\n        #### password -> `String`\n        password input. Almost the same to [text](#text).\n    **/\n    password: {\n        changeEvents: [\"change\", \"keyup\"],\n        create: function create() {\n            return new _textInput.TextInput({\n                placeholder: this.placeholder,\n                icon: this.icon,\n                attribute: {\n                    type: \"password\",\n                    maxlength: this.maxLength\n                }\n            });\n        },\n        getVal: function getVal() {\n            return this.element.getValue();\n        },\n        setVal: function setVal(value) {\n            this.element.setValue(value);\n        },\n        enable: function enable() {\n            this.element.enable();\n        },\n        disable: function disable() {\n            this.element.disable();\n        }\n    },\n    /*?\n        #### textarea -> `String`\n        textarea input. (uses flagrate.TextArea)\n         * `placeholder` (String):\n        * `icon`        (String):\n        * `maxLength`   (Number):\n    **/\n    textarea: {\n        changeEvents: [\"change\", \"keyup\"],\n        create: function create() {\n            return new _textArea.TextArea({\n                placeholder: this.placeholder,\n                icon: this.icon,\n                attribute: {\n                    maxlength: this.maxLength\n                }\n            });\n        },\n        getVal: function getVal() {\n            return this.element.getValue();\n        },\n        setVal: function setVal(value) {\n            this.element.setValue(value);\n        },\n        enable: function enable() {\n            this.element.enable();\n        },\n        disable: function disable() {\n            this.element.disable();\n        }\n    },\n    /*?\n        #### number -> `Number`\n        number input. (uses flagrate.TextInput)\n         * `placeholder` (String):\n        * `icon`        (String):\n        * `min`         (Number):\n        * `max`         (Number):\n        * `maxLength`   (Number):\n    **/\n    number: {\n        changeEvents: [\"change\", \"keyup\"],\n        create: function create() {\n            return new _textInput.TextInput({\n                placeholder: this.placeholder,\n                icon: this.icon,\n                attribute: {\n                    type: \"number\",\n                    inputmode: \"numeric\",\n                    min: this.min,\n                    max: this.max,\n                    maxlength: this.maxLength\n                }\n            });\n        },\n        getVal: function getVal() {\n            return parseFloat(this.element.getValue());\n        },\n        setVal: function setVal(value) {\n            this.element.setValue(value);\n        },\n        enable: function enable() {\n            this.element.enable();\n        },\n        disable: function disable() {\n            this.element.disable();\n        }\n    },\n    /*?\n        #### combobox -> `String`\n        combobox input. (uses flagrate.ComboBox)\n         * `placeholder` (String):\n        * `icon`        (String):\n        * `maxLength`   (Number):\n        * `items`       (Array): of String values.\n    **/\n    combobox: {\n        changeEvents: [\"change\", \"keyup\"],\n        create: function create() {\n            return new _comboBox.ComboBox({\n                placeholder: this.placeholder,\n                icon: this.icon,\n                items: this.items,\n                attribute: {\n                    maxlength: this.maxLength\n                }\n            });\n        },\n        getVal: function getVal() {\n            return this.element.getValue();\n        },\n        setVal: function setVal(value) {\n            this.element.setValue(value);\n        },\n        enable: function enable() {\n            this.element.enable();\n        },\n        disable: function disable() {\n            this.element.disable();\n        }\n    },\n    /*?\n        #### checkbox -> `Boolean`\n        Checkbox input. (uses flagrate.Checkbox)\n         * `label`       (String):\n        * `labelHTML`   (String):\n        * `icon`        (String):\n    **/\n    checkbox: {\n        create: function create() {\n            return new _checkbox.Checkbox({\n                icon: this.icon,\n                label: this.label,\n                labelHTML: this.labelHTML\n            });\n        },\n        getVal: function getVal() {\n            return this.element.isChecked();\n        },\n        setVal: function setVal(value) {\n            if (value) {\n                this.element.check();\n            } else {\n                this.element.uncheck();\n            }\n        },\n        enable: function enable() {\n            this.element.enable();\n        },\n        disable: function disable() {\n            this.element.disable();\n        }\n    },\n    /*?\n        #### checkboxes -> `Array`\n        Checkboxes input. (uses flagrate.Checkboxes)\n         * `items` (Array):\n    **/\n    checkboxes: {\n        create: function create() {\n            return new _checkboxes.Checkboxes({\n                items: this.items\n            });\n        },\n        getVal: function getVal() {\n            return this.element.getValues();\n        },\n        setVal: function setVal(values) {\n            this.element.setValues(values);\n        },\n        enable: function enable() {\n            this.element.enable();\n        },\n        disable: function disable() {\n            this.element.disable();\n        }\n    },\n    /*?\n        #### switch -> `Boolean`\n        Switch input. (uses flagrate.Switch)\n    **/\n    \"switch\": {\n        create: function create() {\n            return new _switch.Switch();\n        },\n        getVal: function getVal() {\n            return this.element.isOn();\n        },\n        setVal: function setVal(value) {\n            if (value) {\n                this.element.switchOn();\n            } else {\n                this.element.switchOff();\n            }\n        },\n        enable: function enable() {\n            this.element.enable();\n        },\n        disable: function disable() {\n            this.element.disable();\n        }\n    },\n    /*?\n        #### radios -> `any`\n        Radio buttons input. (uses flagrate.Radios)\n         * `items` (Array):\n    **/\n    radios: {\n        create: function create() {\n            return new _radios.Radios({\n                items: this.items\n            });\n        },\n        getVal: function getVal() {\n            return this.element.getValue();\n        },\n        setVal: function setVal(value) {\n            this.element.setValue(value);\n        },\n        enable: function enable() {\n            this.element.enable();\n        },\n        disable: function disable() {\n            this.element.disable();\n        }\n    },\n    /*?\n        #### select -> `any`|`array`\n        Select input. (uses flagrate.Select)\n         * `items` (Array):\n        * `listView` (Boolean; default `false`):\n        * `multiple` (Boolean; default `false`):\n        * `max` (Number; default `-1`):\n        * `selectedIndex` (Number):\n        * `selectedIndexes` (Array): of Number\n    **/\n    select: {\n        create: function create() {\n            return new _select.Select({\n                items: this.items,\n                listView: this.listView,\n                multiple: this.multiple,\n                max: this.max,\n                selectedIndex: this.selectedIndex,\n                selectedIndexes: this.selectedIndexes\n            });\n        },\n        getVal: function getVal() {\n            return this.element.multiple === true ? this.element.getValues() : this.element.getValue();\n        },\n        setVal: function setVal(val) {\n            if (this.element.multiple === false) {\n                val = [val];\n            } else {\n                this.element.deselectAll();\n            }\n            for (var i = 0, l = val.length, m = this.element.items.length; i < l; i++) {\n                for (var j = 0; j < m; j++) {\n                    if (val[i] === this.element.items[j].value) {\n                        this.element.select(j);\n                        break;\n                    }\n                }\n            }\n        },\n        enable: function enable() {\n            this.element.enable();\n        },\n        disable: function disable() {\n            this.element.disable();\n        }\n    },\n    /*?\n        #### file -> `File`\n        File input for [File API](http://www.w3.org/TR/file-upload/)\n         * `accept` (String): pass to `accept` attribute value.\n        * `acceptTypes` (Array): Array of MIME type string.\n    **/\n    file: {\n        create: function create() {\n            return new _element.Element(\"input\", {\n                type: \"file\",\n                accept: this.accept || (this.acceptTypes ? this.acceptTypes.join(\",\") : undefined)\n            });\n        },\n        getVal: function getVal() {\n            return this.element.files[0];\n        },\n        setVal: function setVal(file) {\n            this.element.files[0] = file;\n        },\n        enable: function enable() {\n            this.element.writeAttribute(\"disabled\", false);\n        },\n        disable: function disable() {\n            this.element.writeAttribute(\"disabled\", true);\n        }\n    },\n    /*?\n        #### files -> `FileList`\n        File input for [File API](http://www.w3.org/TR/file-upload/)\n         * `accept` (String): pass to `accept` attribute value.\n        * `acceptTypes` (Array): Array of MIME type string.\n    **/\n    files: {\n        create: function create() {\n            return new _element.Element(\"input\", {\n                type: \"file\",\n                accept: this.accept || (this.acceptTypes ? this.acceptTypes.join(\",\") : undefined),\n                multiple: true\n            });\n        },\n        getVal: function getVal() {\n            return this.element.files;\n        },\n        setVal: function setVal(files) {\n            this.element.files = files;\n        },\n        enable: function enable() {\n            this.element.writeAttribute(\"disabled\", false);\n        },\n        disable: function disable() {\n            this.element.writeAttribute(\"disabled\", true);\n        }\n    }\n};\nfunction createForm(option) {\n    return new Form(option);\n}\n\n\n\n},{\"./checkbox\":3,\"./checkboxes\":4,\"./combo-box\":5,\"./element\":7,\"./radios\":17,\"./select\":19,\"./switch\":21,\"./text-area\":23,\"./text-input\":24,\"./util\":28}],9:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Grid = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.createGrid = createGrid;\n\nvar _element = require(\"./element\");\n\nvar _button = require(\"./button\");\n\nvar _checkbox = require(\"./checkbox\");\n\nvar _toolbar = require(\"./toolbar\");\n\nvar _contextMenu = require(\"./context-menu\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*?\n    flagrate.createGrid(option)\n    new flagrate.Grid(option)\n    - option (Object) - configuration for the grid.\n\n    Create and initialize the grid.\n\n    #### option\n\n    * `id`                       (String): `id` attribute of container.\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `style`                    (Object): (using flagrate.Element.setStyle)\n    * `cols`                     (Array): of col object.\n    * `rows`                     (Array): of row object.\n    * `pagination`               (Boolean; default `false`):\n    * `numberOfRowsPerPage`      (Number; default `20`): pagination.\n    * `fill`                     (Boolean; default `false`):\n    * `headless`                 (Boolean; default `false`):\n    * `multiSelect`              (Boolean; default `false`):\n    * `disableCheckbox`          (Boolean; default `false`):\n    * `disableSelect`            (Boolean; default `false`):\n    * `disableSort`              (Boolean; default `false`):\n    * `disableFilter`            (Boolean; default `false`):\n    * `disableResize`            (Boolean; default `false`):\n    * `onSelect`                 (Function):\n    * `onDeselect`               (Function):\n    * `onClick`                  (Function):\n    * `onDblClick`               (Function):\n    * `onRender`                 (Function):\n    * `onRendered`               (Function):\n    * `postProcessOfRow`         (Function):\n\n    #### col\n\n    * `id`                       (String): `id` attribute of `th`\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `style`                    (Object): styling of `th` (using flagrate.Element.setStyle)\n    * `key`                      (String; required):\n    * `label`                    (String; default `\"\"`):\n    * `icon`                     (String):\n    * `align`                    (String):\n    * `width`                    (Number):\n    * `disableSort`              (Boolean; default `false`):\n    * `disableResize`            (Boolean; default `false`):\n\n    #### row\n\n    * `id`                       (String): `id` attribute of `tr`\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `style`                    (Object): styling of `tr` (using flagrate.Element.setStyle)\n    * `cell`                     (Object|String; default `{}`): of cell object. or String for text.\n    * `menuItems`                (Array): of Menu items.\n    * `isSelected`               (Boolean):\n    * `onSelect`                 (Function):\n    * `onDeselect`               (Function):\n    * `onClick`                  (Function):\n    * `onDblClick`               (Function):\n    * `postProcess`              (Function):\n\n    #### cell\n\n    * `id`                       (String): `id` attribute of `td`\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `style`                    (Object): styling of `td` (using flagrate.Element.setStyle)\n    * `text`                     (String):\n    * `html`                     (String):\n    * `element`                  (Element):\n    * `icon`                     (String):\n    * `sortAlt`                  (Number|String):\n    * `onClick`                  (Function):\n    * `onDblClick`               (Function):\n    * `postProcess`              (Function):\n**/\n\nvar Grid = exports.Grid = function () {\n    function Grid() {\n        var _opt = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n        _classCallCheck(this, Grid);\n\n        this._opt = _opt;\n        this._cols = [];\n        this._rows = [];\n        this._pagePosition = 0;\n        this._selectedRows = [];\n        this._sortedByKey = null;\n        this._sortedByAsc = null;\n        this.element = new _element.Element(\"div\", { \"class\": \"flagrate flagrate-grid\" });\n        this._head = new _element.Element(\"div\", { \"class\": \"flagrate-grid-head\" }).insertTo(this.element);\n        this._thead = new _element.Element(\"thead\").insertTo(new _element.Element(\"table\").insertTo(this._head));\n        this._tr = new _element.Element(\"tr\").insertTo(this._thead);\n        this._body = new _element.Element(\"div\", { \"class\": \"flagrate-grid-body\" }).insertTo(this.element);\n        this._tbody = new _element.Element(\"tbody\").insertTo(new _element.Element(\"table\").insertTo(this._body));\n        this._style = new _element.Element(\"style\").insertTo(this.element);\n        this._id = \"flagrate-grid-\" + (++Grid.idCounter).toString(10);\n        if (_opt.id) {\n            this.element.writeAttribute(\"id\", _opt.id);\n        }\n        if (_opt.className) {\n            this.element.addClassName(_opt.className);\n        }\n        if (_opt.attribute) {\n            this.element.writeAttribute(_opt.attribute);\n        }\n        if (_opt.style) {\n            this.element.setStyle(_opt.style);\n        }\n        if (_opt.cols) {\n            this._cols = _opt.cols;\n        }\n        if (_opt.rows) {\n            this._rows = _opt.rows;\n        }\n        if (_opt.colMinWidth === undefined) {\n            _opt.colMinWidth = 16;\n        }\n        if (_opt.pagination === undefined) {\n            _opt.pagination = false;\n        }\n        if (!_opt.numberOfRowsPerPage) {\n            _opt.numberOfRowsPerPage = 20;\n        }\n        if (_opt.fill === undefined) {\n            _opt.fill = false;\n        }\n        if (_opt.headless === true) {\n            _opt.disableSort = true;\n            _opt.disableResize = true;\n            this.element.addClassName(\"flagrate-grid-headless\");\n        }\n        if (_opt.multiSelect === undefined) {\n            _opt.multiSelect = false;\n        }\n        if (_opt.disableCheckbox === undefined) {\n            _opt.disableCheckbox = false;\n        }\n        if (_opt.disableSelect === undefined) {\n            _opt.disableSelect = false;\n        }\n        if (_opt.disableSort === undefined) {\n            _opt.disableSort = false;\n        }\n        /* if (_opt.disableFilter === undefined) {\n            _opt.disableFilter = false;\n        } */\n        if (_opt.disableResize === undefined) {\n            _opt.disableResize = false;\n        }\n        this.onSelect = _opt.onSelect;\n        this.onDeselect = _opt.onDeselect;\n        this.onClick = _opt.onClick;\n        this.onDblClick = _opt.onDblClick;\n        this.onRender = _opt.onRender;\n        this.onRendered = _opt.onRendered;\n        this.postProcessOfRow = _opt.postProcessOfRow;\n        this._create()._requestRender();\n    }\n\n    _createClass(Grid, [{\n        key: \"insertTo\",\n        value: function insertTo(element, pos) {\n            return this.element.insertTo(element, pos) && this;\n        }\n    }, {\n        key: \"on\",\n        value: function on(eventType, listener, useCapture) {\n            return this.element.on(eventType, listener, useCapture) && this;\n        }\n    }, {\n        key: \"off\",\n        value: function off(eventType, listener, useCapture) {\n            return this.element.off(eventType, listener, useCapture) && this;\n        }\n    }, {\n        key: \"select\",\n        value: function select(a) {\n            var _this = this;\n\n            var rows = void 0;\n            if (Array.isArray(a) === true) {\n                rows = a;\n            } else {\n                rows = [];\n                for (var i = 0, l = arguments.length; i < l; i++) {\n                    rows.push(arguments[i]);\n                }\n            }\n            if (this._opt.multiSelect === false) {\n                this.deselectAll();\n            }\n\n            var _loop = function _loop(_i, _l) {\n                var row = rows[_i];\n                if (typeof row === \"number\") {\n                    row = _this._rows[row];\n                }\n                row.isSelected = true;\n                if (row._tr && row._tr.hasClassName(\"flagrate-grid-row-selected\") === true) {\n                    return \"continue\";\n                }\n                _this._selectedRows.push(row);\n                if (row._tr) {\n                    row._tr.addClassName(\"flagrate-grid-row-selected\");\n                }\n                if (row._checkbox) {\n                    row._checkbox.check();\n                    setTimeout(function () {\n                        if (row.isSelected === true) {\n                            row._checkbox.check();\n                        }\n                    }, 0);\n                }\n                if (row.onSelect) {\n                    row.onSelect.call(_this, window.event, row, _this);\n                }\n                if (_this.onSelect) {\n                    _this.onSelect(window.event, row, _this);\n                }\n            };\n\n            for (var _i = 0, _l = rows.length; _i < _l; _i++) {\n                var _ret = _loop(_i, _l);\n\n                if (_ret === \"continue\") continue;\n            }\n            if (this._selectedRows.length !== 0 && this._checkbox) {\n                this._checkbox.check();\n            }\n            this.element.fire(\"change\", { targetGrid: this });\n            return this;\n        }\n    }, {\n        key: \"deselect\",\n        value: function deselect(a) {\n            var _this2 = this;\n\n            var rows = void 0;\n            if (Array.isArray(a)) {\n                rows = a;\n            } else {\n                rows = [];\n                for (var i = 0, l = arguments.length; i < l; i++) {\n                    rows.push(arguments[i]);\n                }\n            }\n\n            var _loop2 = function _loop2(_i2, _l2) {\n                var row = rows[_i2];\n                if (typeof row === \"number\") {\n                    row = _this2._rows[row];\n                }\n                row.isSelected = false;\n                if (row._tr && row._tr.hasClassName(\"flagrate-grid-row-selected\") === false) {\n                    return \"continue\";\n                }\n                _this2._selectedRows.splice(_this2._selectedRows.indexOf(row), 1);\n                if (row._tr) {\n                    row._tr.removeClassName(\"flagrate-grid-row-selected\");\n                }\n                if (row._checkbox) {\n                    row._checkbox.uncheck();\n                    setTimeout(function () {\n                        if (row.isSelected === false) {\n                            row._checkbox.uncheck();\n                        }\n                    }, 0);\n                }\n                if (row.onDeselect) {\n                    row.onDeselect.call(_this2, window.event, row, _this2);\n                }\n                if (_this2.onDeselect) {\n                    _this2.onDeselect(window.event, row, _this2);\n                }\n            };\n\n            for (var _i2 = 0, _l2 = rows.length; _i2 < _l2; _i2++) {\n                var _ret2 = _loop2(_i2, _l2);\n\n                if (_ret2 === \"continue\") continue;\n            }\n            if (this._selectedRows.length === 0 && this._checkbox) {\n                this._checkbox.uncheck();\n            }\n            this.element.fire(\"change\", { targetGrid: this });\n            return this;\n        }\n        /** select all rows */\n\n    }, {\n        key: \"selectAll\",\n        value: function selectAll() {\n            return this.select(this._rows);\n        }\n        /** deselect all rows */\n\n    }, {\n        key: \"deselectAll\",\n        value: function deselectAll() {\n            return this.deselect(this._rows);\n        }\n        /** get selected rows */\n\n    }, {\n        key: \"getSelectedRows\",\n        value: function getSelectedRows() {\n            return this._selectedRows;\n        }\n        /** get values of selected rows */\n\n    }, {\n        key: \"getValues\",\n        value: function getValues() {\n            return this._selectedRows.map(function (row) {\n                return getValue.call(row);\n            });\n        }\n        /** sort rows by key */\n\n    }, {\n        key: \"sort\",\n        value: function sort(key, isAsc) {\n            if (isAsc === undefined) {\n                isAsc = true;\n            }\n            this._rows.sort(function (a, b) {\n                var A = 0;\n                var B = 0;\n                var cellA = a.cell[key];\n                var cellB = b.cell[key];\n                if ((typeof cellA === \"undefined\" ? \"undefined\" : _typeof(cellA)) === \"object\") {\n                    A = cellA.sortAlt !== undefined ? cellA.sortAlt : cellA.text || cellA.html || cellA.element && cellA.element.innerHTML || cellA._div && cellA._div.innerHTML || 0;\n                } else {\n                    A = cellA || 0;\n                }\n                if ((typeof cellB === \"undefined\" ? \"undefined\" : _typeof(cellB)) === \"object\") {\n                    B = cellB.sortAlt !== undefined ? cellB.sortAlt : cellB.text || cellB.html || cellB.element && cellB.element.innerHTML || cellB._div && cellB._div.innerHTML || 0;\n                } else {\n                    B = cellB || 0;\n                }\n                return A === B ? 0 : A > B ? 1 : -1;\n            });\n            if (isAsc === false) {\n                this._rows.reverse();\n            }\n            for (var i = 0, l = this._cols.length; i < l; i++) {\n                if (this._cols[i].key === key) {\n                    if (isAsc) {\n                        this._cols[i]._th.addClassName(\"flagrate-grid-col-sorted-asc\");\n                        this._cols[i]._th.removeClassName(\"flagrate-grid-col-sorted-desc\");\n                    } else {\n                        this._cols[i]._th.addClassName(\"flagrate-grid-col-sorted-desc\");\n                        this._cols[i]._th.removeClassName(\"flagrate-grid-col-sorted-asc\");\n                    }\n                    this._cols[i].isSorted = true;\n                    this._cols[i].isAsc = isAsc;\n                    this._sortedByKey = key;\n                    this._sortedByAsc = isAsc;\n                } else {\n                    if (this._cols[i].isSorted) {\n                        this._cols[i]._th.removeClassName(\"flagrate-grid-col-sorted-asc\").removeClassName(\"flagrate-grid-col-sorted-desc\");\n                    }\n                    this._cols[i].isSorted = false;\n                    this._cols[i].isAsc = null;\n                }\n            }\n            this._requestRender();\n            return this;\n        }\n    }, {\n        key: \"unshift\",\n        value: function unshift(r) {\n            if (Array.isArray(r) === true) {\n                for (var i = 0, l = r.length; i < l; i++) {\n                    this._rows.unshift(r[i]);\n                }\n            } else {\n                this._rows.unshift(r);\n            }\n            if (this._sortedByKey === null) {\n                this._requestRender();\n            } else {\n                this.sort(this._sortedByKey, this._sortedByAsc);\n            }\n            return this._rows.length;\n        }\n    }, {\n        key: \"push\",\n        value: function push(r) {\n            if (Array.isArray(r) === true) {\n                for (var i = 0, l = r.length; i < l; i++) {\n                    this._rows.push(r[i]);\n                }\n            } else {\n                this._rows.push(r);\n            }\n            if (this._sortedByKey === null) {\n                this._requestRender();\n            } else {\n                this.sort(this._sortedByKey, this._sortedByAsc);\n            }\n            return this._rows.length;\n        }\n    }, {\n        key: \"shift\",\n        value: function shift(c) {\n            var count = c || 1;\n            var removes = [];\n            for (var i = 0, l = this._rows.length; i < l && i < count; i++) {\n                removes.push(this._rows.shift());\n            }\n            this._requestRender();\n            return !c ? removes[0] : removes;\n        }\n    }, {\n        key: \"pop\",\n        value: function pop(c) {\n            var count = c || 1;\n            var removes = [];\n            for (var i = 0, l = this._rows.length; i < l && i < count; i++) {\n                removes.push(this._rows.pop());\n            }\n            this._requestRender();\n            return !c ? removes[0] : removes;\n        }\n    }, {\n        key: \"splice\",\n        value: function splice(index, c, r) {\n            c = typeof c === \"undefined\" ? this._rows.length - index : c;\n            var removes = this._rows.splice(index, c);\n            if (r) {\n                if (r instanceof Array === false) {\n                    r = [r];\n                }\n                for (var i = 0, l = r.length; i < l; i++) {\n                    this._rows.splice(index + i, 0, r[i]);\n                }\n            }\n            if (this._sortedByKey === null) {\n                this._requestRender();\n            } else {\n                this.sort(this._sortedByKey, this._sortedByAsc);\n            }\n            return removes;\n        }\n    }, {\n        key: \"indexOf\",\n        value: function indexOf(row, fromIndex) {\n            return this._rows.indexOf(row, fromIndex);\n        }\n    }, {\n        key: \"removeRow\",\n        value: function removeRow(r) {\n            var removes = [];\n            var bulk = true;\n            if (r instanceof Array === false) {\n                bulk = false;\n                r = [r];\n            }\n            for (var i = 0, l = r.length; i < l; i++) {\n                var index = this.indexOf(r[i]);\n                if (index !== -1) {\n                    removes.push(this.splice(index, 1));\n                }\n            }\n            return bulk ? removes : removes[0];\n        }\n    }, {\n        key: \"disable\",\n        value: function disable() {\n            this.element.addClassName(\"flagrate-disabled\");\n            return this;\n        }\n    }, {\n        key: \"enable\",\n        value: function enable() {\n            this.element.removeClassName(\"flagrate-disabled\");\n            return this;\n        }\n    }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n            return !this.element.hasClassName(\"flagrate-disabled\");\n        }\n    }, {\n        key: \"_create\",\n        value: function _create() {\n            var _this3 = this;\n\n            if (this._opt.disableCheckbox === false && this._opt.disableSelect === false && this._opt.multiSelect === true) {\n                this._checkbox = new _checkbox.Checkbox({\n                    onCheck: this.selectAll.bind(this),\n                    onUncheck: this.deselectAll.bind(this)\n                }).insertTo(new _element.Element(\"th\", { \"class\": \"flagrate-grid-cell-checkbox\" }).insertTo(this._tr));\n            }\n            for (var i = 0, l = this._cols.length; i < l; i++) {\n                var col = this._cols[i];\n                col._id = this._id + \"-col-\" + col.key;\n                col._th = new _element.Element(\"th\").insertTo(this._tr);\n                if (col.id) {\n                    col._th.writeAttribute(\"id\", col.id);\n                }\n                if (col.className) {\n                    col._th.writeAttribute(\"class\", col.className);\n                }\n                if (col.attribute) {\n                    col._th.writeAttribute(col.attribute);\n                }\n                if (col.style) {\n                    col._th.setStyle(col.style);\n                }\n                col._th.addClassName(col._id);\n                var width = !!col.width ? col.width.toString(10) + \"px\" : \"auto\";\n                this._style.insertText(\".\" + col._id + \"{width:\" + width + \"}\");\n                if (col.align) {\n                    col._th.style.textAlign = col.align;\n                }\n                col._div = new _element.Element().insertTo(col._th);\n                if (col.label) {\n                    col._div.updateText(col.label);\n                }\n                if (col.icon) {\n                    col._div.addClassName(\"flagrate-icon\");\n                    col._div.setStyle({\n                        backgroundImage: \"url(\" + col.icon + \")\"\n                    });\n                }\n                if (this._opt.disableResize === false && !col.disableResize) {\n                    col._resizeHandle = new _element.Element(\"div\", {\n                        \"class\": \"flagrate-grid-col-resize-handle\"\n                    }).insertTo(this.element);\n                    col._resizeHandle.onmousedown = this._createResizeHandleOnMousedownHandler(col);\n                }\n                if (this._opt.disableSort === false && !col.disableSort) {\n                    col._th.addClassName(\"flagrate-grid-col-sortable\");\n                    col._th.onclick = this._createColOnClickHandler(col);\n                }\n            }\n            this._lastCol = new _element.Element(\"th\", { \"class\": this._id + \"-col-last\" }).insertTo(this._tr);\n            this._style.insertText(\".\" + this._id + \"-col-last:after{right:0}\");\n            // pagination (testing)\n            if (this._opt.pagination) {\n                this.element.addClassName(\"flagrate-grid-pagination\");\n                // pager container\n                this._pager = new _toolbar.Toolbar({\n                    className: \"flagrate-grid-pager\",\n                    items: [{\n                        key: \"rn\",\n                        element: new _element.Element(\"span\").insertText(\"-\")\n                    }, {\n                        key: \"first\",\n                        element: new _button.Button({\n                            className: \"flagrate-grid-pager-first\",\n                            onSelect: function onSelect() {\n                                _this3._pagePosition = 0;\n                                _this3._requestRender();\n                            }\n                        })\n                    }, {\n                        key: \"prev\",\n                        element: new _button.Button({\n                            className: \"flagrate-grid-pager-prev\",\n                            onSelect: function onSelect() {\n                                --_this3._pagePosition;\n                                _this3._requestRender();\n                            }\n                        })\n                    }, {\n                        key: \"num\",\n                        element: new _element.Element(\"span\", { \"class\": \"flagrate-grid-pager-num\" }).insertText(\"-\")\n                    }, {\n                        key: \"next\",\n                        element: new _button.Button({\n                            className: \"flagrate-grid-pager-next\",\n                            onSelect: function onSelect() {\n                                ++_this3._pagePosition;\n                                _this3._requestRender();\n                            }\n                        })\n                    }, {\n                        key: \"last\",\n                        element: new _button.Button({\n                            className: \"flagrate-grid-pager-last\",\n                            onSelect: function onSelect() {\n                                _this3._pagePosition = Math.floor(_this3._rows.length / _this3._opt.numberOfRowsPerPage);\n                                _this3._requestRender();\n                            }\n                        })\n                    }]\n                }).insertTo(this.element);\n            }\n            if (this._opt.fill) {\n                this.element.addClassName(\"flagrate-grid-fill\");\n                this._body.onscroll = this._createBodyOnScrollHandler();\n            } else {\n                this.element.onscroll = this._createOnScrollHandler();\n            }\n            if (this._opt.disableResize === false) {\n                this._layoutUpdater();\n            }\n            return this;\n        }\n    }, {\n        key: \"_layoutUpdater\",\n        value: function _layoutUpdater() {\n            var _this4 = this;\n\n            if (this._layoutInterval) {\n                clearInterval(this._layoutInterval);\n            }\n            this._layoutInterval = setInterval(function () {\n                if (_this4.element.exists() === false) {\n                    clearInterval(_this4._layoutInterval);\n                    return;\n                }\n                _this4._requestUpdateLayout();\n            }, 1000);\n        }\n    }, {\n        key: \"_requestUpdateLayout\",\n        value: function _requestUpdateLayout() {\n            var _this5 = this;\n\n            if (this._layoutWidth === this.element.clientWidth) {\n                return;\n            }\n            if (this._layoutTimer) {\n                clearTimeout(this._layoutTimer);\n            }\n            this._layoutTimer = setTimeout(function () {\n                _this5._layoutWidth = _this5.element.clientWidth;\n                _this5._updateLayoutOfCols();\n                _this5._updatePositionOfResizeHandles();\n            }, 0);\n        }\n    }, {\n        key: \"_requestRender\",\n        value: function _requestRender() {\n            if (this._renderTimer) {\n                clearTimeout(this._renderTimer);\n            }\n            this._renderTimer = setTimeout(this._render.bind(this), 0);\n            return this;\n        }\n    }, {\n        key: \"_render\",\n        value: function _render() {\n            if (!!this.onRender && this.onRender(this) === false) {\n                return this;\n            }\n            var isCheckable = this._opt.disableCheckbox === false && this._opt.disableSelect === false && this._opt.multiSelect === true;\n            var i = void 0,\n                j = void 0,\n                row = void 0,\n                col = void 0,\n                cell = void 0,\n                pl = void 0,\n                pages = void 0,\n                from = void 0,\n                to = void 0;\n            var rl = this._rows.length;\n            var cl = this._cols.length;\n            if (this._opt.pagination) {\n                pl = 0;\n                pages = Math.ceil(rl / this._opt.numberOfRowsPerPage);\n                if (pages <= this._pagePosition) {\n                    this._pagePosition = pages - 1;\n                }\n                if (this._pagePosition <= 0) {\n                    this._pagePosition = 0;\n                }\n                from = this._pagePosition * this._opt.numberOfRowsPerPage;\n                to = from + this._opt.numberOfRowsPerPage;\n            }\n            this._tbody.update();\n            for (i = 0; i < rl; i++) {\n                if (this._opt.pagination) {\n                    if (i < from) {\n                        continue;\n                    }\n                    if (i >= to) {\n                        break;\n                    }\n                    ++pl;\n                }\n                row = this._rows[i];\n                if (row._tr) {\n                    row._tr.insertTo(this._tbody);\n                    continue;\n                }\n                // init row\n                row._grid = this;\n                row._tr = new _element.Element(\"tr\").insertTo(this._tbody);\n                if (row.id) {\n                    row._tr.id = row.id;\n                }\n                if (row.className) {\n                    row._tr.className = row.className;\n                }\n                if (row.attribute) {\n                    row._tr.writeAttribute(row.attribute);\n                }\n                if (row.style) {\n                    row._tr.setStyle(row.style);\n                }\n                if (row.onClick || this.onClick || this._opt.disableSelect === false) {\n                    if (this._opt.disableSelect === false) {\n                        row._tr.addClassName(\"flagrate-grid-row-selectable\");\n                    }\n                    if (row.onClick || this.onClick) {\n                        row._tr.addClassName(\"flagrate-grid-row-clickable\");\n                    }\n                    row._tr.onclick = this._createRowOnClickHandler(row);\n                }\n                if (row.onDblClick || this.onDblClick) {\n                    row._tr.ondblclick = this._createRowOnDblClickHandler(row);\n                }\n                if (isCheckable && !row._checkbox) {\n                    row._checkbox = new _checkbox.Checkbox({\n                        onChange: this._createRowOnCheckHandler(row)\n                    }).insertTo(new _element.Element(\"td\", { \"class\": \"flagrate-grid-cell-checkbox\" }).insertTo(row._tr));\n                }\n                if (row.isSelected === true) {\n                    this.select(row);\n                }\n                for (j = 0; j < cl; j++) {\n                    col = this._cols[j];\n                    cell = row.cell[col.key] === undefined ? row.cell[col.key] = {} : row.cell[col.key];\n                    if (typeof cell === \"string\" || typeof cell === \"number\") {\n                        cell = row.cell[col.key] = { text: cell };\n                    }\n                    if (cell._td) {\n                        cell._td.insertTo(row._tr);\n                        continue;\n                    }\n                    // init cell\n                    cell._td = new _element.Element(\"td\").insertTo(row._tr);\n                    if (cell.id) {\n                        cell._td.id = cell.id;\n                    }\n                    if (cell.className) {\n                        cell._td.className = cell.className;\n                    }\n                    if (cell.attribute) {\n                        cell._td.writeAttribute(cell.attribute);\n                    }\n                    if (cell.style) {\n                        cell._td.setStyle(cell.style);\n                    }\n                    if (col.align) {\n                        cell._td.style.textAlign = col.align;\n                    }\n                    cell._td.addClassName(col._id);\n                    // init cell content\n                    cell._div = new _element.Element().insertTo(cell._td);\n                    if (cell.text !== undefined) {\n                        cell._div.updateText(cell.text);\n                    }\n                    if (cell.html) {\n                        cell._div.update(cell.html);\n                    }\n                    if (cell.element) {\n                        cell._div.update(cell.element);\n                    }\n                    if (cell.icon) {\n                        cell._div.addClassName(\"flagrate-icon\");\n                        cell._div.style.backgroundImage = \"url(\" + cell.icon + \")\";\n                    }\n                    if (cell.onClick) {\n                        cell._td.addClassName(\"flagrate-grid-cell-clickable\");\n                        cell._td.onclick = this._createCellOnClickHandler(cell);\n                    }\n                    if (cell.onDblClick) {\n                        cell._td.ondblclick = this._createCellOnDblClickHandler(cell);\n                    }\n                    // redefine props\n                    Object.defineProperties(cell, cellProps);\n                    // post-processing\n                    if (cell.postProcess) {\n                        cell.postProcess.call(this, cell._td, cell, this);\n                    }\n                }\n                if (!row._last) {\n                    row._last = new _element.Element(\"td\", { \"class\": this._id + \"-col-last\" });\n                }\n                row._last.insertTo(row._tr);\n                // menu\n                if (row.menuItems) {\n                    this._updateRowMenu(row, row.menuItems);\n                }\n                // redefine props\n                Object.defineProperties(row, rowProps);\n                // post-processing\n                if (row.postProcess) {\n                    row.postProcess.call(this, row._tr, row, this);\n                }\n                if (this.postProcessOfRow) {\n                    this.postProcessOfRow(row._tr, row, this);\n                }\n            } //<--for\n            if (this._opt.pagination) {\n                this._pager.getElementByKey(\"rn\").updateText(from + 1 + \" - \" + (from + pl) + \" / \" + rl);\n                this._pager.getElementByKey(\"num\").updateText(this._pagePosition + 1 + \" / \" + pages);\n            }\n            if (this._opt.disableResize === false) {\n                if (this._opt.fill) {\n                    this._head.style.right = this._body.offsetWidth - this._body.clientWidth + \"px\";\n                    this._head.scrollLeft = this._body.scrollLeft;\n                }\n                this._requestUpdateLayout();\n            }\n            if (this.onRendered) {\n                this.onRendered(this);\n            }\n            return this;\n        }\n    }, {\n        key: \"_updateRowMenu\",\n        value: function _updateRowMenu(row, items) {\n            if (row._menu) {\n                row._menu.remove();\n                delete row._menu;\n            }\n            if (items && items.length !== 0) {\n                row._last.addClassName(\"flagrate-grid-cell-menu\");\n                row._menu = new _contextMenu.ContextMenu({\n                    target: row._tr,\n                    items: items\n                });\n                if (!row._last.onclick) {\n                    row._last.onclick = row._grid._createLastRowOnClickHandler(row);\n                }\n            } else {\n                row._last.removeClassName(\"flagrate-grid-cell-menu\");\n            }\n        }\n    }, {\n        key: \"_updatePositionOfResizeHandles\",\n        value: function _updatePositionOfResizeHandles() {\n            var adj = this._opt.fill ? -this._body.scrollLeft : 0;\n            var col = void 0;\n            for (var i = 0, l = this._cols.length; i < l; i++) {\n                col = this._cols[i];\n                if (col._resizeHandle) {\n                    col._resizeHandle.style.left = col._th.offsetLeft + col._th.getWidth() + adj + \"px\";\n                }\n            }\n        }\n    }, {\n        key: \"_updateLayoutOfCols\",\n        value: function _updateLayoutOfCols(surplus) {\n            var _this6 = this;\n\n            var fixed = true;\n            var minimized = 0;\n            var col = void 0;\n            for (var i = 0, l = this._cols.length; i < l; i++) {\n                col = this._cols[i];\n                if (col.width) {\n                    continue;\n                }\n                var width = \"auto\";\n                var minWidth = col.minWidth === undefined ? this._opt.colMinWidth : col.minWidth;\n                if (surplus) {\n                    width = surplus + \"px\";\n                } else if (minWidth >= col._th.getWidth()) {\n                    width = minWidth + \"px\";\n                    ++minimized;\n                } else {\n                    fixed = false;\n                }\n                this._style.updateText(this._style.innerHTML.replace(new RegExp(\"(\" + col._id + \"{width:)([^}]*)}\"), \"$1\" + width + \"}\"));\n            }\n            if (fixed) {\n                this.element.addClassName(\"flagrate-grid-fixed\");\n            } else {\n                this.element.removeClassName(\"flagrate-grid-fixed\");\n            }\n            setTimeout(function () {\n                var base = _this6._opt.fill ? _this6._body : _this6.element;\n                _this6._style.updateText(_this6._style.innerHTML.replace(new RegExp(\"(\" + _this6._id + \"-col-last:after{right:)([^}]*)}\"), \"$1\" + (base.scrollWidth - base.clientWidth - base.scrollLeft) + \"px!important}\"));\n                var _surplus = _this6._lastCol.getWidth();\n                if (fixed && !surplus && _surplus && minimized) {\n                    _this6._updateLayoutOfCols(Math.floor(_surplus / minimized));\n                }\n            }, 0);\n        }\n    }, {\n        key: \"_createOnScrollHandler\",\n        value: function _createOnScrollHandler() {\n            var _this7 = this;\n\n            return function (e) {\n                if (_this7._opt.disableResize === false) {\n                    _this7._updateLayoutOfCols();\n                }\n            };\n        }\n    }, {\n        key: \"_createBodyOnScrollHandler\",\n        value: function _createBodyOnScrollHandler() {\n            var _this8 = this;\n\n            return function (e) {\n                _this8._head.style.right = _this8._body.offsetWidth - _this8._body.clientWidth + \"px\";\n                _this8._head.scrollLeft = _this8._body.scrollLeft;\n                if (_this8._opt.disableResize === false) {\n                    _this8._updateLayoutOfCols();\n                    _this8._updatePositionOfResizeHandles();\n                }\n            };\n        }\n    }, {\n        key: \"_createColOnClickHandler\",\n        value: function _createColOnClickHandler(col) {\n            var _this9 = this;\n\n            return function (e) {\n                _this9.sort(col.key, !col.isAsc);\n            };\n        }\n    }, {\n        key: \"_createRowOnClickHandler\",\n        value: function _createRowOnClickHandler(row) {\n            var _this10 = this;\n\n            return function (e) {\n                if (/firefox/i.test(navigator.userAgent) === true) {\n                    window.event = e;\n                }\n                if (_this10.isEnabled() === false) {\n                    return;\n                }\n                if (row.onClick) {\n                    row.onClick.call(_this10, e, row, _this10);\n                }\n                if (_this10.onClick) {\n                    _this10.onClick(e, row, _this10);\n                }\n                if (_this10._opt.disableSelect === false) {\n                    if (row.isSelected === true) {\n                        _this10.deselect(row);\n                    } else {\n                        _this10.select(row);\n                    }\n                }\n                if (row._checkbox) {\n                    row._checkbox.focus();\n                }\n                return false;\n            };\n        }\n    }, {\n        key: \"_createRowOnDblClickHandler\",\n        value: function _createRowOnDblClickHandler(row) {\n            var _this11 = this;\n\n            return function (e) {\n                if (/firefox/i.test(navigator.userAgent) === true) {\n                    window.event = e;\n                }\n                if (_this11.isEnabled() === false) {\n                    return;\n                }\n                if (row.onDblClick) {\n                    row.onDblClick.call(_this11, e, row, _this11);\n                }\n                if (_this11.onDblClick) {\n                    _this11.onDblClick(e, row, _this11);\n                }\n            };\n        }\n    }, {\n        key: \"_createCellOnClickHandler\",\n        value: function _createCellOnClickHandler(cell) {\n            var _this12 = this;\n\n            return function (e) {\n                if (_this12.isEnabled() === false) {\n                    return;\n                }\n                if (cell.onClick) {\n                    cell.onClick.call(_this12, e, cell, _this12);\n                }\n            };\n        }\n    }, {\n        key: \"_createCellOnDblClickHandler\",\n        value: function _createCellOnDblClickHandler(cell) {\n            var _this13 = this;\n\n            return function (e) {\n                if (_this13.isEnabled() === false) {\n                    return;\n                }\n                if (cell.onDblClick) {\n                    cell.onDblClick.call(_this13, e, cell, _this13);\n                }\n            };\n        }\n    }, {\n        key: \"_createRowOnCheckHandler\",\n        value: function _createRowOnCheckHandler(row) {\n            var _this14 = this;\n\n            return function (e) {\n                if (_this14.isEnabled() === false) {\n                    if (e.targetCheckbox.isChecked() === true) {\n                        e.targetCheckbox.uncheck();\n                    } else {\n                        e.targetCheckbox.check();\n                    }\n                    return;\n                }\n                if (_this14._opt.disableSelect === false) {\n                    if (row._checkbox.isChecked() === true) {\n                        _this14.select(row);\n                    } else {\n                        _this14.deselect(row);\n                    }\n                }\n            };\n        }\n    }, {\n        key: \"_createLastRowOnClickHandler\",\n        value: function _createLastRowOnClickHandler(row) {\n            var _this15 = this;\n\n            return function (e) {\n                if (_this15.isEnabled() === false) {\n                    return;\n                }\n                e.stopPropagation();\n                if (row._menu) {\n                    row._menu.open(e);\n                }\n            };\n        }\n    }, {\n        key: \"_createResizeHandleOnMousedownHandler\",\n        value: function _createResizeHandleOnMousedownHandler(col) {\n            var _this16 = this;\n\n            return function (e) {\n                //e.stopPropagation();\n                e.preventDefault();\n                var current = e.clientX;\n                var origin = current;\n                var onMove = function onMove(e) {\n                    e.preventDefault();\n                    var delta = e.clientX - current;\n                    current += delta;\n                    col._resizeHandle.style.left = parseInt(col._resizeHandle.style.left.replace(\"px\", \"\"), 10) + delta + \"px\";\n                };\n                var onUp = function onUp(e) {\n                    e.preventDefault();\n                    document.removeEventListener(\"mousemove\", onMove, true);\n                    document.removeEventListener(\"mouseup\", onUp, true);\n                    var minWidth = col.minWidth === undefined ? _this16._opt.colMinWidth : col.minWidth;\n                    var delta = e.clientX - origin;\n                    var width = col._th.getWidth() + delta;\n                    width = col.width = Math.max(width, minWidth);\n                    _this16._style.updateText(_this16._style.innerHTML.replace(new RegExp(\"(\" + col._id + \"{width:)([^}]*)}\"), \"$1\" + width + \"px}\"));\n                    _this16._updateLayoutOfCols();\n                    _this16._updatePositionOfResizeHandles();\n                };\n                document.addEventListener(\"mousemove\", onMove, true);\n                document.addEventListener(\"mouseup\", onUp, true);\n            };\n        }\n    }, {\n        key: \"headless\",\n        get: function get() {\n            return this.element.hasClassName(\"flagrate-grid-headless\");\n        },\n        set: function set(enable) {\n            if (enable) {\n                this.element.addClassName(\"flagrate-grid-headless\");\n            } else {\n                this.element.removeClassName(\"flagrate-grid-headless\");\n            }\n        }\n    }, {\n        key: \"fill\",\n        get: function get() {\n            return this.element.hasClassName(\"flagrate-grid-fill\");\n        },\n        set: function set(enable) {\n            if (enable) {\n                this.element.addClassName(\"flagrate-grid-fill\");\n                this._body.onscroll = this._createBodyOnScrollHandler();\n            } else {\n                this.element.removeClassName(\"flagrate-grid-fill\");\n                this.element.onscroll = this._createOnScrollHandler();\n            }\n            this._requestRender();\n        }\n    }, {\n        key: \"rows\",\n        get: function get() {\n            return this._rows;\n        },\n        set: function set(rows) {\n            this._rows = rows;\n            this._requestRender();\n        }\n    }, {\n        key: \"sortedByKey\",\n        get: function get() {\n            return this._sortedByKey;\n        }\n    }, {\n        key: \"sortedByAsc\",\n        get: function get() {\n            return this._sortedByAsc;\n        }\n    }, {\n        key: \"selectedRows\",\n        get: function get() {\n            return this.getSelectedRows();\n        },\n        set: function set(rows) {\n            this.select(rows);\n        }\n    }]);\n\n    return Grid;\n}();\n\nGrid.idCounter = 0;\nfunction createGrid(a) {\n    return new Grid(a);\n}\n/** get value of row */\nfunction getValue() {\n    var row = this;\n    if (row.value !== undefined) {\n        return row.value;\n    }\n    var ret = {};\n    for (var key in row.cell) {\n        if (_typeof(row.cell[key]) === \"object\" && row.cell[key].value !== undefined) {\n            ret[key] = row.cell[key].value;\n        }\n    }\n    return ret;\n}\nvar hiddenProp = { enumerable: false };\nvar rowProps = {\n    _checkbox: hiddenProp,\n    _grid: hiddenProp,\n    _last: hiddenProp,\n    _menu: hiddenProp,\n    _tr: hiddenProp,\n    className: hiddenProp,\n    attribute: hiddenProp,\n    style: hiddenProp,\n    postProcess: hiddenProp,\n    tr: {\n        enumerable: true,\n        get: function get() {\n            return this._tr;\n        }\n    },\n    id: {\n        enumerable: true,\n        get: function get() {\n            return this._tr.id || undefined;\n        },\n        set: function set(id) {\n            this._tr.id = id;\n        }\n    },\n    menuItems: {\n        enumerable: true,\n        get: function get() {\n            if (this._menu) {\n                return this._menu.items;\n            }\n        },\n        set: function set(items) {\n            this._grid._updateRowMenu(this, items);\n        }\n    }\n};\nvar cellProps = {\n    _td: hiddenProp,\n    _div: hiddenProp,\n    className: hiddenProp,\n    attribute: hiddenProp,\n    style: hiddenProp,\n    postProcess: hiddenProp,\n    td: {\n        enumerable: true,\n        get: function get() {\n            return this._td;\n        }\n    },\n    div: {\n        enumerable: true,\n        get: function get() {\n            return this._div;\n        }\n    },\n    id: {\n        enumerable: true,\n        get: function get() {\n            return this._td.id || undefined;\n        },\n        set: function set(id) {\n            this._td.id = id;\n        }\n    },\n    align: {\n        enumerable: true,\n        get: function get() {\n            return this._td.style.textAlign || undefined;\n        },\n        set: function set(align) {\n            this._td.style.textAlign = align;\n        }\n    },\n    text: {\n        enumerable: false,\n        get: function get() {\n            return this._div.innerText;\n        },\n        set: function set(text) {\n            this._div.updateText(text);\n        }\n    },\n    html: {\n        enumerable: false,\n        get: function get() {\n            return this._div.innerHTML;\n        },\n        set: function set(html) {\n            this._div.update(html);\n        }\n    },\n    element: {\n        enumerable: false,\n        get: function get() {\n            return this._div.firstChild;\n        },\n        set: function set(element) {\n            this._div.update(element);\n        }\n    },\n    icon: {\n        enumerable: true,\n        get: function get() {\n            return this._div.style.backgroundImage.replace(/(.*url\\()([^)]+)(\\).*)/, \"$2\") || undefined;\n        },\n        set: function set(url) {\n            var cell = this;\n            if (url) {\n                cell._div.addClassName(\"flagrate-icon\");\n                cell._div.style.backgroundImage = \"url(\" + url + \")\";\n            } else {\n                cell._div.removeClassName(\"flagrate-icon\");\n                cell._div.style.backgroundImage = \"\";\n            }\n        }\n    }\n};\n\n\n\n},{\"./button\":1,\"./checkbox\":3,\"./context-menu\":6,\"./element\":7,\"./toolbar\":26}],10:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Menu = undefined;\nexports.createMenu = createMenu;\n\nvar _util = require(\"./util\");\n\nvar _element = require(\"./element\");\n\nvar _button = require(\"./button\");\n\nvar button = _interopRequireWildcard(_button);\n\nvar _buttons = require(\"./buttons\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n/*?\n    flagrate.createMenu(option)\n    new flagrate.Menu(option)\n    - option (Object) - options.\n\n    Menu.\n\n    #### option\n\n    * `id`                       (String): `id` attribute of container element.\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `items`                    (Array): of item\n    * `onSelect`                 (Function):\n\n    #### item\n\n    * `key`                      (String):\n    * `label`                    (String; default `\"\"`):\n    * `icon`                     (String):\n    * `isDisabled`               (Boolean; default `false`):\n    * `onSelect`                 (Function):\n**/\nfunction FMenu() {\n    var option = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    option.items = option.items || [];\n    this.onSelect = option.onSelect || _util.emptyFunction;\n    var attr = option.attribute || {};\n    if (option.id) {\n        attr[\"id\"] = option.id;\n    }\n    // create a container\n    var container = new _element.Element(\"div\", attr);\n    (0, _util.extendObject)(container, this);\n    container.addClassName(\"flagrate flagrate-menu\");\n    if (option.className) {\n        container.addClassName(option.className);\n    }\n    if (option.style) {\n        container.setStyle(option.style);\n    }\n    for (var i = 0, l = option.items.length; i < l; i++) {\n        container.push(option.items[i]);\n    }\n    container.addEventListener(\"click\", function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n    });\n    container.addEventListener(\"mouseup\", function (e) {\n        e.stopPropagation();\n    });\n    return container;\n}\nvar Menu = exports.Menu = FMenu;\nfunction createMenu(option) {\n    return new Menu(option);\n}\nMenu.prototype = {\n    push: function push(option) {\n        var _this = this;\n\n        if (typeof option === \"string\") {\n            new _element.Element(\"hr\").insertTo(this);\n        } else {\n            (function () {\n                var _onSelect = option.onSelect;\n                option.onSelect = function (e, button) {\n                    if (_onSelect) {\n                        _onSelect.call(button, e, button);\n                    }\n                    _this.onSelect(e, _this);\n                };\n                var btn = new button.Button(option).insertTo(_this);\n                if (option.key) {\n                    btn.dataset[\"_key\"] = option.key;\n                }\n            })();\n        }\n        return this;\n    },\n\n    getButtonByKey: _buttons.Buttons.prototype.getButtonByKey,\n    getButtons: _buttons.Buttons.prototype.getButtons\n};\n\n\n\n},{\"./button\":1,\"./buttons\":2,\"./element\":7,\"./util\":28}],11:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Modal = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.createModal = createModal;\n\nvar _element = require(\"./element\");\n\nvar _button = require(\"./button\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*?\n    flagrate.createModal(option)\n    new flagrate.Modal(option)\n    - option (Object) - configuration for the modal.\n\n    Create and initialize the modal.\n\n    #### option\n\n    * `target`                   (Element; default `document.body`):\n    * `id`                       (String):\n    * `className`                (String):\n    * `title`                    (String):\n    * `subtitle`                 (String):\n    * `text`                     (String):\n    * `html`                     (String):\n    * `element`                  (Element):\n    * `href`                     (String):\n    * `buttons`                  (Array): of button object.\n    * `sizing`                   (String;  default `\"flex\"`; `\"flex\"` | `\"full\"`):\n    * `onBeforeClose`            (Function):\n    * `onClose`                  (Function):\n    * `onShow`                   (Function):\n    * `disableCloseButton`       (Boolean; default `false`):\n    * `disableCloseByMask`       (Boolean; default `false`):\n    * `disableCloseByEsc`        (Boolean; default `false`):\n\n    #### button\n\n    * `key`                      (String):\n    * `label`                    (String; required):\n    * `icon`                     (String):\n    * `color`                    (String):\n    * `onSelect`                 (Function):\n    * `isFocused`                (Boolean; default `false`):\n    * `isDisabled`               (Boolean; default `false`):\n    * `className`                (String):\n**/\n\nvar Modal = exports.Modal = function () {\n    function Modal() {\n        var _opt = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n        _classCallCheck(this, Modal);\n\n        this._opt = _opt;\n        this._buttons = [];\n        this._close = this.close.bind(this);\n        this.__onKeydownHandler = this._onKeydownHandler.bind(this);\n        if (!_opt.target) {\n            _opt.target = document.body;\n        }\n        if (!_opt.sizing) {\n            _opt.sizing = \"flex\";\n        }\n        if (_opt.disableCloseButton === undefined) {\n            _opt.disableCloseButton = false;\n        }\n        if (_opt.disableCloseByMask === undefined) {\n            _opt.disableCloseByMask = false;\n        }\n        if (_opt.disableCloseByEsc === undefined) {\n            _opt.disableCloseByEsc = false;\n        }\n        if (_opt[\"description\"]) {\n            this._opt[\"description\"] = _opt[\"description\"];\n        }\n        if (_opt.buttons) {\n            this._buttons = _opt.buttons;\n        }\n        if (_opt.onBeforeClose) {\n            this.onBeforeClose = _opt.onBeforeClose;\n        }\n        if (_opt.onClose) {\n            this.onClose = _opt.onClose;\n        }\n        if (_opt.onShow) {\n            this.onShow = _opt.onShow;\n        }\n        if (this._buttons.length === 0) {\n            this._buttons = [{\n                label: \"OK\",\n                color: \"@primary\",\n                onSelect: this._close,\n                isFocused: true\n            }];\n        }\n        this._create();\n    }\n\n    _createClass(Modal, [{\n        key: \"setId\",\n        value: function setId(id) {\n            this._container.id = id;\n            return this;\n        }\n    }, {\n        key: \"setClassName\",\n        value: function setClassName(className) {\n            this._container.className = className;\n            return this;\n        }\n    }, {\n        key: \"setContent\",\n        value: function setContent(div) {\n            this._opt.content = div;\n            this._middle.update(div);\n            return this;\n        }\n    }, {\n        key: \"setSizing\",\n        value: function setSizing(sizing) {\n            this._container.removeClassName(\"flagrate-sizing-\" + this._opt.sizing);\n            this._container.addClassName(\"flagrate-sizing-\" + sizing);\n            this._opt.sizing = sizing;\n            return this;\n        }\n    }, {\n        key: \"setElement\",\n        value: function setElement(element) {\n            this._opt.element = element;\n            this._content.update(element);\n            return this;\n        }\n    }, {\n        key: \"setHTML\",\n        value: function setHTML(html) {\n            this._opt.html = html;\n            this._content.update(html);\n            return this;\n        }\n    }, {\n        key: \"setText\",\n        value: function setText(text) {\n            this._opt.text = text;\n            this._content.updateText(text);\n            return this;\n        }\n    }, {\n        key: \"setTitle\",\n        value: function setTitle(title) {\n            this._opt.title = title;\n            this._title.updateText(title);\n            return this;\n        }\n    }, {\n        key: \"setSubtitle\",\n        value: function setSubtitle(subtitle) {\n            this._opt.subtitle = subtitle;\n            this._subtitle.updateText(subtitle);\n            return this;\n        }\n    }, {\n        key: \"visible\",\n        value: function visible() {\n            return this._container.hasClassName(\"flagrate-modal-visible\");\n        }\n    }, {\n        key: \"open\",\n        value: function open() {\n            var _this = this;\n\n            if (this.visible() === true) {\n                return this;\n            }\n            // make free\n            if (document.activeElement && document.activeElement[\"blur\"]) {\n                document.activeElement.blur();\n            }\n            window.getSelection().removeAllRanges();\n            if (this._closingTimer) {\n                clearTimeout(this._closingTimer);\n            }\n            _element.Element.insert(this._opt.target, this._container);\n            setTimeout(function () {\n                return _this._container.addClassName(\"flagrate-modal-visible\");\n            }, 0);\n            // Callback: onShow\n            if (this.onShow) {\n                this.onShow(this);\n            }\n            this._positioning();\n            // focus to primary button\n            if (this._buttons[0]) {\n                this._buttons[0]._button.focus();\n            }\n            window.addEventListener(\"keydown\", this.__onKeydownHandler, true);\n            return this;\n        }\n        /** DEPRECATED */\n\n    }, {\n        key: \"show\",\n        value: function show() {\n            return this.open();\n        }\n        /** DEPRECATED */\n\n    }, {\n        key: \"render\",\n        value: function render() {\n            return this.open();\n        }\n    }, {\n        key: \"close\",\n        value: function close(e) {\n            var _this2 = this;\n\n            if (this.visible() === false) {\n                return this;\n            }\n            this._container.removeClassName(\"flagrate-modal-visible\");\n            if (e) {\n                e.stopPropagation();\n                e.preventDefault();\n            }\n            // Callback: onBeforeClose\n            if (this.onBeforeClose) {\n                if (this.onBeforeClose(this, e) === false) {\n                    return this; //abort closing\n                }\n            }\n            clearTimeout(this._positioningTimer);\n            this._closingTimer = setTimeout(function () {\n                return _this2._container.remove();\n            }, 1000);\n            window.removeEventListener(\"keydown\", this.__onKeydownHandler, true);\n            // Callback: onClose\n            if (this.onClose) {\n                this.onClose(this, e);\n            }\n            return this;\n        }\n    }, {\n        key: \"getButtonByKey\",\n        value: function getButtonByKey(key) {\n            var result = null;\n            var buttons = this._buttons;\n            for (var i = 0; i < buttons.length; i++) {\n                if (!buttons[i].key) {\n                    continue;\n                }\n                if (buttons[i].key === key) {\n                    result = buttons[i]._button;\n                    break;\n                }\n            }\n            return result;\n        }\n    }, {\n        key: \"getButtons\",\n        value: function getButtons() {\n            return this._buttons.map(function (button) {\n                return button._button;\n            });\n        }\n    }, {\n        key: \"setButtons\",\n        value: function setButtons(buttons) {\n            this._buttons = buttons;\n            this._createButtons();\n            return this;\n        }\n    }, {\n        key: \"_create\",\n        value: function _create() {\n            this._createBase();\n            this._createModal();\n            this._createButtons();\n        }\n    }, {\n        key: \"_createBase\",\n        value: function _createBase() {\n            this._container = new _element.Element(\"div\", {\n                id: this._opt.id,\n                \"class\": \"flagrate flagrate-modal flagrate-sizing-\" + this._opt.sizing\n            });\n            if (this._opt.className) {\n                this._container.addClassName(this._opt.className);\n            }\n            if (this._opt.target !== document.body) {\n                this._container.style.position = \"absolute\";\n            }\n            this._obi = new _element.Element().insertTo(this._container);\n            if (this._opt.disableCloseByMask === false) {\n                this._container.addEventListener(\"click\", this._close);\n            }\n        }\n    }, {\n        key: \"_createModal\",\n        value: function _createModal() {\n            this._modal = new _element.Element().insertTo(this._obi);\n            this._modal.addEventListener(\"click\", function (e) {\n                return e.stopPropagation();\n            });\n            this._closeButton = new _button.Button({\n                label: \"\",\n                onSelect: this._close\n            });\n            if (this._opt.disableCloseButton === false) {\n                this._closeButton.insertTo(this._modal);\n            }\n            this._header = new _element.Element(\"hgroup\").insertTo(this._modal);\n            this._title = new _element.Element(\"h1\").insertText(this._opt.title || \"\").insertTo(this._header);\n            this._subtitle = new _element.Element(\"small\").insertText(this._opt.subtitle || \"\").insertTo(this._header);\n            this._middle = new _element.Element().insertTo(this._modal);\n            if (this._opt.content) {\n                this._middle.insert(this._opt.content);\n            } else {\n                this._content = new _element.Element().insertTo(this._middle);\n                if (this._opt.element) {\n                    this._content.insert(this._opt.element);\n                } else if (this._opt.html) {\n                    this._content.insert(this._opt.html);\n                } else if (this._opt.text) {\n                    this._content.insertText(this._opt.text);\n                }\n            }\n            this._footer = new _element.Element(\"footer\").insertTo(this._modal);\n        }\n    }, {\n        key: \"_createButtons\",\n        value: function _createButtons() {\n            var _this3 = this;\n\n            if (this._footer.hasChildNodes() === true) {\n                this._footer.update();\n            }\n            this._buttons.forEach(function (button) {\n                button._button = new _button.Button({\n                    className: button.className,\n                    label: button.label,\n                    icon: button.icon,\n                    color: button.color,\n                    isFocused: button.isFocused || false,\n                    isDisabled: button.isDisabled,\n                    onSelect: function onSelect(e) {\n                        if (button.onSelect) {\n                            button.onSelect.call(e.targetButton, e, _this3);\n                        } else if (button[\"onClick\"]) {\n                            console.warn(\"ModalButton#onClick is deprecated. Use ModalButton#onSelect instead.\");\n                            button[\"onClick\"](e, _this3); // DEPRECATED\n                        }\n                    }\n                });\n                // DEPRECATED, This is for backward compatibility.\n                button._button[\"button\"] = button;\n                button[\"button\"] = button._button;\n                button[\"disable\"] = button._button.disable.bind(button._button);\n                button[\"enable\"] = button._button.enable.bind(button._button);\n                button[\"setColor\"] = button._button.setColor.bind(button._button);\n                _this3._footer.insert(button._button);\n            });\n        }\n    }, {\n        key: \"_positioning\",\n        value: function _positioning() {\n            var _this4 = this;\n\n            var baseWidth = -1;\n            var baseHeight = -1;\n            var modalWidth = -1;\n            var modalHeight = -1;\n            var update = function update() {\n                if (baseWidth !== _this4._container.getWidth() || baseHeight !== _this4._container.getHeight() || modalWidth !== _this4._modal.getWidth() || modalHeight !== _this4._modal.getHeight()) {\n                    baseWidth = _this4._container.getWidth();\n                    baseHeight = _this4._container.getHeight();\n                    modalWidth = _this4._modal.getWidth();\n                    modalHeight = _this4._modal.getHeight();\n                    if (_this4._opt.sizing === \"flex\") {\n                        if (baseWidth - 20 <= modalWidth) {\n                            _this4._modal.style.left = \"0\";\n                            _this4._middle.style.width = baseWidth + \"px\";\n                            _this4._middle.style.overflowX = \"auto\";\n                        } else {\n                            _this4._modal.style.left = Math.floor(baseWidth / 2 - modalWidth / 2) + \"px\";\n                            _this4._middle.style.width = \"\";\n                            _this4._middle.style.overflowX = \"visible\";\n                        }\n                        if (baseHeight - 20 <= modalHeight) {\n                            _this4._obi.style.top = \"10px\";\n                            _this4._obi.style.bottom = \"10px\";\n                            _this4._obi.style.height = \"\";\n                            _this4._middle.style.height = baseHeight - _this4._header.getHeight() - _this4._footer.getHeight() - 20 + \"px\";\n                            _this4._middle.style.overflowY = \"auto\";\n                        } else {\n                            _this4._obi.style.top = baseHeight / 2 - modalHeight / 2 + \"px\";\n                            _this4._obi.style.bottom = \"\";\n                            _this4._obi.style.height = modalHeight + \"px\";\n                            _this4._middle.style.height = \"\";\n                            _this4._middle.style.overflowY = \"visible\";\n                        }\n                    }\n                    if (_this4._opt.sizing === \"full\") {\n                        _this4._modal.style.right = \"10px\";\n                        _this4._modal.style.left = \"10px\";\n                        _this4._middle.style.overflowX = \"auto\";\n                        _this4._obi.style.top = \"10px\";\n                        _this4._obi.style.bottom = \"10px\";\n                        _this4._obi.style.height = \"\";\n                        _this4._middle.style.height = baseHeight - _this4._header.getHeight() - _this4._footer.getHeight() - 20 + \"px\";\n                        _this4._middle.style.overflowY = \"auto\";\n                    }\n                }\n                ;\n                _this4._positioningTimer = setTimeout(update, 30);\n            };\n            this._positioningTimer = setTimeout(update, 0);\n        }\n    }, {\n        key: \"_onKeydownHandler\",\n        value: function _onKeydownHandler(e) {\n            var active = document.activeElement && document.activeElement.tagName;\n            if (active !== \"BODY\" && active !== \"DIV\" && active !== \"BUTTON\") {\n                return;\n            }\n            if (window.getSelection().toString() !== \"\") {\n                return;\n            }\n            var activated = false;\n            // TAB:9\n            if (e.keyCode === 9 && active !== \"BUTTON\") {\n                activated = true;\n                if (this._closeButton) {\n                    this._closeButton.focus();\n                } else if (this._buttons[0]) {\n                    this._buttons[0]._button.focus();\n                }\n            }\n            // ENTER:13\n            if (e.keyCode === 13 && this._buttons[0] && active !== \"BUTTON\") {\n                activated = true;\n                this._buttons[0]._button.click();\n            }\n            // ESC:27\n            if (e.keyCode === 27 && this._opt.disableCloseByEsc === false) {\n                activated = true;\n                this.close();\n            }\n            if (activated === true) {\n                e.stopPropagation();\n                e.preventDefault();\n            }\n        }\n    }, {\n        key: \"buttons\",\n        get: function get() {\n            return this.getButtons();\n        },\n        set: function set(buttons) {\n            this.setButtons(buttons);\n        }\n    }, {\n        key: \"id\",\n        get: function get() {\n            return this._container.id;\n        },\n        set: function set(id) {\n            this._container.id = id;\n        }\n    }, {\n        key: \"className\",\n        get: function get() {\n            return this._container.className;\n        },\n        set: function set(className) {\n            this._container.className = className;\n        }\n    }, {\n        key: \"content\",\n        get: function get() {\n            return this._content;\n        },\n        set: function set(div) {\n            this.setContent(div);\n        }\n    }, {\n        key: \"sizing\",\n        get: function get() {\n            return this._opt.sizing;\n        },\n        set: function set(sizing) {\n            this.setSizing(sizing);\n        }\n    }, {\n        key: \"element\",\n        get: function get() {\n            return this._opt.element;\n        },\n        set: function set(element) {\n            this.setElement(element);\n        }\n    }, {\n        key: \"html\",\n        get: function get() {\n            return this._opt.html;\n        },\n        set: function set(html) {\n            this.setHTML(html);\n        }\n    }, {\n        key: \"text\",\n        get: function get() {\n            return this._opt.text;\n        },\n        set: function set(text) {\n            this.setText(text);\n        }\n    }, {\n        key: \"title\",\n        get: function get() {\n            return this._opt.title;\n        },\n        set: function set(title) {\n            this.setTitle(title);\n        }\n    }, {\n        key: \"subtitle\",\n        get: function get() {\n            return this._opt.subtitle;\n        },\n        set: function set(subtitle) {\n            this.setSubtitle(subtitle);\n        }\n    }]);\n\n    return Modal;\n}();\n\nfunction createModal(option) {\n    return new Modal(option);\n}\n\n\n\n},{\"./button\":1,\"./element\":7}],12:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Notify = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.createNotify = createNotify;\n\nvar _element = require(\"./element\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*?\n    flagrate.createNotify(option)\n    new flagrate.Notify(option)\n    - option (Object) - configuration for the notifications.\n\n    Initialize the notifications.\n\n    #### option\n\n    * `target`                (Element; default `document.body`):\n    * `className`             (String):\n    * `disableDesktopNotify`  (Boolean; default `false`):\n    * `disableFocusDetection` (Boolean; default `false`):\n    * `hAlign`                (String;  default `\"right\"`; `\"right\"` | `\"left\"`):\n    * `vAlign`                (String;  default `\"bottom\"`; `\"top\"` | `\"bottom\"`):\n    * `hMargin`               (Number;  default `10`):\n    * `vMargin`               (Number;  default `10`):\n    * `spacing`               (Number;  default `10`):\n    * `timeout`               (Number;  default `5`):\n    * `title`                 (String;  default `\"Notify\"`):\n**/\n\nvar Notify = exports.Notify = function () {\n    function Notify() {\n        var opt = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n        _classCallCheck(this, Notify);\n\n        this.target = document.body;\n        this.disableDesktopNotify = false;\n        this.disableFocusDetection = false;\n        this.hAlign = \"right\";\n        this.vAlign = \"bottom\";\n        this.hMargin = 10; //pixels\n        this.vMargin = 10; //pixels\n        this.spacing = 10; //pixels\n        this.timeout = 5; //seconds\n        this.title = \"Notify\";\n        this._notifies = [];\n        if (opt.target) {\n            this.target = opt.target;\n        }\n        if (opt.className) {\n            this.className = opt.className;\n        }\n        if (opt.disableDesktopNotify) {\n            this.disableDesktopNotify = opt.disableDesktopNotify;\n        }\n        if (opt.disableFocusDetection) {\n            this.disableFocusDetection = opt.disableFocusDetection;\n        }\n        if (opt.hAlign) {\n            this.hAlign = opt.hAlign;\n        }\n        if (opt.vAlign) {\n            this.vAlign = opt.vAlign;\n        }\n        if (opt.hMargin) {\n            this.hMargin = opt.hMargin;\n        }\n        if (opt.vMargin) {\n            this.vMargin = opt.vMargin;\n        }\n        if (opt.spacing) {\n            this.spacing = opt.spacing;\n        }\n        if (opt.timeout) {\n            this.timeout = opt.timeout;\n        }\n        if (opt.title) {\n            this.title = opt.title;\n        }\n        if (opt.icon) {\n            this.icon = opt.icon;\n        }\n        this._init();\n    }\n\n    _createClass(Notify, [{\n        key: \"create\",\n        value: function create() {\n            var _this = this;\n\n            var _opt = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n            var opt = void 0;\n            // sugar\n            if (typeof _opt === \"string\") {\n                opt = {\n                    text: _opt\n                };\n            } else {\n                opt = _opt;\n            }\n            /*- Desktop notify -*/\n            if (this.disableDesktopNotify === false) {\n                var hasFocus = !!document.hasFocus ? document.hasFocus() : false;\n                if (this.disableFocusDetection === false && hasFocus === false) {\n                    if (this._createDesktopNotify(opt) === true) {\n                        return this;\n                    }\n                }\n            }\n            /*- Setting up -*/\n            var title = opt.title || this.title;\n            var message = opt.message || opt.body || opt.content || opt.text || null;\n            var onClick = opt.onClick;\n            var onClose = opt.onClose;\n            var timeout = opt.timeout !== void 0 ? opt.timeout : this.timeout;\n            var icon = opt.icon || this.icon;\n            var isAlive = true;\n            var closeTimer = void 0;\n            /*- Positions -*/\n            var hPosition = this.hMargin;\n            var vPosition = this.vMargin;\n            /*- Create a new element for notify -*/\n            //\n            // <div class=\"flagrate-notify\">\n            //   <div class=\"title\">Notification</div>\n            //   <div class=\"text\">yadda yadda yadda..</div>\n            //   <div class=\"close\">&#xd7;</div>\n            // </div>\n            //\n            var notify = new _element.Element(\"div\", { \"class\": this.className });\n            notify.addClassName(\"flagrate flagrate-notify\");\n            new _element.Element(\"div\", { \"class\": \"title\" }).insertText(title).insertTo(notify);\n            new _element.Element(\"div\", { \"class\": \"text\" }).insertText(message).insertTo(notify);\n            var notifyClose = new _element.Element(\"div\", { \"class\": \"close\" }).update(\"&#xd7;\").insertTo(notify);\n            if (icon) {\n                notify.addClassName(\"flagrate-notify-icon\");\n                new _element.Element(\"div\", { \"class\": \"icon\" }).setStyle({ \"backgroundImage\": \"url(\" + icon + \")\" }).insertTo(notify);\n            }\n            /*- Remove a notify element -*/\n            var closeNotify = function closeNotify() {\n                if (isAlive === false) {\n                    return;\n                }\n                isAlive = false;\n                notify.style.opacity = \"0\";\n                //onClose event\n                if (onClose) {\n                    onClose.call(_this);\n                }\n                setTimeout(function () {\n                    _this.target.removeChild(notify);\n                    _this._notifies.splice(_this._notifies.indexOf(notify), 1);\n                    _this._positioner();\n                }, 300);\n            };\n            notifyClose.addEventListener(\"click\", function (e) {\n                e.stopPropagation();\n                e.preventDefault();\n                if (isAlive) {\n                    closeNotify();\n                }\n            }, false);\n            notify.style.display = \"none\";\n            notify.style.position = \"fixed\";\n            notify.style[this.hAlign] = hPosition + \"px\";\n            notify.style[this.vAlign] = vPosition + \"px\";\n            /*- onClick event -*/\n            if (!onClick) {\n                notify.addEventListener(\"click\", closeNotify);\n            } else {\n                notify.style.cursor = \"pointer\";\n                notify.addEventListener(\"click\", function (e) {\n                    e.stopPropagation();\n                    e.preventDefault();\n                    onClick.call(_this);\n                    closeNotify();\n                });\n            }\n            /*- Insert to the target -*/\n            this.target.appendChild(notify);\n            /*- Show notify -*/\n            notify.style.display = \"block\";\n            setTimeout(function () {\n                notify.style.opacity = \"1\";\n            }, 10);\n            /*- Set timeout -*/\n            if (timeout !== 0) {\n                (function () {\n                    var onTimeout = function onTimeout() {\n                        if (isAlive) {\n                            closeNotify();\n                        }\n                    };\n                    closeTimer = setTimeout(onTimeout, timeout * 1000);\n                    //Clear timeout\n                    notify.addEventListener(\"mouseover\", function () {\n                        clearTimeout(closeTimer);\n                        closeTimer = setTimeout(onTimeout, timeout * 1000);\n                    });\n                })();\n            }\n            this._notifies.push(notify);\n            this._positioner();\n            return this;\n        }\n    }, {\n        key: \"_init\",\n        value: function _init() {\n            if (this.disableDesktopNotify === false) {\n                /*- Check supported -*/\n                if (!window[\"Notification\"] || !window[\"Notification\"].permission) {\n                    this.disableDesktopNotify = true;\n                } else {\n                    /*- Check protocol -*/\n                    if (location.protocol !== \"file:\") {\n                        /*- Get Permissions -*/\n                        if (window[\"Notification\"].permission === \"default\") {\n                            this.create({\n                                text: \"Click here to Activate the Desktop Notifications...\",\n                                onClick: function onClick() {\n                                    window[\"Notification\"].requestPermission();\n                                }\n                            });\n                        }\n                    }\n                }\n            }\n        }\n    }, {\n        key: \"_createDesktopNotify\",\n        value: function _createDesktopNotify(opt) {\n            var _this2 = this;\n\n            /*- Setting up -*/\n            var title = opt.title || this.title;\n            var message = opt.message || opt.body || opt.content || opt.text || null;\n            var onClick = opt.onClick;\n            var onClose = opt.onClose;\n            var timeout = opt.timeout !== void 0 ? opt.timeout : this.timeout;\n            var icon = opt.icon || this.icon;\n            var isAlive = true;\n            var notify = null;\n            var closeTimer = void 0;\n            /*- Create a desktop notification -*/\n            /*- Get Permissions -*/\n            if (window[\"Notification\"].permission !== \"granted\") {\n                return false;\n            }\n            notify = new window[\"Notification\"](title, {\n                icon: icon,\n                body: message\n            });\n            /*- Set timeout -*/\n            if (timeout !== 0) {\n                closeTimer = setTimeout(function () {\n                    if (isAlive) {\n                        notify.close();\n                    }\n                }, timeout * 1000);\n            }\n            /*- onClick event -*/\n            notify.addEventListener(\"click\", function () {\n                if (onClick) {\n                    onClick.call(_this2);\n                }\n                notify.close();\n            });\n            /*- onClose event -*/\n            notify.onclose = function () {\n                isAlive = false;\n                if (onClose) {\n                    onClose.call(_this2);\n                }\n            };\n            /*- Show notify -*/\n            if (notify.show) {\n                notify.show();\n            }\n            return true;\n        }\n    }, {\n        key: \"_positioner\",\n        value: function _positioner() {\n            var tH = this.target === document.body ? window.innerHeight || document.body.clientHeight : this.target.offsetHeight;\n            var pX = 0;\n            var pY = 0;\n            for (var i = 0, l = this._notifies.length; i < l; i++) {\n                var notify = this._notifies[i];\n                var x = this.vMargin + pX;\n                var y = this.hMargin + pY;\n                notify.style[this.hAlign] = x.toString(10) + \"px\";\n                notify.style[this.vAlign] = y.toString(10) + \"px\";\n                pY += this.spacing + notify.offsetHeight;\n                if (pY + notify.offsetHeight + this.vMargin + this.spacing >= tH) {\n                    pY = 0;\n                    pX += this.spacing + notify.offsetWidth;\n                }\n            }\n        }\n    }]);\n\n    return Notify;\n}();\n\nfunction createNotify(option) {\n    return new Notify(option);\n}\n\n\n\n},{\"./element\":7}],13:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Popover = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.createPopover = createPopover;\n\nvar _element = require(\"./element\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*?\n    flagrate.createPopover(option)\n    new flagrate.Popover(option)\n    - option (Object) - options.\n\n    Popover.\n\n    #### option\n\n    * `target`    (Element):\n    * `text`      (String):\n    * `html`      (String):\n    * `element`   (Element):\n    * `className` (String):\n**/\n\nvar Popover = exports.Popover = function () {\n    function Popover() {\n        var opt = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n        _classCallCheck(this, Popover);\n\n        this._isShowing = false;\n        this._openHandler = this.open.bind(this);\n        this._closeHandler = this.close.bind(this);\n        if (opt.target) {\n            if (!opt.target[\"isFlagrated\"]) {\n                opt.target = _element.Element.extend(opt.target);\n            }\n            this._target = opt.target;\n        }\n        if (opt.text) {\n            this._text = opt.text;\n        }\n        if (opt.html) {\n            this._html = opt.html;\n        }\n        if (opt.element) {\n            this._element = opt.element;\n        }\n        if (opt.className) {\n            this._className = opt.className;\n        }\n        if (this._target) {\n            this._target.addEventListener(\"mouseover\", this._openHandler);\n        }\n    }\n\n    _createClass(Popover, [{\n        key: \"open\",\n        value: function open(forceTarget) {\n            var _this = this;\n\n            if (this._isShowing === true) {\n                this.close();\n            }\n            var target = this._target || document.documentElement;\n            if (forceTarget instanceof Event) {\n                if (_element.Element.isElement(forceTarget.target) === true) {\n                    target = forceTarget.target;\n                }\n                document.body.addEventListener(\"click\", this._closeHandler);\n                document.body.addEventListener(\"mouseout\", this._closeHandler);\n                document.body.addEventListener(\"mouseup\", this._closeHandler);\n                window.addEventListener(\"scroll\", this._closeHandler);\n            } else if (_element.Element.isElement(forceTarget) === true) {\n                target = forceTarget;\n            }\n            var div = this._create();\n            this._positioningTimer = setInterval(function () {\n                if (_element.Element.exists(target) === true) {\n                    _updatePosition(target, div);\n                } else {\n                    _this.close();\n                }\n            }, 10);\n            this._div.on(\"click\", function (e) {\n                return e.stopPropagation();\n            });\n            this._div.on(\"mouseup\", function (e) {\n                return e.stopPropagation();\n            });\n            this._div.on(\"mousewheel\", function (e) {\n                e.stopPropagation();\n                e.preventDefault();\n            });\n            _updatePosition(target, div);\n            return this;\n        }\n    }, {\n        key: \"close\",\n        value: function close() {\n            if (this._div === undefined) {\n                return this;\n            }\n            clearInterval(this._positioningTimer);\n            document.body.removeEventListener(\"click\", this._closeHandler);\n            document.body.removeEventListener(\"mouseup\", this._closeHandler);\n            document.body.removeEventListener(\"mouseout\", this._closeHandler);\n            window.removeEventListener(\"scroll\", this._closeHandler);\n            this._isShowing = false;\n            var div = this._div;\n            div.removeClassName(\"flagrate-popover-visible\");\n            setTimeout(function () {\n                if (div && div.remove) {\n                    div.remove();\n                }\n            }, 1000);\n            delete this._div;\n            return this;\n        }\n    }, {\n        key: \"visible\",\n        value: function visible() {\n            return this._isShowing && !!this._div.hasClassName(\"flagrate-popover-visible\");\n        }\n    }, {\n        key: \"remove\",\n        value: function remove() {\n            if (this._div) {\n                this.close();\n            }\n            if (this._target) {\n                this._target.removeEventListener(\"mouseover\", this._openHandler);\n            }\n        }\n    }, {\n        key: \"setTarget\",\n        value: function setTarget(element) {\n            if (this._target === element) {\n                return this;\n            }\n            if (!element[\"isFlagrated\"]) {\n                element = _element.Element.extend(element);\n            }\n            this._target = element;\n            if (this._isShowing === true) {\n                this.open();\n            }\n            return this;\n        }\n    }, {\n        key: \"setText\",\n        value: function setText(text) {\n            if (this._text === text) {\n                return this;\n            }\n            this._text = text;\n            if (this._isShowing === true) {\n                this._div.updateText(text);\n            }\n            return this;\n        }\n    }, {\n        key: \"setHTML\",\n        value: function setHTML(html) {\n            if (this._html === html) {\n                return this;\n            }\n            this._html = html;\n            if (this._isShowing === true) {\n                this._div.update(html);\n            }\n            return this;\n        }\n    }, {\n        key: \"setElement\",\n        value: function setElement(element) {\n            if (this._element === element) {\n                return this;\n            }\n            this._element = element;\n            if (this._isShowing === true) {\n                this._div.update(element);\n            }\n            return this;\n        }\n    }, {\n        key: \"setClassName\",\n        value: function setClassName(className) {\n            if (this._className === className) {\n                return this;\n            }\n            if (this._isShowing === true) {\n                this._div.removeClassName(this._className).addClassName(className);\n            }\n            this._className = className;\n            return this;\n        }\n    }, {\n        key: \"_create\",\n        value: function _create() {\n            this._isShowing = true;\n            var div = this._div = new _element.Element(\"div\", {\n                \"class\": \"flagrate flagrate-popover\"\n            });\n            if (this._className) {\n                div.addClassName(this._className);\n            }\n            if (this._text) {\n                div.updateText(this._text);\n            }\n            if (this._html) {\n                div.update(this._html);\n            }\n            if (this._element) {\n                div.update(this._element);\n            }\n            div.insertTo(document.body);\n            setTimeout(function () {\n                return div.addClassName(\"flagrate-popover-visible\");\n            }, 0);\n            return div;\n        }\n    }, {\n        key: \"target\",\n        get: function get() {\n            return this._target;\n        },\n        set: function set(element) {\n            this.setTarget(element);\n        }\n    }, {\n        key: \"text\",\n        get: function get() {\n            return this._text;\n        },\n        set: function set(text) {\n            this.setText(text);\n        }\n    }, {\n        key: \"html\",\n        get: function get() {\n            return this._html;\n        },\n        set: function set(html) {\n            this.setHTML(html);\n        }\n    }, {\n        key: \"element\",\n        get: function get() {\n            return this._element;\n        },\n        set: function set(element) {\n            this.setElement(element);\n        }\n    }, {\n        key: \"className\",\n        get: function get() {\n            return this._className;\n        },\n        set: function set(className) {\n            this.setClassName(className);\n        }\n    }, {\n        key: \"isShowing\",\n        get: function get() {\n            return this._isShowing;\n        },\n        set: function set(boolean) {\n            if (boolean === true) {\n                this.open();\n            } else {\n                this.close();\n            }\n        }\n    }]);\n\n    return Popover;\n}();\n\nfunction createPopover(option) {\n    return new Popover(option);\n}\nfunction _updatePosition(target, div) {\n    var tOffset = _element.Element.cumulativeOffset(target);\n    var tScroll = _element.Element.cumulativeScrollOffset(target);\n    var tWidth = _element.Element.getWidth(target);\n    var tHeight = _element.Element.getHeight(target);\n    var width = div.getWidth();\n    var height = div.getHeight();\n    var x = tOffset.left - tScroll.left + Math.round(tWidth / 2 - width / 2);\n    var y = tOffset.top - tScroll.top + tHeight;\n    if (y + height > window.innerHeight) {\n        y = window.innerHeight - y + tHeight;\n        div.removeClassName(\"flagrate-popover-tail-top\");\n        div.addClassName(\"flagrate-popover-tail-bottom\");\n        div.style.top = \"\";\n        div.style.bottom = y + \"px\";\n    } else {\n        div.removeClassName(\"flagrate-popover-tail-bottom\");\n        div.addClassName(\"flagrate-popover-tail-top\");\n        div.style.top = y + \"px\";\n        div.style.bottom = \"\";\n    }\n    div.style.left = x + \"px\";\n}\n\n\n\n},{\"./element\":7}],14:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Progress = undefined;\nexports.createProgress = createProgress;\n\nvar _util = require(\"./util\");\n\nvar _element = require(\"./element\");\n\n/*?\n    flagrate.createProgress(option)\n    new flagrate.Progress(option)\n    - option (Object) - options.\n**/\nfunction FProgress() {\n    var opt = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    var attr = opt.attribute || {};\n    attr[\"id\"] = opt.id || null;\n    attr[\"class\"] = opt.className || null;\n    //create\n    var progress = new _element.Element(\"div\", attr);\n    (0, _util.extendObject)(progress, this);\n    progress._value = opt.value || 0;\n    progress._max = opt.max || 100;\n    progress.addClassName(\"flagrate flagrate-progress\");\n    progress._bar = new _element.Element().insertTo(progress);\n    progress._updateProgress();\n    return progress;\n}\nvar Progress = exports.Progress = FProgress;\nfunction createProgress(option) {\n    return new Progress(option);\n}\nProgress.prototype = {\n    getValue: function getValue() {\n        return this._value;\n    },\n    setValue: function setValue(number) {\n        var progress = this;\n        if (typeof number !== \"number\") {\n            return progress;\n        }\n        progress._value = Math.max(0, Math.min(progress._max, number));\n        progress.fire(\"change\", { targetProgress: progress });\n        progress._updateProgress();\n        return progress;\n    },\n    getMax: function getMax() {\n        return this._max;\n    },\n    setMax: function setMax(number) {\n        var progress = this;\n        if (typeof number !== \"number\") {\n            return progress;\n        }\n        progress._max = number;\n        progress.setValue(progress._value);\n        progress._updateProgress();\n        return progress;\n    },\n    _updateProgress: function _updateProgress() {\n        var progress = this;\n        var percentage = Math.max(0, Math.min(100, progress._value / progress._max * 100));\n        progress._bar.setStyle({ width: percentage + \"%\" });\n        return;\n    }\n};\n\n\n\n},{\"./element\":7,\"./util\":28}],15:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Pulldown = undefined;\nexports.createPulldown = createPulldown;\n\nvar _util = require(\"./util\");\n\nvar _element = require(\"./element\");\n\nvar _button = require(\"./button\");\n\nvar _menu = require(\"./menu\");\n\n/*?\n    flagrate.createPulldown(option)\n    new flagrate.Pulldown(option)\n    - option (Object) - options.\n\n    Pulldown.\n\n    #### option\n\n    * `id`                       (String): `id` attribute of `button` element.\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `style`                    (Object): (using flagrate.Element.setStyle)\n    * `items`                    (Array): of item (see: flagrate.Menu)\n    * `isDisabled`               (Boolean; default `false`):\n    * `onSelect`                 (Function):\n    * `onOpen`                   (Function):\n    * `onClose`                  (Function):\n**/\nfunction FPulldown() {\n    var option = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    option.label = option.label || \"\";\n    this.items = option.items || [];\n    this.onOpen = option.onOpen || _util.emptyFunction;\n    this.onClose = option.onClose || _util.emptyFunction;\n    var attr = option.attribute || {};\n    if (option.id) {\n        attr[\"id\"] = option.id;\n    }\n    //create\n    var pulldown = new _button.Button({\n        attribute: attr,\n        label: option.label,\n        icon: option.icon,\n        onSelect: option.onSelect\n    });\n    (0, _util.extendObject)(pulldown, this);\n    pulldown.addEventListener(\"select\", pulldown.open.bind(pulldown));\n    pulldown.addClassName(\"flagrate-pulldown\");\n    if (option.className) {\n        pulldown.addClassName(option.className);\n    }\n    new _element.Element(\"span\", { \"class\": \"flagrate-pulldown-triangle\" }).insertTo(pulldown);\n    if (option.style) {\n        pulldown.setStyle(option.style);\n    }\n    if (option.color) {\n        pulldown.setColor(option.color);\n    }\n    if (option.isDisabled) {\n        pulldown.disable();\n    }\n    return pulldown;\n}\nvar Pulldown = exports.Pulldown = FPulldown;\nfunction createPulldown(option) {\n    return new Pulldown(option);\n}\nPulldown.prototype = {\n    open: function open(e) {\n        var pulldown = this;\n        if (pulldown._open === true || !!pulldown._menu) {\n            pulldown.close();\n            return;\n        }\n        pulldown._open = true;\n        pulldown._menu = new _element.Element(\"div\", { \"class\": \"flagrate-pulldown-menu\" }).insert(new _menu.Menu({\n            items: pulldown.items,\n            onSelect: function onSelect(e) {\n                if (pulldown.onSelect) {\n                    pulldown.onSelect(e, pulldown);\n                }\n                pulldown.fire(\"select\", { targetPulldown: pulldown });\n            }\n        }));\n        pulldown._menu.style.top = pulldown.offsetTop + pulldown.getHeight() + \"px\";\n        pulldown._menu.style.left = pulldown.offsetLeft + \"px\";\n        pulldown.insert({ after: pulldown._menu });\n        // To prevent overflow.\n        var menuHeight = pulldown._menu.getHeight();\n        var menuMargin = parseInt(pulldown._menu.getStyle(\"margin-top\").replace(\"px\", \"\"), 10);\n        var cummOffsetTop = pulldown.cumulativeOffset().top;\n        var upsideSpace = -window.pageYOffset + cummOffsetTop;\n        var downsideSpace = window.pageYOffset + window.innerHeight - cummOffsetTop - pulldown.getHeight();\n        if (menuHeight + menuMargin > downsideSpace) {\n            if (upsideSpace > downsideSpace) {\n                if (upsideSpace < menuHeight + menuMargin) {\n                    menuHeight = upsideSpace - menuMargin - menuMargin;\n                    pulldown._menu.style.maxHeight = menuHeight + \"px\";\n                }\n                pulldown._menu.style.top = pulldown.offsetTop - menuHeight - menuMargin * 2 + \"px\";\n            } else {\n                menuHeight = downsideSpace - menuMargin - menuMargin;\n                pulldown._menu.style.maxHeight = menuHeight + \"px\";\n            }\n        }\n        var close = function close(e) {\n            document.body.removeEventListener(\"click\", close);\n            if (pulldown.parentNode) {\n                pulldown.parentNode.removeEventListener(\"click\", close);\n            }\n            pulldown.removeEventListener(\"select\", close);\n            pulldown.close(e);\n        };\n        setTimeout(function () {\n            document.body.addEventListener(\"click\", close);\n            if (pulldown.parentNode) {\n                pulldown.parentNode.addEventListener(\"click\", close);\n            }\n            pulldown.addEventListener(\"select\", close);\n        }, 0);\n        pulldown.onOpen.call(pulldown, e, pulldown);\n        pulldown.fire(\"open\", { targetPulldown: pulldown });\n        return this;\n    },\n    close: function close(e) {\n        var pulldown = this;\n        if (pulldown._open === false || !pulldown._menu) {\n            return;\n        }\n        pulldown._open = false;\n        pulldown._menu.style.opacity = \"0\";\n        setTimeout(function () {\n            if (!pulldown._menu) {\n                return;\n            }\n            pulldown._menu.remove();\n            delete pulldown._menu;\n            pulldown.onClose(e, pulldown);\n            pulldown.fire(\"close\", { targetPulldown: pulldown });\n        }, 250);\n        return this;\n    }\n};\n\n\n\n},{\"./button\":1,\"./element\":7,\"./menu\":10,\"./util\":28}],16:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Radio = undefined;\nexports.createRadio = createRadio;\n\nvar _util = require(\"./util\");\n\nvar _element = require(\"./element\");\n\nvar idCounter = 0;\n/*?\n    flagrate.createRadio(option)\n    new flagrate.Radio(option)\n    - option (Object) - options.\n**/\nfunction FRadio() {\n    var opt = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    var id = \"flagrate-radio-\" + (++idCounter).toString(10);\n    var attr = opt.attribute || {};\n    attr[\"id\"] = opt.id || null;\n    attr[\"class\"] = opt.className || null;\n    //create\n    var radio = new _element.Element(\"label\", attr);\n    radio.writeAttribute(\"for\", id);\n    (0, _util.extendObject)(radio, this);\n    if (opt.label) {\n        radio.insertText(opt.label);\n    } else if (opt.labelHTML) {\n        radio.insert(opt.labelHTML);\n    }\n    radio.addClassName(\"flagrate flagrate-radio\");\n    if (opt.icon) {\n        radio.addClassName(\"flagrate-icon\");\n        radio.setStyle({\n            backgroundImage: \"url(\" + opt.icon + \")\"\n        });\n    }\n    radio.onChange = opt.onChange || null;\n    radio.onCheck = opt.onCheck || null;\n    radio.onUncheck = opt.onUncheck || null;\n    radio._input = new _element.Element(\"input\", { id: id, type: \"radio\", name: opt.name });\n    radio.insert({ top: new _element.Element() });\n    radio.insert({ top: radio._input });\n    radio._input.addEventListener(\"change\", function (e) {\n        e.stopPropagation();\n        var _e = e;\n        _e.targetRadio = radio;\n        if (radio.isChecked() === true) {\n            if (radio.onCheck) {\n                radio.onCheck(_e, radio);\n            }\n            radio.fire(\"check\", { targetRadio: radio });\n        } else {\n            if (radio.onUncheck) {\n                radio.onUncheck(_e, radio);\n            }\n            radio.fire(\"uncheck\", { targetRadio: radio });\n        }\n        if (radio.onChange) {\n            radio.onChange(_e, radio);\n        }\n        radio.fire(\"change\", { targetRadio: radio });\n    });\n    if (opt.isChecked === true) {\n        radio.check();\n    }\n    if (opt.isFocused === true) {\n        radio.focus();\n    }\n    if (opt.isDisabled === true) {\n        radio.disable();\n    }\n    return radio;\n}\nvar Radio = exports.Radio = FRadio;\nfunction createRadio(option) {\n    return new Radio(option);\n}\nRadio.prototype = {\n    disable: function disable() {\n        this.addClassName(\"flagrate-disabled\");\n        this._input.writeAttribute(\"disabled\", true);\n        return this;\n    },\n    enable: function enable() {\n        this.removeClassName(\"flagrate-disabled\");\n        this._input.writeAttribute(\"disabled\", false);\n        return this;\n    },\n    isEnabled: function isEnabled() {\n        return !this.hasClassName(\"flagrate-disabled\");\n    },\n    isChecked: function isChecked() {\n        return !!this._input.checked;\n    },\n    check: function check() {\n        this._input.checked = true;\n        return this;\n    },\n    uncheck: function uncheck() {\n        this._input.checked = false;\n        return this;\n    }\n};\n\n\n\n},{\"./element\":7,\"./util\":28}],17:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Radios = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nexports.createRadios = createRadios;\n\nvar _util = require(\"./util\");\n\nvar _element = require(\"./element\");\n\nvar _radio = require(\"./radio\");\n\nvar idCounter = 0;\n/*?\n    flagrate.createRadios(option)\n    new flagrate.Radios(option)\n    - option (Object) - options.\n**/\nfunction FRadios() {\n    var opt = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    var id = \"flagrate-radios-\" + (++idCounter).toString(10);\n    var attr = opt.attribute || {};\n    if (opt.id) {\n        attr[\"id\"] = opt.id;\n    }\n    //create\n    var radios = new _element.Element(\"div\", attr);\n    (0, _util.extendObject)(radios, this);\n    radios.addClassName(\"flagrate flagrate-radios\");\n    if (opt.className) {\n        radios.addClassName(opt.className);\n    }\n    if (opt.style) {\n        radios.setStyle(opt.style);\n    }\n    radios.onChange = opt.onChange;\n    radios.selectedIndex = opt.selectedIndex || -1;\n    radios._items = [];\n    (opt.items || []).forEach(function (item, i) {\n        var _item = {};\n        if ((typeof item === \"undefined\" ? \"undefined\" : _typeof(item)) === \"object\") {\n            (0, _util.extendObject)(_item, item);\n        } else {\n            _item.label = typeof item === \"string\" ? item : item.toString();\n            _item.value = item;\n        }\n        _item.name = id;\n        _item._radio = new _radio.Radio(_item).insertTo(radios);\n        _item._radio.addEventListener(\"change\", function (e) {\n            if (radios.onChange) {\n                radios.onChange(e, radios);\n            }\n        });\n        _item._radio.addEventListener(\"check\", function (e) {\n            radios.selectedIndex = i;\n        });\n        radios._items.push(_item);\n    });\n    if (opt.isDisabled) {\n        radios.disable();\n    }\n    if (radios.selectedIndex > -1) {\n        radios._items[radios.selectedIndex]._radio.check();\n    }\n    return radios;\n}\nvar Radios = exports.Radios = FRadios;\nfunction createRadios(option) {\n    return new Radios(option);\n}\nRadios.prototype = {\n    select: function select(index) {\n        if (this._items[index] !== void 0) {\n            this.selectedIndex = index;\n            this._items[index]._radio.check();\n        }\n        return this;\n    },\n    getValue: function getValue() {\n        if (this.selectedIndex === -1) {\n            return void 0;\n        } else {\n            return this._items[this.selectedIndex].value;\n        }\n    },\n    setValue: function setValue(value) {\n        for (var i = 0, l = this._items.length; i < l; i++) {\n            if (this._items[i].value === value) {\n                this.select(i);\n                break;\n            }\n        }\n        return this;\n    },\n    enable: function enable() {\n        for (var i = 0, l = this._items.length; i < l; i++) {\n            this._items[i]._radio.enable();\n        }\n        this.removeClassName(\"flagrate-disabled\");\n        return this;\n    },\n    disable: function disable() {\n        for (var i = 0, l = this._items.length; i < l; i++) {\n            this._items[i]._radio.disable();\n        }\n        this.addClassName(\"flagrate-disabled\");\n        return this;\n    },\n    isEnabled: function isEnabled() {\n        return !this.hasClassName(\"flagrate-disabled\");\n    }\n};\n\n\n\n},{\"./element\":7,\"./radio\":16,\"./util\":28}],18:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.SearchBox = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nexports.createSearchBox = createSearchBox;\n\nvar _util = require(\"./util\");\n\nvar _element = require(\"./element\");\n\nvar _button = require(\"./button\");\n\nvar _textInput = require(\"./text-input\");\n\nvar _menu = require(\"./menu\");\n\n/*?\n    flagrate.createSearchBox(option)\n    new flagrate.SearchBox(option)\n    - option (Object) - options.\n\n    text input for search.\n\n    #### option\n\n    * `id`                       (String): `id` attribute of container element.\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `style`                    (Object): (using flagrate.Element.setStyle)\n    * `value`                    (String): default value.\n    * `placeholder`              (String):\n    * `icon`                     (String):\n    * `isDisabled`               (Boolean; default `false`):\n    * `suggester`                (Function):\n    * `onSearch`                 (Function): callback with input value.\n**/\nfunction FSearchBox() {\n    var opt = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    this.suggester = opt.suggester || null;\n    this.onSearch = opt.onSearch || _util.emptyFunction;\n    var attr = opt.attribute || {};\n    attr[\"id\"] = opt.id || null;\n    attr[\"class\"] = opt.className || null;\n    //create\n    var searchBox = new _element.Element(\"div\", attr);\n    (0, _util.extendObject)(searchBox, this);\n    searchBox.addClassName(\"flagrate flagrate-search-box\");\n    searchBox._input = new _textInput.TextInput({\n        className: \"search-input\",\n        value: opt.value,\n        placeholder: opt.placeholder,\n        icon: opt.icon\n    }).insertTo(searchBox);\n    searchBox._button = new _button.Button({\n        className: \"search-button\",\n        onSelect: searchBox.search.bind(searchBox)\n    }).insertTo(searchBox);\n    searchBox._suggest = new _element.Element(\"div\", {\n        \"class\": \"search-suggest\"\n    }).hide().insertTo(searchBox);\n    searchBox._input.on(\"keydown\", searchBox._onKeydownHandler.bind(searchBox));\n    searchBox._input.on(\"keyup\", searchBox._onKeyupHandler.bind(searchBox));\n    searchBox._input.on(\"focus\", searchBox._onFocusHandler.bind(searchBox));\n    searchBox._input.on(\"blur\", searchBox._onBlurHandler.bind(searchBox));\n    // for Chrome\n    searchBox._suggest.on(\"mousedown\", function (e) {\n        return e.preventDefault();\n    });\n    if (opt.style) {\n        searchBox.setStyle(opt.style);\n    }\n    if (opt.isDisabled) {\n        searchBox.disable();\n    }\n    return searchBox;\n}\nvar SearchBox = exports.SearchBox = FSearchBox;\nfunction createSearchBox(option) {\n    return new SearchBox(option);\n}\nSearchBox.prototype = {\n    disable: function disable() {\n        this.addClassName(\"flagrate-disabled\");\n        this._input.disable();\n        this._button.disable();\n        this._suggest.hide();\n        return this;\n    },\n    enable: function enable() {\n        this.removeClassName(\"flagrate-disabled\");\n        this._input.enable();\n        this._button.enable();\n        return this;\n    },\n    isEnabled: function isEnabled() {\n        return !this.hasClassName(\"flagrate-disabled\");\n    },\n    getValue: function getValue() {\n        return this._input.getValue();\n    },\n    setValue: function setValue(value) {\n        this._input.setValue(value);\n        return this;\n    },\n    search: function search() {\n        var value = this.getValue();\n        this.onSearch(value, this);\n        this.fire(\"search\", value);\n        this._input.blur();\n        return this;\n    },\n    suggest: function suggest() {\n        if (!this.suggester) {\n            return this;\n        }\n        this._suggest.hide();\n        var value = this.getValue();\n        var result = this.suggester(value, this._suggested.bind(this));\n        if (result !== void 0) {\n            this._suggested(result);\n        }\n        return this;\n    },\n    focus: function focus() {\n        this._input.focus();\n    },\n    blur: function blur() {\n        this._input.blur();\n    },\n    _suggested: function _suggested(suggestedItems) {\n        var _this = this;\n\n        if (!suggestedItems) {\n            return;\n        }\n        if (suggestedItems.length === 0) {\n            this._suggest.hide();\n            return;\n        }\n        var items = [];\n        suggestedItems.forEach(function (item) {\n            if (typeof item === \"string\" && item.trim() !== \"\") {\n                items.push({\n                    label: item.trim(),\n                    onSelect: _createCompletionHandler(_this, item.trim())\n                });\n            } else if ((typeof item === \"undefined\" ? \"undefined\" : _typeof(item)) === \"object\") {\n                items.push({\n                    label: item.label,\n                    icon: item.icon,\n                    onSelect: _createSuggestionHandler(_this, item.onSelect)\n                });\n            }\n        });\n        if (items.length === 0) {\n            this._suggest.hide();\n            return;\n        }\n        var menu = this._menu = new _menu.Menu({\n            items: items,\n            onSelect: function onSelect() {\n                _this._suggest.hide();\n            }\n        });\n        _element.Element.addClassName(menu.firstChild, \"flagrate-search-suggest-selected\");\n        this._suggest.update(menu).show();\n        // To prevent overflow.\n        var menuHeight = this._suggest.getHeight();\n        var menuMargin = parseInt(this._suggest.getStyle(\"margin-top\").replace(\"px\", \"\"), 10);\n        var cummOffsetTop = this.cumulativeOffset().top;\n        var upsideSpace = -window.pageYOffset + cummOffsetTop;\n        var downsideSpace = window.pageYOffset + window.innerHeight - cummOffsetTop - this.getHeight();\n        if (menuHeight + menuMargin > downsideSpace) {\n            if (upsideSpace > downsideSpace) {\n                if (upsideSpace < menuHeight + menuMargin) {\n                    menuHeight = upsideSpace - menuMargin - menuMargin;\n                    this._suggest.style.maxHeight = menuHeight + \"px\";\n                }\n                this._suggest.addClassName(\"flagrate-search-suggest-upper\");\n            } else {\n                menuHeight = downsideSpace - menuMargin - menuMargin;\n                this._suggest.style.maxHeight = menuHeight + \"px\";\n                this._suggest.removeClassName(\"flagrate-search-suggest-upper\");\n            }\n        } else {\n            this._suggest.removeClassName(\"flagrate-search-suggest-upper\");\n        }\n        // reset scroll position\n        this._suggest.scrollTop = 0;\n    },\n    _onKeydownHandler: function _onKeydownHandler(e) {\n        // ESC: 27\n        if (e.keyCode === 27) {\n            this._input.select();\n            this._suggest.hide();\n        } else if (this._suggest.visible() === true) {\n            // ENTER: 13\n            if (e.keyCode === 13) {\n                var target = this._menu.getElementsByClassName(\"flagrate-search-suggest-selected\")[0];\n                target.click();\n                return;\n            }\n            // UP: 38, DOWN: 40\n            if (e.keyCode !== 38 && e.keyCode !== 40) {\n                return;\n            }\n            e.preventDefault();\n            var elements = this._menu.getElementsByTagName(\"button\");\n            for (var i = 0, l = elements.length; i < l; i++) {\n                if (elements[i].hasClassName(\"flagrate-search-suggest-selected\") === true) {\n                    if (e.keyCode === 38 && i !== 0 || e.keyCode === 40 && i + 1 !== l) {\n                        elements[i].removeClassName(\"flagrate-search-suggest-selected\");\n                    }\n                    var scrollTop = -1;\n                    if (e.keyCode === 38 && i !== 0) {\n                        elements[i - 1].addClassName(\"flagrate-search-suggest-selected\");\n                        scrollTop = elements[i - 1].offsetHeight + elements[i - 1].offsetTop;\n                    } else if (e.keyCode === 40 && i + 1 !== l) {\n                        elements[i + 1].addClassName(\"flagrate-search-suggest-selected\");\n                        scrollTop = elements[i + 1].offsetHeight + elements[i + 1].offsetTop;\n                    }\n                    if (scrollTop !== -1) {\n                        this._suggest.scrollTop = scrollTop + 4 - this._suggest.getHeight();\n                    }\n                    break;\n                }\n            }\n        } else if (e.keyCode === 13) {\n            setTimeout(this.search.bind(this), 100);\n        }\n    },\n    _onKeyupHandler: function _onKeyupHandler(e) {\n        if (this._lastValue !== this.getValue()) {\n            this._lastValue = this.getValue();\n            this.suggest();\n        }\n    },\n    _onFocusHandler: function _onFocusHandler(e) {\n        setTimeout(this.suggest.bind(this), 100);\n    },\n    _onBlurHandler: function _onBlurHandler(e) {\n        var _this2 = this;\n\n        setTimeout(function () {\n            if (document.activeElement !== _this2._suggest && _this2._suggest.visible() === true) {\n                _this2._suggest.hide();\n            }\n        }, 100);\n    }\n};\nfunction _createCompletionHandler(searchBox, value) {\n    return function () {\n        searchBox._input.setValue(value);\n        searchBox._input.focus();\n    };\n}\nfunction _createSuggestionHandler(searchBox, onSelect) {\n    return function () {\n        onSelect.call(searchBox);\n        searchBox._input.blur();\n    };\n}\n\n\n\n},{\"./button\":1,\"./element\":7,\"./menu\":10,\"./text-input\":24,\"./util\":28}],19:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Select = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nexports.createSelect = createSelect;\n\nvar _util = require(\"./util\");\n\nvar _element = require(\"./element\");\n\nvar _pulldown = require(\"./pulldown\");\n\nvar _grid = require(\"./grid\");\n\n/*?\n    flagrate.createSelect(option)\n    new flagrate.Select(option)\n    - option (Object) - options.\n\n    Select.\n\n    #### option\n\n    * `id`                       (String): `id` attribute of container element.\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `style`                    (Object): (using flagrate.Element.setStyle)\n    * `items`                    (Array):\n    * `listView`                 (Boolean; default `false`):\n    * `multiple`                 (Boolean; default `false`):\n    * `max`                      (Number; default `-1`):\n    * `selectedIndex`            (Number):\n    * `selectedIndexes`          (Array): array of Number.\n    * `isDisabled`               (Boolean; default `false`):\n**/\nfunction FSelect() {\n    var option = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    this.items = option.items || [];\n    this.listView = option.listView || false;\n    this.multiple = option.multiple || false;\n    this.max = option.max || -1;\n    if (this.multiple) {\n        this.selectedIndexes = option.selectedIndexes || [];\n    } else {\n        this.selectedIndex = typeof option.selectedIndex === \"undefined\" ? -1 : option.selectedIndex;\n    }\n    var attr = option.attribute || {};\n    if (option.id) {\n        attr[\"id\"] = option.id;\n    }\n    this.isPulldown = !this.listView && !this.multiple;\n    // create\n    var container = new _element.Element(\"div\", attr);\n    function createOnSelectHandler(i) {\n        return function () {\n            return container.select(i);\n        };\n    }\n    function createOnDeselectHandler(i) {\n        return function () {\n            return container.deselect(i);\n        };\n    }\n    // normalize items\n    for (var i = 0, l = this.items.length; i < l; i++) {\n        if (_typeof(this.items[i]) !== \"object\") {\n            this.items[i] = {\n                label: typeof this.items[i] === \"string\" ? this.items[i] : this.items[i].toString(10),\n                value: this.items[i]\n            };\n        }\n    }\n    if (this.isPulldown) {\n        container._pulldown = new _pulldown.Pulldown({\n            label: \"-\",\n            items: [{\n                label: \"-\",\n                onSelect: createOnSelectHandler(-1)\n            }].concat(this.items.map(function (item, i) {\n                return {\n                    label: item.label,\n                    labelHTML: item.labelHTML,\n                    icon: item.icon,\n                    onSelect: createOnSelectHandler(i)\n                };\n            }))\n        }).insertTo(container);\n    } else {\n        container._grid = new _grid.Grid({\n            headless: true,\n            multiSelect: this.multiple,\n            cols: [{\n                key: \"label\"\n            }],\n            rows: this.items.map(function (item, i) {\n                return {\n                    cell: {\n                        label: {\n                            text: item.label,\n                            html: item.labelHTML,\n                            icon: item.icon\n                        }\n                    },\n                    onSelect: createOnSelectHandler(i),\n                    onDeselect: createOnDeselectHandler(i)\n                };\n            })\n        }).insertTo(container);\n    }\n    (0, _util.extendObject)(container, this);\n    container.addClassName(\"flagrate flagrate-select\");\n    if (!container.isPulldown) {\n        container.addClassName(\"flagrate-select-list-view\");\n    }\n    if (option.className) {\n        container.addClassName(option.className);\n    }\n    if (option.style) {\n        container.setStyle(option.style);\n    }\n    if (option.isDisabled) {\n        container.disable();\n    }\n    if (container.multiple) {\n        container.selectedIndexes.forEach(function (index) {\n            container.select(index);\n        });\n    } else {\n        if (container.selectedIndex > -1) {\n            container.select(container.selectedIndex);\n        }\n    }\n    return container;\n}\nvar Select = exports.Select = FSelect;\nfunction createSelect(option) {\n    return new Select(option);\n}\nSelect.prototype = {\n    select: function select(index) {\n        if (this.items.length <= index) {\n            return this;\n        }\n        if (this.multiple) {\n            if (this.max > -1 && this.selectedIndexes.length >= this.max) {\n                if (this._grid.rows[index].isSelected === true) {\n                    this._grid.deselect(index);\n                }\n                return this;\n            }\n            if (this.selectedIndexes.indexOf(index) === -1) {\n                this.selectedIndexes.push(index);\n            }\n        } else {\n            this.selectedIndex = index;\n        }\n        if (this.isPulldown) {\n            if (index === -1) {\n                this._pulldown.setLabel(\"-\");\n                this._pulldown.setIcon(null);\n            } else {\n                if (this.items[index].label !== undefined) {\n                    this._pulldown.setLabel(this.items[index].label);\n                } else if (this.items[index].labelHTML !== undefined) {\n                    this._pulldown.setLabelHTML(this.items[index].labelHTML);\n                }\n                this._pulldown.setIcon(this.items[index].icon);\n            }\n            this.fire(\"change\");\n        } else {\n            if (!this._grid.rows[index].isSelected) {\n                this._grid.select(index);\n            }\n        }\n        return this;\n    },\n    deselect: function deselect(index) {\n        if (this.items.length <= index) {\n            return this;\n        }\n        if (this.multiple) {\n            var selectedIndex = this.selectedIndexes.indexOf(index);\n            if (selectedIndex !== -1) {\n                this.selectedIndexes.splice(this.selectedIndexes.indexOf(index), 1);\n            }\n        } else {\n            this.selectedIndex = -1;\n        }\n        if (this.isPulldown) {\n            this._pulldown.setLabel(\"-\");\n            this._pulldown.setIcon(null);\n            this.fire(\"change\");\n        } else {\n            if (this.multiple) {\n                if (this._grid.rows[index].isSelected === true) {\n                    this._grid.deselect(index);\n                }\n            } else {\n                for (var i = 0, l = this.items.length; i < l; i++) {\n                    if (this._grid.rows[i].isSelected === true) {\n                        this._grid.deselect(i);\n                    }\n                }\n            }\n        }\n        return this;\n    },\n    selectAll: function selectAll() {\n        if (this.multiple) {\n            this._grid.selectAll();\n            this.selectedIndexes = [];\n            for (var i = 0, l = this.items.length; i < l; i++) {\n                this.selectedIndexes.push(i);\n            }\n        }\n        return this;\n    },\n    deselectAll: function deselectAll() {\n        if (this.multiple) {\n            this._grid.deselectAll();\n            this.selectedIndexes = [];\n        } else {\n            this.deselect();\n        }\n        return this;\n    },\n    disable: function disable() {\n        this.addClassName(\"flagrate-disabled\");\n        if (this.isPulldown) {\n            this._pulldown.disable();\n        } else {\n            this._grid.disable();\n        }\n        return this;\n    },\n    enable: function enable() {\n        this.removeClassName(\"flagrate-disabled\");\n        if (this.isPulldown) {\n            this._pulldown.enable();\n        } else {\n            this._grid.enable();\n        }\n        return this;\n    },\n    isEnabled: function isEnabled() {\n        return !this.hasClassName(\"flagrate-disabled\");\n    },\n    getValue: function getValue() {\n        if (this.selectedIndex > -1) {\n            return this.items[this.selectedIndex].value;\n        } else {\n            return void 0;\n        }\n    },\n    getValues: function getValues() {\n        var result = [];\n        for (var i = 0, l = this.selectedIndexes.length; i < l; i++) {\n            result.push(this.items[this.selectedIndexes[i]].value);\n        }\n        return result;\n    }\n};\n\n\n\n},{\"./element\":7,\"./grid\":9,\"./pulldown\":15,\"./util\":28}],20:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Slider = undefined;\nexports.createSlider = createSlider;\n\nvar _util = require(\"./util\");\n\nvar _progress = require(\"./progress\");\n\nvar progress = _interopRequireWildcard(_progress);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n/*?\n    flagrate.createSlider(option)\n    new flagrate.Slider(option)\n    - option (Object) - options.\n**/\nfunction FSlider() {\n    var opt = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    //create\n    var slider = new progress.Progress(opt);\n    (0, _util.extendObject)(slider, this);\n    slider.addClassName(\"flagrate-slider\");\n    if (slider.tabIndex === -1) {\n        slider.tabIndex = 0;\n    }\n    if (window.ontouchstart !== undefined) {\n        slider.addEventListener(\"touchstart\", slider._onTouchStartHandler.bind(slider));\n    }\n    if (navigator.pointerEnabled) {\n        slider.addEventListener(\"pointerdown\", slider._onPointerDownHandler.bind(slider));\n    } else if (navigator.msPointerEnabled) {\n        // deprecated on IE11\n        slider.addEventListener(\"MSPointerDown\", slider._onPointerDownHandler.bind(slider));\n    } else {\n        slider.addEventListener(\"mousedown\", slider._onPointerDownHandler.bind(slider));\n    }\n    if (opt.isDisabled) {\n        slider.disable();\n    }\n    return slider;\n}\nvar Slider = exports.Slider = FSlider;\nfunction createSlider(option) {\n    return new Slider(option);\n}\nSlider.prototype = {\n    disable: function disable() {\n        var slider = this;\n        slider.dataset[\"flagrateTabIndex\"] = slider.tabIndex.toString(10);\n        slider.removeAttribute(\"tabindex\");\n        return slider.addClassName(\"flagrate-disabled\");\n    },\n    enable: function enable() {\n        var slider = this;\n        var tabIndex = parseInt(slider.dataset[\"flagrateTabIndex\"]);\n        if (tabIndex !== -1) {\n            slider.tabIndex = tabIndex;\n        }\n        return slider.removeClassName(\"flagrate-disabled\");\n    },\n    isEnabled: function isEnabled() {\n        return !this.hasClassName(\"flagrate-disabled\");\n    },\n    _onTouchStartHandler: function _onTouchStartHandler(e) {\n        if (!this.isEnabled()) {\n            return;\n        }\n        e.preventDefault();\n        this._slide(e.touches[0].pageX - this.cumulativeOffset().left, e.touches[0].clientX, \"touch\");\n    },\n    _onPointerDownHandler: function _onPointerDownHandler(e) {\n        if (!this.isEnabled()) {\n            return;\n        }\n        e.preventDefault();\n        this._slide(e.offsetX || e.layerX, e.clientX, \"pointer\");\n    },\n    _slide: function _slide(x, pos, type) {\n        var slider = this;\n        var unitWidth = slider.getWidth() / slider.getMax();\n        var onMove = function onMove(e) {\n            e.preventDefault();\n            if (e.touches && e.touches[0]) {\n                x = x + e.touches[0].clientX - pos;\n                pos = e.touches[0].clientX;\n            } else {\n                x = x + e.clientX - pos;\n                pos = e.clientX;\n            }\n            slider.setValue(Math.round(x / unitWidth));\n            slider.fire(\"slide\", { targetSlider: slider });\n        };\n        var onUp = function onUp(e) {\n            e.preventDefault();\n            if (type === \"pointer\") {\n                if (navigator.pointerEnabled) {\n                    document.removeEventListener(\"pointermove\", onMove);\n                    document.removeEventListener(\"pointerup\", onUp);\n                } else if (navigator.msPointerEnabled) {\n                    document.removeEventListener(\"MSPointerUp\", onUp);\n                    document.removeEventListener(\"MSPointerMove\", onMove);\n                } else {\n                    document.removeEventListener(\"mousemove\", onMove);\n                    document.removeEventListener(\"mouseup\", onUp);\n                }\n            } else if (type === \"touch\") {\n                document.removeEventListener(\"touchmove\", onMove);\n                document.removeEventListener(\"touchend\", onUp);\n                document.removeEventListener(\"touchcancel\", onUp);\n            }\n            if (e.clientX) {\n                x = x + e.clientX - pos;\n                slider.setValue(Math.round(x / unitWidth));\n                slider.fire(\"slide\", { targetSlider: slider });\n            } else if (e.touches && e.touches[0]) {\n                x = x + e.touches[0].clientX - pos;\n                slider.setValue(Math.round(x / unitWidth));\n                slider.fire(\"slide\", { targetSlider: slider });\n            }\n        };\n        if (type === \"pointer\") {\n            if (navigator.pointerEnabled) {\n                document.addEventListener(\"pointermove\", onMove);\n                document.addEventListener(\"pointerup\", onUp);\n            } else if (navigator.msPointerEnabled) {\n                document.addEventListener(\"MSPointerMove\", onMove);\n                document.addEventListener(\"MSPointerUp\", onUp);\n            } else {\n                document.addEventListener(\"mousemove\", onMove);\n                document.addEventListener(\"mouseup\", onUp);\n            }\n        } else if (type === \"touch\") {\n            document.addEventListener(\"touchmove\", onMove);\n            document.addEventListener(\"touchend\", onUp);\n            document.addEventListener(\"touchcancel\", onUp);\n        }\n        slider.setValue(Math.round(x / unitWidth));\n        slider.fire(\"slide\", { targetSlider: slider });\n    }\n};\n\n\n\n},{\"./progress\":14,\"./util\":28}],21:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Switch = undefined;\nexports.createSwitch = createSwitch;\n\nvar _util = require(\"./util\");\n\nvar _button = require(\"./button\");\n\n/*?\n    flagrate.createSwitch(option)\n    new flagrate.Switch(option)\n    - option (Object) - options.\n**/\nfunction FSwitch() {\n    var opt = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    //create\n    var sw = new _button.Button({\n        id: opt.id,\n        className: opt.className,\n        attribute: opt.attribute,\n        style: opt.style,\n        isFocused: opt.isFocused,\n        isDisabled: opt.isDisabled\n    });\n    (0, _util.extendObject)(sw, this);\n    sw.addEventListener(\"select\", sw.toggleSwitch.bind(sw));\n    sw.addClassName(\"flagrate-switch\");\n    if (sw.dataset) {\n        sw.dataset[\"flagrateSwitchStatus\"] = opt.isOn ? \"on\" : \"off\";\n    } else {\n        sw.writeAttribute(\"data-flagrate-switch-status\", opt.isOn ? \"on\" : \"off\");\n    }\n    return sw;\n}\nvar Switch = exports.Switch = FSwitch;\nfunction createSwitch(option) {\n    return new Switch(option);\n}\nSwitch.prototype = {\n    isOn: function isOn() {\n        if (this.dataset) {\n            return this.dataset.flagrateSwitchStatus === \"on\";\n        } else {\n            return this.readAttribute(\"data-flagrate-switch-status\") === \"on\";\n        }\n    },\n    switchOn: function switchOn() {\n        if (this.dataset) {\n            this.dataset.flagrateSwitchStatus = \"on\";\n        } else {\n            this.writeAttribute(\"data-flagrate-switch-status\", \"on\");\n        }\n        return this.fire(\"on\", { targetSwitch: this }).fire(\"change\", { targetSwitch: this });\n    },\n    switchOff: function switchOff() {\n        if (this.dataset) {\n            this.dataset.flagrateSwitchStatus = \"off\";\n        } else {\n            this.writeAttribute(\"data-flagrate-switch-status\", \"off\");\n        }\n        return this.fire(\"off\", { targetSwitch: this }).fire(\"change\", { targetSwitch: this });\n    },\n    toggleSwitch: function toggleSwitch() {\n        return this.isOn() ? this.switchOff() : this.switchOn();\n    }\n};\n\n\n\n},{\"./button\":1,\"./util\":28}],22:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Tab = undefined;\nexports.createTab = createTab;\n\nvar _util = require(\"./util\");\n\nvar _element = require(\"./element\");\n\nvar _button = require(\"./button\");\n\n/*?\n    flagrate.createTab(option)\n    new flagrate.Tab(option)\n    - option (Object) - option.\n\n    Create and initialize the tab.\n\n    #### option\n\n    * `id`            (String): `id` attribute of container.\n    * `className`     (String):\n    * `attribute`     (Object):\n    * `style`         (Object): (using flagrate.Element.setStyle)\n    * `tabs`          (Array): Array of **tab** object.\n    * `selectedIndex` (Number):\n    * `fill`          (Boolean; default `false`):\n    * `bodyless`      (Boolean; default `false`):\n    * `onSelect`      (Function): Triggered whenever select the tab.\n\n    #### tab\n\n    * `key`           (String):\n    * `label`         (String):\n    * `icon`          (String):\n    * `text`          (String):\n    * `html`          (String):\n    * `element`       (Element):\n    * `onSelect`      (Function):\n**/\nfunction FTab() {\n    var opt = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    var attr = opt.attribute || {};\n    attr[\"id\"] = opt.id;\n    attr[\"class\"] = \"flagrate flagrate-tab\";\n    if (opt.fill) {\n        attr[\"class\"] += \" flagrate-tab-fill\";\n    }\n    // create\n    var tab = new _element.Element(\"div\", attr);\n    (0, _util.extendObject)(tab, this);\n    if (opt.className) {\n        tab.addClassName(opt.className);\n    }\n    if (opt.style) {\n        tab.setStyle(opt.style);\n    }\n    tab._tabs = opt.tabs || [];\n    tab._bodyless = opt.bodyless || false;\n    tab._selectedIndex = opt.selectedIndex || 0;\n    tab.onSelect = opt.onSelect || null;\n    Object.defineProperties(tab, {\n        tabs: {\n            enumerable: true,\n            get: function get() {\n                return tab._tabs;\n            },\n            set: function set(tabs) {\n                tab._tabs = tabs;\n                tab._render();\n            }\n        },\n        bodyless: {\n            enumerable: true,\n            get: function get() {\n                return tab._bodyless;\n            },\n            set: function set(bodyless) {\n                tab._bodyless = bodyless;\n                tab.update()._create()._render();\n            }\n        },\n        selectedIndex: {\n            enumerable: true,\n            get: function get() {\n                return tab._selectedIndex;\n            },\n            set: function set(index) {\n                tab.select(index);\n            }\n        }\n    });\n    tab._create()._render();\n    if (tab.tabs.length > 0) {\n        tab.select(tab.selectedIndex);\n    }\n    return tab;\n}\nvar Tab = exports.Tab = FTab;\nfunction createTab(option) {\n    return new Tab(option);\n}\nTab.prototype = {\n    select: function select(a) {\n        var tab = this;\n        var index = typeof a === \"number\" ? a : tab.indexOf(a);\n        if (index < 0 || index >= tab._tabs.length) {\n            return tab;\n        }\n        if (0 <= tab._selectedIndex && tab._selectedIndex < tab._tabs.length && tab._tabs[tab._selectedIndex]._button) {\n            tab._tabs[tab._selectedIndex]._button.removeClassName(\"flagrate-tab-selected\");\n        }\n        tab._selectedIndex = index;\n        var tabItem = tab._tabs[index];\n        if (!tabItem || !tabItem._button) {\n            return tab;\n        }\n        tabItem._button.addClassName(\"flagrate-tab-selected\");\n        if (tabItem.text) {\n            tab._body.updateText(tabItem.text);\n        }\n        if (tabItem.html) {\n            tab._body.update(tabItem.html);\n        }\n        if (tabItem.element) {\n            tab._body.update(tabItem.element);\n        }\n        var tabEvent = window.event || {};\n        tabEvent.targetTab = tab;\n        tabEvent.targetTabItem = tabItem;\n        if (tabItem.onSelect) {\n            tabItem.onSelect.call(tab, tabEvent, tabItem);\n        }\n        if (tab.onSelect) {\n            tab.onSelect(tabEvent, tabItem);\n        }\n        return tab;\n    },\n    unshift: function unshift(r) {\n        var tab = this;\n        if (r instanceof Array) {\n            for (var i = 0, l = r.length; i < l; i++) {\n                tab._tabs.unshift(r);\n            }\n        } else {\n            tab._tabs.unshift(r);\n        }\n        tab._render();\n        return tab._tabs.length;\n    },\n    push: function push(r) {\n        var tab = this;\n        if (r instanceof Array) {\n            for (var i = 0, l = r.length; i < l; i++) {\n                tab._tabs.push(r);\n            }\n        } else {\n            tab._tabs.push(r);\n        }\n        tab._render();\n        return tab._tabs.length;\n    },\n    shift: function shift(c) {\n        var tab = this;\n        var count = c || 1;\n        var removes = [];\n        for (var i = 0, l = tab._tabs.length; i < l && i < count; i++) {\n            removes.push(tab._tabs.shift());\n        }\n        tab._render();\n        return !c ? removes[0] : removes;\n    },\n    pop: function pop(c) {\n        var tab = this;\n        var count = c || 1;\n        var removes = [];\n        for (var i = 0, l = tab._tabs.length; i < l && i < count; i++) {\n            removes.push(tab._tabs.pop());\n        }\n        tab._render();\n        return !c ? removes[0] : removes;\n    },\n    splice: function splice(index, c, t) {\n        var tab = this;\n        c = typeof c === \"undefined\" ? this._tabs.length - index : c;\n        var removes = tab._tabs.splice(index, c);\n        if (t) {\n            if (t instanceof Array === false) {\n                t = [t];\n            }\n            for (var i = 0, l = t.length; i < l; i++) {\n                tab._tabs.splice(index + i, 0, t[i]);\n            }\n        }\n        tab._render();\n        return removes;\n    },\n    removeTab: function removeTab(a) {\n        var tab = this;\n        var removes = [];\n        var bulk = true;\n        if (a instanceof Array === false) {\n            bulk = false;\n            a = [a];\n        }\n        for (var i = 0, l = a.length; i < l; i++) {\n            var index = typeof a[i] === \"number\" ? a[i] : tab.indexOf(a[i]);\n            if (index !== -1) {\n                removes.push(tab.splice(index, 1));\n            }\n        }\n        return bulk ? removes : removes[0];\n    },\n    indexOf: function indexOf(a) {\n        var tab = this;\n        if (typeof a === \"string\") {\n            var index = -1;\n            for (var i = 0, l = tab._tabs.length; i < l; i++) {\n                if (tab._tabs[i].key === a) {\n                    index = i;\n                    break;\n                }\n            }\n            return index;\n        } else {\n            return tab._tabs.indexOf(a);\n        }\n    },\n    _create: function _create() {\n        var tab = this;\n        tab._head = new _element.Element(\"div\", { \"class\": \"flagrate-tab-head\" }).insertTo(tab);\n        if (tab._bodyless === true) {\n            tab._body = new _element.Element();\n        } else {\n            tab._body = new _element.Element(\"div\", { \"class\": \"flagrate-tab-body\" }).insertTo(tab);\n        }\n        return tab;\n    },\n    _render: function _render() {\n        var tab = this;\n        tab._head.update();\n        tab._tabs.forEach(function (tabItem) {\n            if (!tabItem._button) {\n                tabItem._button = new _button.Button({\n                    icon: tabItem.icon,\n                    label: tabItem.label,\n                    onSelect: tab._createOnSelectHandler(tabItem)\n                });\n            }\n            tabItem._button.insertTo(tab._head);\n        });\n        return tab;\n    },\n    _createOnSelectHandler: function _createOnSelectHandler(tabItem) {\n        var tab = this;\n        return function (e) {\n            if (/firefox/i.test(navigator.userAgent) === true) {\n                window.event = e;\n            }\n            tab.select(tabItem);\n        };\n    }\n};\n\n\n\n},{\"./button\":1,\"./element\":7,\"./util\":28}],23:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.TextArea = undefined;\nexports.createTextArea = createTextArea;\n\nvar _util = require(\"./util\");\n\nvar _element = require(\"./element\");\n\n/*?\n    flagrate.createTextArea(option)\n    new flagrate.TextArea(option)\n    - option (Object) - options.\n\n    TextArea.\n\n    #### option\n\n    * `id`                       (String): `id` attribute of `textarea` element.\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `style`                    (Object): (using flagrate.Element.setStyle)\n    * `value`                    (String):\n    * `placeholder`              (String):\n    * `icon`                     (String):\n    * `regexp`                   (RegExp):\n    * `isDisabled`               (Boolean; default `false`):\n**/\nfunction FTextArea() {\n    var option = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    this.regexp = option.regexp || null;\n    var attr = option.attribute || {};\n    if (option.id) {\n        attr[\"id\"] = option.id;\n    }\n    if (option.placeholder) {\n        attr[\"placeholder\"] = option.placeholder;\n    }\n    //create\n    var textArea = new _element.Element(\"textarea\", attr);\n    (0, _util.extendObject)(textArea, this);\n    textArea.addClassName(\"flagrate flagrate-textarea\");\n    if (option.className) {\n        textArea.addClassName(option.className);\n    }\n    if (option.style) {\n        textArea.setStyle(option.style);\n    }\n    if (option.icon) {\n        textArea.setIcon(option.icon);\n    }\n    if (option.value) {\n        textArea.setValue(option.value);\n    }\n    if (option.isDisabled) {\n        textArea.disable();\n    }\n    return textArea;\n}\nvar TextArea = exports.TextArea = FTextArea;\nfunction createTextArea(option) {\n    return new TextArea(option);\n}\nTextArea.prototype = {\n    disable: function disable() {\n        this.addClassName(\"flagrate-disabled\");\n        this.writeAttribute(\"disabled\", true);\n        return this;\n    },\n    enable: function enable() {\n        this.removeClassName(\"flagrate-disabled\");\n        this.writeAttribute(\"disabled\", false);\n        return this;\n    },\n    isEnabled: function isEnabled() {\n        return !this.hasClassName(\"flagrate-disabled\");\n    },\n    setValue: function setValue(value) {\n        this.value = value;\n        return this;\n    },\n    getValue: function getValue() {\n        return this.value;\n    },\n    setIcon: function setIcon(identifier) {\n        this._iconIdentifier = identifier;\n        if (identifier) {\n            return this.addClassName(\"flagrate-icon\").setStyle({\n                backgroundImage: \"url(\" + identifier + \")\"\n            });\n        } else {\n            return this.removeClassName(\"flagrate-icon\").setStyle({\n                backgroundImage: \"none\"\n            });\n        }\n    },\n    getIcon: function getIcon() {\n        return this._iconIdentifier || \"\";\n    },\n\n    isValid: function isValid() {\n        return this.regexp.test(this.getValue());\n    }\n};\n\n\n\n},{\"./element\":7,\"./util\":28}],24:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.TextInput = undefined;\nexports.createTextInput = createTextInput;\n\nvar _util = require(\"./util\");\n\nvar _element = require(\"./element\");\n\n/*?\n    flagrate.createTextInput(option)\n    new flagrate.TextInput(option)\n    - option (Object) - options.\n\n    TextInput.\n\n    #### option\n\n    * `id`                       (String): `id` attribute of `input` element.\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `style`                    (Object): (using flagrate.Element.setStyle)\n    * `value`                    (String):\n    * `placeholder`              (String):\n    * `icon`                     (String):\n    * `regexp`                   (RegExp):\n    * `isDisabled`               (Boolean; default `false`):\n**/\nfunction FTextInput() {\n    var option = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    this.regexp = option.regexp || null;\n    var attr = option.attribute || {};\n    if (option.id) {\n        attr[\"id\"] = option.id;\n    }\n    if (option.value) {\n        attr[\"value\"] = option.value;\n    }\n    if (option.placeholder) {\n        attr[\"placeholder\"] = option.placeholder;\n    }\n    //create\n    var input = new _element.Element(\"input\", attr);\n    (0, _util.extendObject)(input, this);\n    input.addClassName(\"flagrate flagrate-textinput\");\n    if (option.className) {\n        input.addClassName(option.className);\n    }\n    if (option.style) {\n        input.setStyle(option.style);\n    }\n    if (option.icon) {\n        input.setIcon(option.icon);\n    }\n    if (option.isDisabled) {\n        input.disable();\n    }\n    return input;\n}\nvar TextInput = exports.TextInput = FTextInput;\nfunction createTextInput(option) {\n    return new TextInput(option);\n}\nTextInput.prototype = {\n    disable: function disable() {\n        this.addClassName(\"flagrate-disabled\");\n        this.writeAttribute(\"disabled\", true);\n        return this;\n    },\n    enable: function enable() {\n        this.removeClassName(\"flagrate-disabled\");\n        this.writeAttribute(\"disabled\", false);\n        return this;\n    },\n    isEnabled: function isEnabled() {\n        return !this.hasClassName(\"flagrate-disabled\");\n    },\n    setValue: function setValue(value) {\n        this.value = value;\n        return this;\n    },\n    getValue: function getValue() {\n        return this.value;\n    },\n    setIcon: function setIcon(identifier) {\n        this._iconIdentifier = identifier;\n        if (identifier) {\n            return this.addClassName(\"flagrate-icon\").setStyle({\n                backgroundImage: \"url(\" + identifier + \")\"\n            });\n        } else {\n            return this.removeClassName(\"flagrate-icon\").setStyle({\n                backgroundImage: \"none\"\n            });\n        }\n    },\n    getIcon: function getIcon() {\n        return this._iconIdentifier || \"\";\n    },\n\n    isValid: function isValid() {\n        return this.regexp.test(this.getValue());\n    }\n};\n\n\n\n},{\"./element\":7,\"./util\":28}],25:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Tokenizer = undefined;\nexports.createTokenizer = createTokenizer;\n\nvar _util = require(\"./util\");\n\nvar _element = require(\"./element\");\n\nvar _button = require(\"./button\");\n\nvar _menu = require(\"./menu\");\n\nvar _textInput = require(\"./text-input\");\n\n/*?\n    flagrate.createTextInput(option)\n    new flagrate.TextInput(option)\n    - option (Object) - options.\n\n    TextInput.\n\n    #### option\n\n    * `id`                       (String): `id` attribute of `input` element.\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `style`                    (Object): (using flagrate.Element.setStyle)\n    * `value`                    (String):\n    * `placeholder`              (String):\n    * `icon`                     (String):\n    * `regexp`                   (RegExp):\n    * `isDisabled`               (Boolean; default `false`):\n**/\nfunction FTokenizer() {\n    var option = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    this.values = option.values || [];\n    this.max = option.max || -1;\n    this.tokenize = option.tokenize || option.tokenizeSync || _util.identity;\n    if (option.onChange) {\n        this.onChange = option.onChange;\n    }\n    var attr = option.attribute || {};\n    if (option.id) {\n        attr[\"id\"] = option.id;\n    }\n    //create\n    var tokenizer = new _element.Element(\"div\", attr);\n    (0, _util.extendObject)(tokenizer, this);\n    tokenizer.addClassName(\"flagrate flagrate-tokenizer\");\n    if (option.className) {\n        tokenizer.addClassName(option.className);\n    }\n    tokenizer._tokens = new _element.Element(\"span\").insertTo(tokenizer);\n    tokenizer._input = new _textInput.TextInput({ placeholder: option.placeholder }).insertTo(tokenizer);\n    if (tokenizer.values.length !== 0) {\n        tokenizer._updateTokens();\n    }\n    tokenizer.addEventListener(\"click\", tokenizer._onClickHandler.bind(tokenizer));\n    tokenizer._input.addEventListener(\"keydown\", tokenizer._onKeydownHandler.bind(tokenizer));\n    tokenizer._input.addEventListener(\"focus\", tokenizer._onFocusHandler.bind(tokenizer));\n    tokenizer._input.addEventListener(\"blur\", tokenizer._onBlurHandler.bind(tokenizer));\n    if (option.style) {\n        tokenizer.setStyle(option.style);\n    }\n    if (option.icon) {\n        tokenizer.setIcon(option.icon);\n    }\n    if (option.isDisabled) {\n        tokenizer.disable();\n    }\n    return tokenizer;\n}\nvar Tokenizer = exports.Tokenizer = FTokenizer;\nfunction createTokenizer(option) {\n    return new Tokenizer(option);\n}\nTokenizer.prototype = {\n    disable: function disable() {\n        this.addClassName(\"flagrate-disabled\");\n        this._input.disable();\n        return this._updateTokens();\n    },\n    enable: function enable() {\n        this.removeClassName(\"flagrate-disabled\");\n        this._input.enable();\n        return this._updateTokens();\n    },\n    isEnabled: function isEnabled() {\n        return !this.hasClassName(\"flagrate-disabled\");\n    },\n    setValues: function setValues(values) {\n        this.values = values;\n        return this._updateTokens();\n    },\n    getValues: function getValues() {\n        return this.values;\n    },\n    removeValues: function removeValues() {\n        this.values = [];\n        return this._updateTokens();\n    },\n    removeValue: function removeValue(value) {\n        this.values.splice(this.values.indexOf(value), 1);\n        return this._updateTokens();\n    },\n    setIcon: function setIcon(identifier) {\n        this._iconIdentifier = identifier;\n        if (identifier) {\n            this.addClassName(\"flagrate-icon\").setStyle({\n                backgroundImage: \"url(\" + identifier + \")\"\n            });\n        } else {\n            this.removeClassName(\"flagrate-icon\").setStyle({\n                backgroundImage: \"none\"\n            });\n        }\n        return this._updateTokens();\n    },\n    getIcon: function getIcon() {\n        return this._iconIdentifier || \"\";\n    },\n    focus: function focus() {\n        this._input.focus();\n    },\n    _updateTokens: function _updateTokens() {\n        var tokenizer = this;\n        tokenizer._tokens.update();\n        tokenizer.values.forEach(function (value) {\n            var label = void 0;\n            if (typeof value === \"string\") {\n                label = value;\n            } else {\n                label = value.label;\n            }\n            new _button.Button({\n                isDisabled: tokenizer.isEnabled() === false,\n                isRemovableByUser: tokenizer.isEnabled(),\n                onRemove: function onRemove() {\n                    return tokenizer.removeValue(value);\n                },\n                label: label\n            }).insertTo(tokenizer._tokens);\n        });\n        var vw = tokenizer.getWidth();\n        var bw = tokenizer.getStyle(\"border-width\") === null ? 2 : parseInt(tokenizer.getStyle(\"border-width\").replace(\"px\", \"\"), 10);\n        var pl = tokenizer.getStyle(\"padding-left\") === null ? 4 : parseInt(tokenizer.getStyle(\"padding-left\").replace(\"px\", \"\"), 10);\n        var pr = tokenizer.getStyle(\"padding-right\") === null ? 4 : parseInt(tokenizer.getStyle(\"padding-right\").replace(\"px\", \"\"), 10);\n        var tw = tokenizer._tokens.getWidth();\n        var tm = tokenizer._tokens.getStyle(\"margin-left\") === null ? 2 : parseInt(tokenizer._tokens.getStyle(\"margin-left\").replace(\"px\", \"\"), 10);\n        var im = tokenizer._input.getStyle(\"margin-left\") === null ? 2 : parseInt(tokenizer._input.getStyle(\"margin-left\").replace(\"px\", \"\"), 10);\n        var ip = tokenizer._input.getStyle(\"padding-left\") === null ? 2 : parseInt(tokenizer._input.getStyle(\"padding-left\").replace(\"px\", \"\"), 10);\n        var aw = vw - pl - pr - tw - tm - im - ip - bw * 2 - 2;\n        if (aw > 30) {\n            tokenizer._input.style.width = aw + \"px\";\n        } else if (aw < -5) {\n            tokenizer._input.style.width = \"\";\n        } else {\n            tokenizer._input.style.width = \"100%\";\n        }\n        tokenizer.fire(\"change\");\n        return this;\n    },\n    _tokenize: function _tokenize() {\n        this._candidates = [];\n        var str = this._input.value;\n        var result = this.tokenize(str, this._tokenized.bind(this));\n        if (result !== void 0) {\n            this._tokenized(result);\n        }\n        this._lastTokenizedValue = this._input.value;\n        return this;\n    },\n    _tokenized: function _tokenized(candidates) {\n        if (candidates instanceof Array === false) {\n            candidates = [candidates];\n        }\n        this._candidates = [];\n        var menu = new _menu.Menu({\n            onSelect: function onSelect() {\n                return menu.remove();\n            }\n        });\n        menu.style.left = this._input.offsetLeft + \"px\";\n        for (var i = 0, l = candidates.length, candidate, menuItem; i < l; i++) {\n            candidate = candidates[i];\n            if (typeof candidate === \"string\") {\n                if (candidate === \"\") {\n                    continue;\n                }\n                menuItem = { label: candidate };\n            } else {\n                menuItem = candidate;\n            }\n            if (menuItem.onSelect) {\n                menuItem._onSelect = menuItem.onSelect;\n            }\n            menuItem.onSelect = _createMenuOnSelectHandler(this, candidate);\n            this._candidates.push(candidate);\n            menu.push(menuItem);\n        }\n        if (this._menu) {\n            this._menu.remove();\n        }\n        if (this._candidates.length !== 0) {\n            this.insert({ top: menu });\n            this._menu = menu;\n        }\n        return this;\n    },\n    _onClickHandler: function _onClickHandler() {\n        this.focus();\n    },\n    _onKeydownHandler: function _onKeydownHandler(e) {\n        var _this = this;\n\n        // ENTER:13\n        if (e.keyCode === 13 && this._lastTokenizedValue !== this._input.value) {\n            e.stopPropagation();\n            e.preventDefault();\n            this._lastTokenizedValue = this._input.value;\n            this._tokenize();\n            return;\n        }\n        if (this._candidates && this._candidates.length !== 0) {\n            if (\n            // ENTER:13\n            e.keyCode === 13 ||\n            // right:39\n            e.keyCode === 39) {\n                e.stopPropagation();\n                e.preventDefault();\n                this._input.value = \"\";\n                if (this.max < 0 || this.max > this.values.length) {\n                    this.values.push(this._candidates[0]);\n                }\n                this._updateTokens();\n                if (this.onChange) {\n                    this.onChange();\n                }\n                if (this._menu) {\n                    this._menu.remove();\n                }\n            }\n        }\n        if (this._input.value === \"\" && this.values.length !== 0) {\n            if (\n            // BS:8\n            e.keyCode === 8) {\n                e.stopPropagation();\n                e.preventDefault();\n                var value = this.values.pop();\n                this._input.value = typeof value === \"string\" ? value : typeof value.value === \"string\" ? value.value : \"\";\n                this._updateTokens();\n                if (this.onChange) {\n                    this.onChange();\n                }\n                if (this._menu) {\n                    this._menu.remove();\n                }\n            }\n        }\n        setTimeout(function () {\n            if (_this.max > -1 && _this.max <= _this.values.length && _this._input.value !== \"\") {\n                e.stopPropagation();\n                _this._input.value = \"\";\n                return;\n            }\n            _this._tokenize();\n        }, 0);\n    },\n    _onFocusHandler: function _onFocusHandler() {\n        this._updateTokens();\n        this._tokenize();\n        this.addClassName(\"flagrate-tokenizer-focus\");\n    },\n    _onBlurHandler: function _onBlurHandler() {\n        var _this2 = this;\n\n        this._input.value = \"\";\n        if (this._menu) {\n            this._menu.style.opacity = \"0\";\n            setTimeout(function () {\n                return _this2._menu.remove();\n            }, 500);\n        }\n        this.removeClassName(\"flagrate-tokenizer-focus\");\n    }\n};\nfunction _createMenuOnSelectHandler(tokenizer, candidate) {\n    return function (e) {\n        if (tokenizer.max < 0 || tokenizer.max > tokenizer.values.length) {\n            tokenizer.values.push(candidate);\n        }\n        tokenizer._updateTokens();\n        if (tokenizer.onChange) {\n            tokenizer.onChange(e, this);\n        }\n    };\n}\n\n\n\n},{\"./button\":1,\"./element\":7,\"./menu\":10,\"./text-input\":24,\"./util\":28}],26:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Toolbar = undefined;\nexports.createToolbar = createToolbar;\n\nvar _util = require(\"./util\");\n\nvar _element = require(\"./element\");\n\n/*?\n    flagrate.createToolbar(option)\n    new flagrate.Toolbar(option)\n    - option (Object) - options.\n\n    Toolbar.\n\n    #### option\n\n    * `id`                       (String): `id` attribute of container element.\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `style`                    (Object): (using flagrate.Element.setStyle)\n    * `items`                    (Array): of item or String to create border, Element to insert any element.\n\n    #### item\n\n    * `key`                      (String):\n    * `element`                  (Element):\n**/\nfunction FToolbar() {\n    var option = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    var items = option.items || [];\n    var attr = option.attribute || {};\n    if (option.id) {\n        attr[\"id\"] = option.id;\n    }\n    //create\n    var container = new _element.Element(\"div\", attr);\n    (0, _util.extendObject)(container, this);\n    container.addClassName(\"flagrate flagrate-toolbar\");\n    if (option.className) {\n        container.addClassName(option.className);\n    }\n    if (option.style) {\n        container.setStyle(option.style);\n    }\n    for (var i = 0, l = items.length; i < l; i++) {\n        container.push(items[i]);\n    }\n    return container;\n}\nvar Toolbar = exports.Toolbar = FToolbar;\nfunction createToolbar(option) {\n    return new Toolbar(option);\n}\nToolbar.prototype = {\n    push: function push(option) {\n        if (typeof option === \"string\") {\n            new _element.Element(\"hr\").insertTo(this);\n        } else if (option instanceof HTMLElement) {\n            this.insert(option);\n        } else {\n            var element = void 0;\n            if (option.isBorder) {\n                element = new _element.Element(\"hr\").insertTo(this);\n            } else {\n                if (!option.element.isFlagrated) {\n                    option.element = _element.Element.extend(option.element);\n                }\n                element = _element.Element.insertTo(option.element, this);\n            }\n            if (option.key) {\n                element.dataset[\"_key\"] = option.key;\n            }\n        }\n        return this;\n    },\n    getElementByKey: function getElementByKey(key) {\n        var elements = this.childNodes;\n        for (var i = 0, l = elements.length; i < l; i++) {\n            if (elements[i].dataset[\"_key\"] === key) {\n                return elements[i];\n            }\n        }\n        return null;\n    },\n    getElements: function getElements() {\n        return this.childNodes || [];\n    }\n};\n\n\n\n},{\"./element\":7,\"./util\":28}],27:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Tutorial = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.createTutorial = createTutorial;\n\nvar _util = require(\"./util\");\n\nvar _element = require(\"./element\");\n\nvar _button = require(\"./button\");\n\nvar _popover = require(\"./popover\");\n\nvar _modal = require(\"./modal\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*?\n    flagrate.createTutorial(option)\n    new flagrate.Tutorial(option)\n    - option (Object) - options.\n\n    Creates new tutorial.\n\n    #### option\n\n    * `steps`              (Array; required): Array of **step** object.\n    * `count`              (Number; default `0`): current count of step.\n    * `onFinish`           (Function): callback when finish.\n    * `onAbort`            (Function): callback when abort.\n    * `onClose`            (Function): callback when close.\n\n    #### step\n\n    * `target`             (Element|String): Element to target. If target is undefined or not found, will creates flagrate.Modal.\n    * `title`              (String): Title for this step.\n    * `text`               (String): Descriptive text for this step.\n    * `html`               (String): Descriptive html for this step.\n    * `onStep`             (Function): Triggered whenever a step is started.\n    * `onBeforeStep`       (Function): Triggered at before starting of this step.\n    * `onAfterStep`        (Function): Triggered at after of this step.\n\n    ##### onBeforeStep / onAfterStep\n\n        // async callback\n        function (done) {// if expects callback, will waits for it.\n            setTimeout(done, 1000);\n        }\n\n        // sync\n        function () {\n            // ...\n        }\n**/\n\nvar Tutorial = exports.Tutorial = function () {\n    function Tutorial() {\n        var opt = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n        _classCallCheck(this, Tutorial);\n\n        this.onFinish = _util.emptyFunction;\n        this.onAbort = _util.emptyFunction;\n        this.onClose = _util.emptyFunction;\n        this._steps = [];\n        this._index = 0;\n        if (opt.steps) {\n            this._steps = opt.steps;\n        }\n        if (opt.index) {\n            this._index = opt.index;\n        }\n        if (opt.onFinish) {\n            this.onFinish = opt.onFinish;\n        }\n        if (opt.onAbort) {\n            this.onAbort = opt.onAbort;\n        }\n        if (opt.onClose) {\n            this.onClose = opt.onClose;\n        }\n    }\n\n    _createClass(Tutorial, [{\n        key: \"visible\",\n        value: function visible() {\n            return !!this._popover || !!this._modal || !!this._inStep;\n        }\n    }, {\n        key: \"open\",\n        value: function open() {\n            if (this.visible() === false) {\n                this._main();\n            }\n            return this;\n        }\n    }, {\n        key: \"close\",\n        value: function close() {\n            if (this.visible() === true) {\n                this._afterStep(this.onClose.bind(this));\n            }\n            return this;\n        }\n    }, {\n        key: \"abort\",\n        value: function abort() {\n            if (this.visible() === true) {\n                this._afterStep(this.onAbort.bind(this));\n            }\n            return this;\n        }\n    }, {\n        key: \"finish\",\n        value: function finish() {\n            this._afterStep(this.onFinish.bind(this));\n            this._index = 0;\n            return this;\n        }\n    }, {\n        key: \"prev\",\n        value: function prev() {\n            var _this = this;\n\n            this._afterStep(function () {\n                if (_this._index > 0) {\n                    --_this._index;\n                }\n                _this._main();\n            });\n            return this;\n        }\n    }, {\n        key: \"next\",\n        value: function next() {\n            var _this2 = this;\n\n            this._afterStep(function () {\n                if (_this2._index + 1 < _this2._steps.length) {\n                    ++_this2._index;\n                }\n                _this2._main();\n            });\n            return this;\n        }\n    }, {\n        key: \"_main\",\n        value: function _main() {\n            this._inStep = true;\n            var step = this._steps[this._index];\n            if (step.onBeforeStep) {\n                if (step.onBeforeStep.length) {\n                    step.onBeforeStep.call(this, this._step.bind(this));\n                    return this;\n                } else {\n                    step.onBeforeStep.call(this);\n                }\n            }\n            this._step();\n            return this;\n        }\n    }, {\n        key: \"_step\",\n        value: function _step() {\n            var _this3 = this;\n\n            var step = this._steps[this._index];\n            var buttons = [];\n            if (this._index + 1 >= this._steps.length) {\n                buttons.push({\n                    className: \"flagrate-tutorial-button-finish\",\n                    onSelect: function onSelect() {\n                        _this3._afterStep(_this3.finish.bind(_this3));\n                    }\n                });\n            } else {\n                buttons.push({\n                    className: \"flagrate-tutorial-button-next\",\n                    onSelect: function onSelect() {\n                        _this3._afterStep(_this3.next.bind(_this3));\n                    }\n                });\n            }\n            if (this._index > 0) {\n                buttons.push({\n                    className: \"flagrate-tutorial-button-prev\",\n                    onSelect: function onSelect() {\n                        _this3._afterStep(_this3.prev.bind(_this3));\n                    }\n                });\n            }\n            if (this._index + 1 < this._steps.length) {\n                buttons.push({\n                    className: \"flagrate-tutorial-button-abort\",\n                    onSelect: function onSelect() {\n                        _this3._afterStep(_this3.abort.bind(_this3));\n                    }\n                });\n            }\n            buttons[0].color = \"@primary\";\n            var target = void 0;\n            if (typeof step.target === \"string\") {\n                target = document.querySelector(step.target);\n            } else if (_element.Element.isElement(step.target) === true) {\n                target = step.target;\n            }\n            if (target) {\n                (function () {\n                    var container = new _element.Element();\n                    var body = new _element.Element();\n                    if (step.html) {\n                        body.insert(step.html).insertTo(container);\n                    }\n                    if (step.text) {\n                        body.insertText(step.text).insertTo(container);\n                    }\n                    var buttonContainer = new _element.Element(\"footer\").insertTo(container);\n                    buttons.forEach(function (button) {\n                        new _button.Button(button).insertTo(buttonContainer);\n                    });\n                    _this3._popover = new _popover.Popover({\n                        className: \"flagrate-tutorial\",\n                        element: container\n                    });\n                    _this3._popover.open(target);\n                })();\n            } else {\n                this._modal = new _modal.Modal({\n                    disableCloseByMask: true,\n                    disableCloseButton: true,\n                    disableCloseByEsc: true,\n                    className: \"flagrate-tutorial\",\n                    title: step.title,\n                    text: step.text,\n                    html: step.html,\n                    buttons: buttons\n                });\n                this._modal.open();\n            }\n            if (step.onStep) {\n                step.onStep.call(this);\n            }\n            return this;\n        }\n    }, {\n        key: \"_afterStep\",\n        value: function _afterStep(done) {\n            this._inStep = false;\n            var pp = false;\n            if (this._popover) {\n                pp = true;\n                this._popover.remove();\n                delete this._popover;\n            }\n            if (this._modal) {\n                pp = true;\n                this._modal.close();\n                delete this._modal;\n            }\n            if (pp === true) {\n                var step = this._steps[this._index];\n                if (step.onAfterStep) {\n                    if (step.onAfterStep.length) {\n                        step.onAfterStep.call(this, done);\n                        return this;\n                    } else {\n                        step.onAfterStep.call(this);\n                    }\n                }\n            }\n            done();\n            return this;\n        }\n    }]);\n\n    return Tutorial;\n}();\n\nfunction createTutorial(option) {\n    return new Tutorial(option);\n}\n\n\n\n},{\"./button\":1,\"./element\":7,\"./modal\":11,\"./popover\":13,\"./util\":28}],28:[function(require,module,exports){\n/*\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n/**\n * Identity.\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nexports.identity = identity;\nexports.extendObject = extendObject;\nexports.emptyFunction = emptyFunction;\nfunction identity(a) {\n    return a;\n}\n/**\n * Extend Object.\n */\nfunction extendObject(dest, source) {\n    var k = void 0;\n    for (k in source) {\n        dest[k] = source[k];\n    }\n    return dest;\n}\nfunction emptyFunction() {}\n/*?\n    Flagrate#jsonPointer\n\n    ref: node-jsonpointer https://github.com/janl/node-jsonpointer\n    ref: http://tools.ietf.org/html/draft-ietf-appsawg-json-pointer-08\n**/\n/**\n * JSON Pointer Implementation.\n */\nvar jsonPointer = exports.jsonPointer = undefined;\n(function (jsonPointer) {\n    function get(object, pointer) {\n        var pts = validate_input(object, pointer);\n        if (pts.length === 0) {\n            return object;\n        }\n        return traverse(object, pts);\n    }\n    jsonPointer.get = get;\n    function set(object, pointer, value) {\n        if (pointer === \"\" && (typeof value === \"undefined\" ? \"undefined\" : _typeof(value)) === \"object\") {\n            extendObject(object, value);\n            return value;\n        } else {\n            var pts = validate_input(object, pointer);\n            if (pts.length === 0) {\n                throw new Error(\"Invalid JSON pointer for set.\");\n            }\n            return traverse(object, pts, value, true);\n        }\n    }\n    jsonPointer.set = set;\n    function untilde(str) {\n        return str.replace(/~[01]/g, function (m) {\n            switch (m) {\n                case \"~0\":\n                    return \"~\";\n                case \"~1\":\n                    return \"/\";\n            }\n            throw new Error(\"Invalid tilde escape: \" + m);\n        });\n    }\n    function traverse(object, pts, value, isSet) {\n        var part = untilde(pts.shift());\n        if (/^\\d+$/.test(part)) {\n            part = parseInt(part, 10);\n        }\n        if (pts.length !== 0) {\n            if (isSet && _typeof(object[part]) !== \"object\") {\n                if (value === void 0) {\n                    return value;\n                }\n                if (/^\\d+$/.test(pts[0])) {\n                    object[part] = [];\n                } else {\n                    object[part] = {};\n                }\n            }\n            return traverse(object[part], pts, value, isSet);\n        }\n        // we're done\n        if (!isSet) {\n            // just reading\n            return object[part];\n        }\n        // set new value, and return\n        if (value === void 0) {\n            delete object[part];\n        } else {\n            object[part] = value;\n        }\n        return value;\n    }\n    function validate_input(object, pointer) {\n        if ((typeof object === \"undefined\" ? \"undefined\" : _typeof(object)) !== \"object\") {\n            throw new Error(\"Invalid input object.\");\n        }\n        if (pointer === \"\") {\n            return [];\n        }\n        if (!pointer) {\n            throw new Error(\"Invalid JSON pointer.\");\n        }\n        var pts = pointer.split(\"/\");\n        if (pts.shift() !== \"\") {\n            throw new Error(\"Invalid JSON pointer.\");\n        }\n        return pts;\n    }\n})(jsonPointer || (exports.jsonPointer = jsonPointer = {}));\n\n\n\n},{}],29:[function(require,module,exports){\n/*!\n   Copyright 2016 Webnium\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Flagrate = undefined;\n\nvar _util = require(\"./flagrate/util\");\n\nvar util = _interopRequireWildcard(_util);\n\nvar _element = require(\"./flagrate/element\");\n\nvar element = _interopRequireWildcard(_element);\n\nvar _button = require(\"./flagrate/button\");\n\nvar button = _interopRequireWildcard(_button);\n\nvar _buttons = require(\"./flagrate/buttons\");\n\nvar buttons = _interopRequireWildcard(_buttons);\n\nvar _menu = require(\"./flagrate/menu\");\n\nvar menu = _interopRequireWildcard(_menu);\n\nvar _pulldown = require(\"./flagrate/pulldown\");\n\nvar pulldown = _interopRequireWildcard(_pulldown);\n\nvar _textInput = require(\"./flagrate/text-input\");\n\nvar textInput = _interopRequireWildcard(_textInput);\n\nvar _tokenizer = require(\"./flagrate/tokenizer\");\n\nvar tokenizer = _interopRequireWildcard(_tokenizer);\n\nvar _textArea = require(\"./flagrate/text-area\");\n\nvar textArea = _interopRequireWildcard(_textArea);\n\nvar _comboBox = require(\"./flagrate/combo-box\");\n\nvar comboBox = _interopRequireWildcard(_comboBox);\n\nvar _select = require(\"./flagrate/select\");\n\nvar select = _interopRequireWildcard(_select);\n\nvar _contextMenu = require(\"./flagrate/context-menu\");\n\nvar contextMenu = _interopRequireWildcard(_contextMenu);\n\nvar _toolbar = require(\"./flagrate/toolbar\");\n\nvar toolbar = _interopRequireWildcard(_toolbar);\n\nvar _searchBox = require(\"./flagrate/search-box\");\n\nvar searchBox = _interopRequireWildcard(_searchBox);\n\nvar _checkbox = require(\"./flagrate/checkbox\");\n\nvar checkbox = _interopRequireWildcard(_checkbox);\n\nvar _checkboxes = require(\"./flagrate/checkboxes\");\n\nvar checkboxes = _interopRequireWildcard(_checkboxes);\n\nvar _radio = require(\"./flagrate/radio\");\n\nvar radio = _interopRequireWildcard(_radio);\n\nvar _radios = require(\"./flagrate/radios\");\n\nvar radios = _interopRequireWildcard(_radios);\n\nvar _switch = require(\"./flagrate/switch\");\n\nvar sw = _interopRequireWildcard(_switch);\n\nvar _progress = require(\"./flagrate/progress\");\n\nvar progress = _interopRequireWildcard(_progress);\n\nvar _slider = require(\"./flagrate/slider\");\n\nvar slider = _interopRequireWildcard(_slider);\n\nvar _tab = require(\"./flagrate/tab\");\n\nvar tab = _interopRequireWildcard(_tab);\n\nvar _popover = require(\"./flagrate/popover\");\n\nvar popover = _interopRequireWildcard(_popover);\n\nvar _tutorial = require(\"./flagrate/tutorial\");\n\nvar tutorial = _interopRequireWildcard(_tutorial);\n\nvar _notify = require(\"./flagrate/notify\");\n\nvar notify = _interopRequireWildcard(_notify);\n\nvar _modal = require(\"./flagrate/modal\");\n\nvar modal = _interopRequireWildcard(_modal);\n\nvar _grid = require(\"./flagrate/grid\");\n\nvar grid = _interopRequireWildcard(_grid);\n\nvar _form = require(\"./flagrate/form\");\n\nvar form = _interopRequireWildcard(_form);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar Flagrate = exports.Flagrate = undefined;\n(function (Flagrate) {\n    Flagrate.identity = util.identity;\n    Flagrate.extendObject = util.extendObject;\n    Flagrate.emptyFunction = util.emptyFunction;\n    Flagrate.jsonPointer = util.jsonPointer;\n    Flagrate.Element = element.Element;\n    Flagrate.createElement = element.createElement;\n    Flagrate.Button = button.Button;\n    Flagrate.createButton = button.createButton;\n    Flagrate.Buttons = buttons.Buttons;\n    Flagrate.createButtons = buttons.createButtons;\n    Flagrate.Menu = menu.Menu;\n    Flagrate.createMenu = menu.createMenu;\n    Flagrate.Pulldown = pulldown.Pulldown;\n    Flagrate.createPulldown = pulldown.createPulldown;\n    Flagrate.TextInput = textInput.TextInput;\n    Flagrate.createTextInput = textInput.createTextInput;\n    Flagrate.Tokenizer = tokenizer.Tokenizer;\n    Flagrate.createTokenizer = tokenizer.createTokenizer;\n    Flagrate.TextArea = textArea.TextArea;\n    Flagrate.createTextArea = textArea.createTextArea;\n    Flagrate.ComboBox = comboBox.ComboBox;\n    Flagrate.createComboBox = comboBox.createComboBox;\n    Flagrate.Select = select.Select;\n    Flagrate.createSelect = select.createSelect;\n    Flagrate.ContextMenu = contextMenu.ContextMenu;\n    Flagrate.createContextMenu = contextMenu.createContextMenu;\n    Flagrate.Toolbar = toolbar.Toolbar;\n    Flagrate.createToolbar = toolbar.createToolbar;\n    Flagrate.SearchBox = searchBox.SearchBox;\n    Flagrate.createSearchBox = searchBox.createSearchBox;\n    Flagrate.Checkbox = checkbox.Checkbox;\n    Flagrate.createCheckbox = checkbox.createCheckbox;\n    Flagrate.Checkboxes = checkboxes.Checkboxes;\n    Flagrate.createCheckboxes = checkboxes.createCheckboxes;\n    Flagrate.Radio = radio.Radio;\n    Flagrate.createRadio = radio.createRadio;\n    Flagrate.Radios = radios.Radios;\n    Flagrate.createRadios = radios.createRadios;\n    Flagrate.Switch = sw.Switch;\n    Flagrate.createSwitch = sw.createSwitch;\n    Flagrate.Progress = progress.Progress;\n    Flagrate.createProgress = progress.createProgress;\n    Flagrate.Slider = slider.Slider;\n    Flagrate.createSlider = slider.createSlider;\n    Flagrate.Tab = tab.Tab;\n    Flagrate.createTab = tab.createTab;\n    Flagrate.Popover = popover.Popover;\n    Flagrate.createPopover = popover.createPopover;\n    Flagrate.Tutorial = tutorial.Tutorial;\n    Flagrate.createTutorial = tutorial.createTutorial;\n    Flagrate.Notify = notify.Notify;\n    Flagrate.createNotify = notify.createNotify;\n    Flagrate.Modal = modal.Modal;\n    Flagrate.createModal = modal.createModal;\n    Flagrate.Grid = grid.Grid;\n    Flagrate.createGrid = grid.createGrid;\n    Flagrate.Form = form.Form;\n    Flagrate.createForm = form.createForm;\n})(Flagrate || (exports.Flagrate = Flagrate = {}));\nif (window.flagrate === undefined) {\n    window.flagrate = Flagrate;\n}\nexports.default = Flagrate;\n\n\n\n},{\"./flagrate/button\":1,\"./flagrate/buttons\":2,\"./flagrate/checkbox\":3,\"./flagrate/checkboxes\":4,\"./flagrate/combo-box\":5,\"./flagrate/context-menu\":6,\"./flagrate/element\":7,\"./flagrate/form\":8,\"./flagrate/grid\":9,\"./flagrate/menu\":10,\"./flagrate/modal\":11,\"./flagrate/notify\":12,\"./flagrate/popover\":13,\"./flagrate/progress\":14,\"./flagrate/pulldown\":15,\"./flagrate/radio\":16,\"./flagrate/radios\":17,\"./flagrate/search-box\":18,\"./flagrate/select\":19,\"./flagrate/slider\":20,\"./flagrate/switch\":21,\"./flagrate/tab\":22,\"./flagrate/text-area\":23,\"./flagrate/text-input\":24,\"./flagrate/tokenizer\":25,\"./flagrate/toolbar\":26,\"./flagrate/tutorial\":27,\"./flagrate/util\":28}]},{},[29])\n//# sourceMappingURL=flagrate.js.map\n"],"sourceRoot":"/source/"}